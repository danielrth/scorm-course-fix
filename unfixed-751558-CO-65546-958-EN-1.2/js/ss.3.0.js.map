{"version":3,"sources":["ss.3.0.js"],"names":["global","factory","module","exports","document","w","Error","window","this","win","noGlobal","_ajax","url","options","async","data","ie9","requestAnimationFrame","methods","done","fail","type","XHR","XMLHttpRequest","cache","Date","getTime","parts","i","hasOwnProperty","push","encodeURIComponent","join","XDomainRequest","onload","call","onerror","onprogress","ontimeout","open","setRequestHeader","onreadystatechange","readyState","status","setTimeout","send","_checkAutoPlay","audio","Audio","addEventListener","SS","HasAutoPlay","volume","autoplay","src","e","_exit","_cmi_learner_id","_cmiCommunication","$API_Aicc","$API_Local","_aicc","Exit","$API_Scorm12","_scorm","Terminate","$API_TinCan","_getFrameNumber","fileName","_sco_frames","length","getAttribute","_getMatchedFrame","_initFinish","callback","_log","$ERR_NotInitialized","doc","onkeydown","keyPressed","which","_isNextEnabled","_isDebug","_next","_isPreviousEnabled","_previous","PlayToggle","_replay","preventDefault","_cmi_location","folder","split","GetLanguages","id","_current_language","_parseFrames","_cmi_entry","showUser","message","console","log","alert","_millisecondsToCMIDuration","timeDifference","version","dtm","setTime","hms","h","Math","floor","m","getMinutes","s","getSeconds","cs","round","getMilliseconds","substr","$API_Scorm2004","aryPieces","strHour","strMin","strSec","_sco_frameLimit","_current_frame","$ERR_DemoExceeded","nextFileName","found","frames","_isKickback","getElementsByTagName","currentFileName","_current_kickback","_update","undefined","currentLanguage","selectedTopics","topics","_sco_XML","t","topic","title","_sco_quizTotal","f","frame","_parseIni","string","regex","section","param","comment","value","lines","substring","indexOf","forEach","line","test","pMatch","match","toLowerCase","sMatch","previousFileName","_ui_kickback","_ui_slide","contentWindow","location","reload","focus","_ui_on_play","_isPaused","_toggleFrames","presentorOnTop","setAttribute","removeAttribute","scoFrame","quizReturn","timeNow","n","$NOW","v","_cmi_session_time","toString","_cmi_exit","_cmi_completion_status","_sco_scaledPassingScore","$CMI_Passed","$CMI_Completed","Put","SetValue","$CORE_Location","GetLastError","$CODE_NoError","$CORE_SessionTime","$CORE_Exit","$CORE_Status","$CORE_ScoreRaw","_cmi_score_raw","$CORE_SuspendData","_cmi_suspend_data","Commit","_updateUI","$CODE_GeneralError","errorCode","file","frameNumber","isEnd","isQuiz","bullets","_ui_frameNumber","html","_ui_on_progressBar","percent","isNaN","_current_bullets","xml","XMLSerializer","serializeToString","_ui_disableNext","_ui_on_previousEnable","_ui_on_previousDisable","_ui_on_nextEnable","_ui_on_nextDisable","SlideStart","_ui_on_scoFinish","$ERR_CommunicationIssue","InitSco","endAudio","createElement","preload","body","appendChild","querystrings","debug","demo","$API_None","aicc_url","subid","_relayUrl","local","Initialize","author","querySelector","julian","getTimezoneOffset","$ERR_SubscriptionInactive","scoXMLPath","sco","xhr","responseXML","Init","GetValue","$CMI_Incomplete","$CORE_StudentId","_cmi_learner_name","$CORE_StudentName","$CORE_Entry","JSON","parse","languagesXML","languagesJSON","lang","label","SelectLanguage","language","getElementById","play","Resume","matchedPage","GetLocalizedValues","langElements","childNodes","textContent","tagName","firstChild","nodeValue","InitInterface","presentorFrame","_ui_on_animate","onAnimate","setProgressBar","onScoFinish","frameField","titleField","SubsToggle","_isSubsOff","_ui_on_subsOn","_slide_on_subsOn","_ui_on_subsOff","_slide_on_subsOff","CC","ccOff","ccOn","Mute","_ui_on_mute","mute","_ui_on_unMute","unMute","MuteToggle","_isMuted","_slide_on_unMute","_slide_on_mute","Next","onDisable","onEnable","disableOnNext","Play","_ui_on_pause","pause","_slide_on_play","_slide_on_pause","Previous","Replay","GetStudentName","SubmitSurvey","survey","Comments","CourseName","Emphasis","Intro","Overall","ScreenHeight","screen","height","ScreenWidth","width","Student","Summaries","Thoroughness","Url","href","UserAgent","navigator","userAgent","IsAnonymous","SlideEnd","end","slideMute","slidePause","slidePlay","subsOff","subsOn","slideUnMute","ScoreResults","answers","answered","ratio","passed","toFixed","total","QuizCorrect","index","QuizIncorrect","firstKickback","splice","$CMI_Failed","_isCompleted","_version","command","session_id","aicc_sid","responseText","scoData","core","lesson_status","student_id","student_name","lesson_location","slice","entry","score","core_lesson","suspend_data","query","aicc_data","stringify","_api","_getApi","apiName","_scanParents","parent","opener","tries","result","LMSCommit","errCode","LMSGetLastError","element","LMSGetValue","communication","LMSInitialize","LMSSetValue","LMSFinish","define","amd","NS"],"mappings":"CACC,SAAUA,EAAQC,GACI,gBAAXC,SAAiD,gBAAnBA,QAAOC,QAC/CD,OAAOC,QAAUH,EAAOI,SACvBH,EAAQD,GAAQ,GAChB,SAAUK,GACT,IAAKA,EAAED,SACN,KAAM,IAAIE,OAAM,uCAEjB,OAAOL,GAAQI,IAGjBJ,EAAQD,IAEU,mBAAXO,QAAyBA,OAASC,KAAM,SAAUC,EAAKC,GAwa/D,QAASC,GAAMC,EAAKC,GACnB,GAAIC,IAAQ,EACRC,EAAO,GACPC,GAAOP,EAAIQ,sBACXC,GACHC,KAAM,aACNC,KAAM,cAEHC,EAAO,OACPC,EAAM,GAAIC,eAEd,IAAIV,EAAS,CAQZ,GAPIA,EAAQC,SAAU,IACrBA,GAAQ,GAELD,EAAQW,SAAU,IACrBH,EAAO,MACPT,EAAMA,EAAM,OAAQ,GAAIa,OAAOC,WAE5Bb,EAAQE,KAAM,CACjB,GAAIY,KACJ,KAAK,GAAIC,KAAKf,GAAQE,KACjBF,EAAQE,KAAKc,eAAeD,IAC/BD,EAAMG,KAAKC,mBAAmBH,GAAK,IAAMG,mBAAmBlB,EAAQE,KAAKa,IAG3Eb,GAAOY,EAAMK,KAAK,KAEfnB,EAAQM,OACXD,EAAQC,KAAON,EAAQM,MAEpBN,EAAQO,OACXF,EAAQE,KAAOP,EAAQO,MAIZ,SAATC,GAAmBL,IACtBM,EAAM,GAAIb,GAAIwB,eACdX,EAAIY,OAAS,WACZhB,EAAQC,KAAKgB,KAAKjB,EAASI,IAE5BA,EAAIc,QAAU,WACblB,EAAQE,KAAKe,KAAKjB,EAASI,IAE5BA,EAAIe,WAAa,aACjBf,EAAIgB,UAAY,cAEjBhB,EAAIiB,KAAKlB,EAAMT,EAAKE,GAChBQ,EAAIkB,mBACPlB,EAAIkB,iBAAiB,eAAgB,oDACrClB,EAAImB,mBAAqB,WACA,IAApBjC,KAAKkC,aACY,MAAhBlC,KAAKmC,OACRzB,EAAQC,KAAKgB,KAAKjB,EAASV,MAE3BU,EAAQE,KAAKe,KAAKjB,EAASV,SAK/BoC,WAAW,WACVtB,EAAIuB,KAAK9B,IACP,GAGJ,QAAS+B,KACR,IACC,GAAIC,GAAQ,GAAIC,MAEhBD,GAAME,iBAAiB,OAAQ,WAC9BC,GAAGC,aAAc,IACf,GACHJ,EAAMK,OAAS,EACfL,EAAMM,UAAW,EAEjBN,EAAMO,IAAM,gBACX,MAAOC,KAGV,QAASC,KACR,GAAwB,MAApBC,GAIH,OAFAA,GAAkB,IAEVC,IACP,IAAKC,IACL,IAAKC,IACJC,GAAMC,MACN,MACD,KAAKC,IACJC,GAAOC,WACP,MACD,KAAKC,MAMR,QAASC,GAAgBC,GACxB,IAAK,GAAIxC,GAAI,EAAGA,EAAIyC,GAAYC,OAAQ1C,IACvC,GAAIyC,GAAYzC,GAAG2C,aAAa,UAAYH,EAC3C,MAAOxC,GAAI,EAKd,QAAS4C,GAAiBJ,GACzB,IAAK,GAAIxC,GAAI,EAAGA,EAAIyC,GAAYC,OAAQ1C,IACvC,GAAIyC,GAAYzC,GAAG2C,aAAa,UAAYH,EAC3C,MAAOC,IAAYzC,EAGrB,OAAOyC,IAAY,GAGpB,QAASI,GAAYC,GA0CpB,GAzCwB,MAApBjB,IACHkB,GAAK,EAAMC,IAGZnE,EAAIwC,iBAAiB,eAAgBO,GAErCqB,GAAIC,UAAY,SAAUvB,GACzB,GAAIwB,IAAa,CACD,MAAZxB,EAAEyB,QACDC,IAAkBC,MACrBC,IACAJ,GAAa,GAGC,KAAZxB,EAAEyB,OACDI,KACHC,IACAN,GAAa,GAGC,MAAZxB,EAAEyB,QACL9B,GAAGoC,aACHP,GAAa,GAEE,KAAZxB,EAAEyB,QACLO,IACAR,GAAa,GAETG,IACY,MAAZ3B,EAAEyB,QACLE,IAAW,EACXH,GAAa,EACbJ,GAAK,EAAO,kBAGVI,GACHxB,EAAEiC,kBAKAC,IAAmC,KAAlBA,GAGpB,IAAK,GAFDC,GAASD,GAAcE,MAAM,KAAK,GAClC9E,EAAUqC,GAAG0C,eACRhE,EAAI,EAAGA,EAAIf,EAAQyD,OAAQ1C,IAC/Bf,EAAQe,GAAGiE,KAAOH,IACrBI,GAAoBJ,EAIvBK,GAAaD,IAEbpB,EAAwB,WAAfsB,IAGV,QAASrB,GAAKsB,EAAUC,GACnBD,EACCf,GACHzE,EAAI0F,QAAQC,IAAIF,GAEhBG,MAAMH,GAGHzF,EAAI0F,SAAW1F,EAAI0F,QAAQC,KAC9B3F,EAAI0F,QAAQC,IAAIF,GAKnB,QAASI,GAA2BC,EAAgBC,GAEnD,GAAIC,GAAM,GAAIhF,KACdgF,GAAIC,QAAQH,EACZ,IAAII,GAAM,GACNC,EAAI,MAAQC,KAAKC,MAAMP,EAAiB,MACxCQ,EAAI,IAAMN,EAAIO,aACdC,EAAI,IAAMR,EAAIS,aACdC,EAAK,IAAMN,KAAKO,MAAMX,EAAIY,kBAAoB,GAIlD,IAHAV,EAAMC,EAAEU,OAAOV,EAAEtC,OAAS,GAAK,IAAMyC,EAAEO,OAAOP,EAAEzC,OAAS,GAAK,IAC9DqC,GAAOM,EAAEK,OAAOL,EAAE3C,OAAS,GAAK,IAAM6C,EAAGG,OAAOH,EAAG7C,OAAS,GAExDkC,IAAYe,GAAgB,CAI/B,GAAIC,GAAYb,EAAIhB,MAAM,KACtB8B,EAAUD,EAAU,GACpBE,EAASF,EAAU,GACnBG,EAASH,EAAU,EAEvBb,GAAM,KAAOc,EAAU,IAAMC,EAAS,IAAMC,EAAS,IAGtD,MAAOhB,GAGR,QAASxB,KACR,GAAIyC,IAAmBA,GAAkBzD,EAAgB0D,EAAetD,aAAa,SACpF8B,MAAMyB,QACA,CAMN,IAAK,GALDC,GACAC,GAAQ,EACRC,EAASC,GAAcL,EAAeM,qBAAqB,YAAc9D,GACzE+D,EAAkBF,GAAcG,EAAkB9D,aAAa,QAAUsD,EAAetD,aAAa,QAEhG3C,EAAI,EAAGA,EAAIqG,EAAO3D,OAAQ1C,IAAK,CACvC,GAAIwC,GAAW6D,EAAOrG,GAAG2C,aAAa,OACtC,IAAIyD,EAAO,CACVD,EAAe3D,CACf,OAEIgE,IAAoBhE,IACvB4D,GAAQ,GAKPA,GAASD,EACZO,EAAQ9D,EAAiBuD,IAErBG,KACHA,IAAc,EACdG,EAAoBE,OACpBD,EAAQT,GAAgB,KAM5B,QAAS9B,GAAayC,GAIrB,IAAK,GAFDC,GADAC,EAASC,EAASR,qBAAqB,UAGlCS,EAAI,EAAGA,EAAIF,EAAOpE,OAAQsE,IAAK,CACvC,GAAIC,GAAQH,EAAOE,EACfC,GAAMtE,aAAa,UAAYiE,IAClCC,EAAiBI,EACjBhE,GAAIiE,MAAQL,EAAelE,aAAa,UAI1CF,GAAcoE,EAAeN,qBAAqB,QAGlDY,GAAiB,CACjB,KAAK,GAAIC,GAAI,EAAGA,EAAI3E,GAAYC,OAAQ0E,IAAK,CAC5C,GAAIC,GAAQ5E,GAAY2E,EACY,UAAhCC,EAAM1E,aAAa,UACtBwE,MAKH,QAASG,GAAUC,GAClB,GAAIC,IACHC,QAAS,6BACTC,MAAO,oCACPC,QAAS,YAENC,KAEAC,EAAQN,EAAOO,UAAUP,EAAOQ,QAAQ,MAAMhE,MAAM,YACpD0D,EAAU,IAmBd,OAlBAI,GAAMG,QAAQ,SAAUC,GACvB,IAAIT,EAAMG,QAAQO,KAAKD,GAEhB,GAAIT,EAAME,MAAMQ,KAAKD,GAAO,CAClC,GAAIE,GAASF,EAAKG,MAAMZ,EAAME,MAC1BD,GACHG,EAAMH,EAAQY,eAAeF,EAAO,GAAGE,eAAiBF,EAAO,GAE/DP,EAAMO,EAAO,GAAGE,eAAiBF,EAAO,OAEnC,IAAIX,EAAMC,QAAQS,KAAKD,GAAO,CACpC,GAAIK,GAASL,EAAKG,MAAMZ,EAAMC,QAC9BG,GAAMU,EAAO,GAAGD,kBAChBZ,EAAUa,EAAO,GAAGD,kBACM,KAAhBJ,EAAKvF,QAAgB+E,IAC/BA,EAAU,QAGLG,EAGR,QAASnE,KACR,GAAI8E,GACAlC,EAASC,GAAcL,EAAeM,qBAAqB,YAAc9D,GACzE+D,EAAkBF,GAAcG,EAAkB9D,aAAa,QAAUsD,EAAetD,aAAa,OAEzG,IAAI0D,EAAO,GAAG1D,aAAa,UAAY6D,EAAiB,CACvD,IAAK,GAAIxG,GAAI,EAAGA,EAAIqG,EAAO3D,OAAQ1C,IAAK,CACvC,GAAIwC,GAAW6D,EAAOrG,GAAG2C,aAAa,OACtC,IAAI4F,GAAoB/B,IAAoBhE,EAAY,KACxD+F,GAAmB/F,EAGpBkE,EAAQ9D,EAAiB2F,KAI3B,QAAS5E,KACR,GAAI0D,EAEHA,GADGf,GACKkC,EAEAC,EAGTpB,EAAMqB,cAAcC,SAASC,QAAO,GACpC5H,WAAW,WACVqG,EAAMwB,SACJ,KAECC,KACHA,KACAC,IAAY,GAId,QAASC,GAAcC,GAClBA,GACHT,EAAaU,aAAa,SAAU,UACpCT,EAAUU,gBAAgB,YAE1BV,EAAUS,aAAa,SAAU,UACjCV,EAAaW,gBAAgB,WAI/B,QAASzC,GAAQ0C,EAAUC,GAC1B,GAAwB,MAApBxH,GAAyB,CAC5B,GAAIyH,GAAU,GAAIzJ,MACd0J,EAAID,EAAQxJ,UAAY0J,GAAK1J,UAC7B2J,EAAI/E,EAA2B6E,EAAGzH,GAEjCwE,MACJzC,GAAgBuF,EAASzG,aAAa,SAEvC+G,GAAoBD,EAAEE,WACe,SAAjCP,EAASzG,aAAa,SACzBiH,GAAY,GAEXC,GADGC,EACsBC,GAEAC,IAK5B,OAAQlI,IACP,IAAKC,IACL,IAAKC,IACJC,GAAMgI,IAAIb,EAAUC,EACpB,MACD,KAAKlH,IACCmE,IACJlE,GAAO8H,SAASC,GAAgBtG,IAE7BzB,GAAOgI,iBAAmBC,KAC7BjI,GAAO8H,SAASI,GAAmBZ,IACnCtH,GAAO8H,SAASK,GAAYX,IAC5BxH,GAAO8H,SAASM,GAAcX,IAC9BzH,GAAO8H,SAASO,GAAgBC,IAChCtI,GAAO8H,SAASS,GAAmBC,KAGhCxI,GAAOgI,iBAAmBC,IAC7BjI,GAAOyI,SAGRC,EAAU1B,EAAUhH,GAAOgI,eAAgBf,EAC3C,MACD,KAAK/G,IACJwI,EAAU1B,EAAU2B,GAAoB1B,EACxC,MACD,SACCyB,EAAU1B,EAAU2B,GAAoB1B,GAI1C,OAAO,EAGR,QAASyB,GAAU1B,EAAU4B,EAAW3B,GACvC,GAAI2B,IAAcX,IAAiB/G,GAAU,CAC5C,GAAI2H,GAAO7B,EAASzG,aAAa,QAC7BuI,EAAc3I,EAAgB0I,GAC9BE,EAAyC,SAAjC/B,EAASzG,aAAa,OAC9ByI,EAA4C,SAAnChC,EAASzG,aAAa,UAA0D,YAAnCyG,EAASzG,aAAa,SAC5E0I,EAAUjC,EAAS7C,qBAAqB,WAAW,EAMvD,IAJI+E,GACHA,EAAgBC,KAAKL,EAAc,MAAQzI,GAAYC,QAGpD8I,GAAoB,CACvB,GAAIC,GAAWP,EAAczI,GAAYC,MACrCgJ,OAAMD,KACTA,EAAU,GAEPA,EAAU,IACbA,EAAU,GAGXD,GAA6B,IAAVC,GAapB,GAREE,GAFEN,GAAuB,OAAZA,EACVxM,EAAIwB,eACYgL,EAAQO,KAER,GAAIC,gBAAgBC,kBAAkBT,GAGvC,GAGhBhC,EACHL,GAAc,GACdR,EAAa9G,IAAM,GACnBV,WAAW,WACVyH,EAAUI,SACR,KAEHxF,IAAiB,EACjBG,IAAqB,MACf,CACN,GAAI6D,EACAf,KACH0C,GAAc,GACd3B,EAAQmB,EACRhF,GAAqByC,EAAeM,qBAAqB,YAAY,GAAG5D,aAAa,UAAYsI,IAEjGjC,GAAc,GACd3B,EAAQoB,EACRjF,GAAqBf,GAAY,GAAGE,aAAa,UAAYsI,GAG9D5D,EAAM3F,IAAMuJ,EACZjK,WAAW,WACVqG,EAAMwB,SACJ,KAGFxF,IADIiD,KAAgB8E,GAAWW,IAAmBb,EAAc,IAC/C,GAEA,EAIf1H,GACHwI,KAEAC,KAGG5I,GACH6I,KAEAC,MAGGf,GAAUD,IACb7J,GAAG8K,eAEAtD,KACHA,KACAC,IAAY,GAGToC,IACHkB,KACAxN,EAAImC,WAAWY,EAAO,MAGnB0E,GACHG,EAAoB2C,EAEpBnD,EAAiBmD,MAGlBrG,IAAK,EAAMuJ,IAKb,QAASC,GAAQzJ,GAChB,GAAI0J,GAAWvJ,GAAIwJ,cAAc,QACjCD,GAASvI,GAAK,MACduI,EAAS9K,IAAM,gBACf8K,EAASE,QAAU,OACnBF,EAAShL,OAAS,EAClByB,GAAI0J,KAAKC,YAAYJ,GACrBtL,IAEI2L,GAAaC,QAChBxJ,IAAW,EACXP,GAAK,EAAO,kBAGT8J,GAAaE,OAChBjL,GAAoB,OACpBwB,IAAW,EACX0C,GAAkB6G,GAAaE,MAE5BjL,KAAsBkL,IAAaH,GAAaI,UAAYJ,GAAaK,QAC5EpL,GAAoBC,GACpBE,GAAMkL,WAAaN,GAAaK,MAAQ,cAAgBL,GAAaI,UAElEnL,KAAsBkL,IAAaH,GAAaI,UAAYJ,GAAaO,QAC5EtL,GAAoBE,GACpBC,GAAMkL,UAAYN,GAAaI,UAE5BnL,KAAsBkL,IAAiD,SAApC5K,GAAOiL,WAAWlL,MACxDL,GAAoBK,IAGrBY,GAAK,EAAOjB,GAAoB,YAEhC,IAAIwL,GAASrK,GAAIsK,cAAc,qBAC3BC,EAASvI,KAAKC,MAAOsE,GAAK1J,UAAY,MAAa0J,GAAKiE,oBAAsB,KAAQ,UAE1F,IAAIH,GAAUA,EAAO3K,aAAa,WAAa6K,EAC9CzK,GAAK,EAAM2K,QACL,CACN,GAAIC,GAAa,SACbd,IAAae,MAChBD,EAAad,GAAae,KAG3B7O,EAAM4O,GACL/N,OAAO,EACPL,KAAM,SAAUsO,GACf9G,EAAW8G,EAAIC,YACf5J,GAAoB6C,EAASR,qBAAqB,aAAa,GAAG5D,aAAa,UAC/E,IAAIiL,GAAM7G,EAASR,qBAAqB,OAAO,EAK/C,QAJIqH,EAAIjL,aAAa,mBACpBmH,EAA0B8D,EAAIjL,aAAa,kBAGpCb,IACP,IAAKC,IACL,IAAKC,IACJC,GAAM8L,KAAKjL,EACX,MACD,KAAKX,IACkC,kBAAlCC,GAAO4L,SAASxD,KACnBpI,GAAO8H,SAASM,GAAcyD,IAE/BpM,GAAkBO,GAAO4L,SAASE,IAClCC,GAAoB/L,GAAO4L,SAASI,IACpChK,GAAahC,GAAO4L,SAASK,IAC7BxK,GAAgBzB,GAAO4L,SAAS7D,IAChCO,GAAiBtI,GAAO4L,SAASvD,IACU,KAAvCrI,GAAO4L,SAASrD,MACnBC,GAAoB0D,KAAKC,MAAMnM,GAAO4L,SAASrD,MAGhD9H,EAAYC,EACZ,MACD,KAAKR,IACJ,KACD,SACCO,EAAYC,QASlB,QAASkB,KAIR,IAAK,GAHDwK,GAAezH,EAASR,qBAAqB,YAC7CkI,KAEKzO,EAAI,EAAGA,EAAIwO,EAAa9L,OAAQ1C,IAAK,CAC7C,GAAI0O,GAAOF,EAAaxO,EACxByO,GAAczO,IAAOiE,GAAMyK,EAAK/L,aAAa,MAAOgM,MAASD,EAAK/L,aAAa,UAGhF,MAAO8L,GAGR,QAASG,GAAeC,GAEvB5L,GAAI6L,eAAe,OAAOC,OAGzB7K,GADG2K,EACiBA,EAEA9H,EAASR,qBAAqB,aAAa,GAAG5D,aAAa,WAGhFwB,EAAaD,IAEb+B,EAAiBxD,GAAY,GAG9B,QAASuM,KAIR,GAFA/L,GAAI6L,eAAe,OAAOC,OAEtBlL,IAAmC,KAAlBA,GAGpB,IAAK,GAFDC,GAASD,GAAcE,MAAM,KAAK,GACrC9E,EAAUqC,GAAG0C,eACLhE,EAAI,EAAGA,EAAIf,EAAQyD,OAAQ1C,IAC/Bf,EAAQe,GAAGiE,KAAOH,IACrBI,GAAoBJ,EAKvBK,GAAaD,GAEb,IAAI+K,GAAcrM,EAAiBiB,GAE/BoL,KACHhJ,EAAiBgJ,GAKnB,QAASC,KAGR,IAAK,GAFDV,GAAezH,EAASR,qBAAqB,YAC7CpH,KACKa,EAAI,EAAGA,EAAIwO,EAAa9L,OAAQ1C,IAAK,CAC7C,GAAI0O,GAAOF,EAAaxO,EACxB,IAAI0O,EAAK/L,aAAa,QAAUuB,GAE/B,IAAK,GADDiL,GAAeT,EAAKU,WACfzN,EAAI,EAAGA,EAAIwN,EAAazM,OAAQf,IACpCwN,EAAaxN,GAAG0N,YACnBlQ,EAAKgQ,EAAaxN,GAAG2N,SAAWH,EAAaxN,GAAG0N,YAEhDlQ,EAAKgQ,EAAaxN,GAAG2N,SAAWH,EAAaxN,GAAG4N,WAAWC,UAK/D,MAAOrQ,GAGR,QAASsQ,GAAcxQ,GACtBA,EAAQyQ,eAAenE,KAAK,iJAE5BoE,EAAiB1Q,EAAQ2Q,UACzBpE,GAAqBvM,EAAQ4Q,eAC7BxD,GAAmBpN,EAAQ6Q,YAE3BxE,EAAkBrM,EAAQ8Q,WAC1BtH,EAAYxF,GAAI6L,eAAe,eAC/BtG,EAAevF,GAAI6L,eAAe,cAE9B7P,EAAQ+Q,YACX/Q,EAAQ+Q,WAAWzE,KAAKtI,GAAIiE,OAG7BR,EAAQT,GAGT,QAASgK,KAkBR,MAjBIC,KACCC,IACHA,KAEDD,IAAa,EACTE,GACHA,MAGGC,IACHA,KAEDH,IAAa,EACTI,GACHA,KAGKJ,GAGR,QAASK,GAAGtR,GAMX,MALAoR,IAAiBpR,EAAQuR,MACzBL,GAAgBlR,EAAQwR,KAExBJ,KAEOzR,KAAKqR,WAGb,QAASS,GAAKzR,GAMb,MALA0R,IAAc1R,EAAQ2R,KACtBC,GAAgB5R,EAAQ6R,OAExBD,KAEOjS,KAAKmS,WAGb,QAASA,KAkBR,MAjBIC,KACCH,IACHA,KAEDG,IAAW,EACPC,GACHA,MAGGN,IACHA,KAEDK,IAAW,EACPE,GACHA,KAGKF,GAGR,QAASG,GAAKlS,GAQb,MAPAkN,IAAqBlN,EAAQmS,UAC7BlF,GAAoBjN,EAAQoS,SAExBpS,EAAQqS,gBACXvF,GAAkB9M,EAAQqS,eAGpB/N,EAGR,QAASgO,GAAKtS,GAIb,MAHAuS,IAAevS,EAAQwS,MACvB3I,GAAc7J,EAAQ8P,KAEfnQ,KAAK8E,WAGb,QAASA,KACJqF,IACCD,IACHA,KAEDC,IAAY,EACR2I,GACHA,MAGGF,IACHA,KAEDzI,IAAY,EACR4I,GACHA,KAKH,QAASC,GAAS3S,GAIjB,MAHAgN,IAAyBhN,EAAQmS,UACjCpF,GAAwB/M,EAAQoS,SAEzB5N,EAGR,QAASoO,KACR,MAAOlO,GAIR,QAASmO,KACR,MAAO3D,IAGR,QAAS4D,GAAaC,GACrB,GAAIA,EAAQ,CACX,GAAI7S,IACH8S,SAAUD,EAAOC,SACjBC,WAAYjP,GAAIiE,MAChBiL,SAAUH,EAAOG,SACjBC,MAAOJ,EAAOI,MACdC,QAASL,EAAOK,QAChBC,aAAcC,OAAOC,OACrBC,YAAaF,OAAOG,MACpBC,QAAS,GACTC,UAAWZ,EAAOY,UAClBC,aAAcb,EAAOa,aACrBC,IAAKnK,SAASoK,KACdC,UAAWC,UAAUC,UAGlBlB,GAAOmB,YACVhU,EAAKwT,QAAU,YAEfxT,EAAKwT,QAAUxE,GAGhBpP,EAAM,6CACLI,KAAMA,EACNI,KAAM,WACLwD,GAAK,EAAO,gBAAkB5D,MAKjCoE,IAGD,QAAS6P,KACH9R,GAAGC,aACPL,IAGDF,WAAW,WACV,GAAIqS,GAAMpQ,GAAI6L,eAAe,MAC7BuE,GAAI7R,OAAS,EACb6R,EAAItE,OACAzN,GAAGC,aACN2K,KACA7I,IAAiB,GAEjBE,KAEC,KAGJ,QAAS6I,GAAWnN,GACnBiS,EAAiBjS,EAAQqU,UACzB3B,EAAkB1S,EAAQsU,WAC1B7B,EAAiBzS,EAAQuU,UACzBlD,EAAoBrR,EAAQwU,QAC5BrD,EAAmBnR,EAAQyU,OAC3BzC,EAAmBhS,EAAQ0U,YAEvB3C,IAAYE,GACfA,IAEGhB,IAAcI,GACjBA,IAEGX,GACHA,EAAehE,IAIjB,QAASiI,KACR,GAAIC,GAAU,CACVjJ,IAAkBkJ,WACrBD,EAAUjJ,GAAkBkJ,SAASpR,OAEtC,IAAIqR,GAAQF,EAAU1M,EAEtB,QACC2M,SAAUD,EACVG,OAAQD,GAASjK,EACjB2B,SAAkB,IAARsI,GAAaE,QAAQ,GAC/BC,MAAO/M,IAIT,QAASgN,KACR,GAAIrK,GAC0C,SAAzC7D,EAAetD,aAAa,SAAqB,CACpD,GAAIyR,GAAQ,EAMZ,IALIxJ,GAAkBkJ,SACrBM,EAAQxJ,GAAkBkJ,SAAS/L,QAAQ9B,EAAetD,aAAa,SAEvEiI,GAAkBkJ,YAEL,KAAVM,EAAc,CACjBxJ,GAAkBkJ,SAAS5T,KAAK+F,EAAetD,aAAa,QAE5D,IAAIkR,GAAU,CACVjJ,IAAkBkJ,WACrBD,EAAUjJ,GAAkBkJ,SAASpR,OAEtC,IAAIqR,GAAQF,EAAU1M,EAEtBuD,KAA0B,IAARqJ,GAAaE,QAAQ,IAK1C1Q,IAGD,QAAS8Q,KACR,GAAIC,GAAgBrO,EAAeM,qBAAqB,YAAY,EAEpE,IAAIuD,EAAyB,CAC5B,GAAIsK,GAAQ,EAIZ,IAHIxJ,GAAkBkJ,WACrBM,EAAQxJ,GAAkBkJ,SAAS/L,QAAQ9B,EAAetD,aAAa,UAEpEyR,EAAQ,GAAI,CACfxJ,GAAkBkJ,SAASS,OAAOH,EAAO,EAEzC,IAAIP,GAAU,CACVjJ,IAAkBkJ,WACrBD,EAAUjJ,GAAkBkJ,SAASpR,OAEtC,IAAIqR,GAAQF,EAAU1M,EAEtBuD,KAA0B,IAARqJ,GAAaE,QAAQ,GAGpCK,GACHhO,IAAc,EAEdI,EAAQ9D,EAAiB0R,EAAc3R,aAAa,WAEpDY,QAGG+Q,KACHhO,IAAc,EAEdI,EAAQ9D,EAAiB0R,EAAc3R,aAAa,WA50CvD,GA+CIsD,GACAQ,EAaAqD,EACA/C,EACAmK,EACAS,EACAD,EACApB,EACAF,EACAa,EAEA3F,EACA9C,EACAC,EACAkH,EACAgB,GACAxE,GACAD,GACAsF,GACA1I,GACAmD,GACAD,GACAR,GACAa,GACAgE,GACAF,GACAU,GArFA5N,GAAMpE,EAAIL,SACVqO,GAAehO,EAAIgO,iBAGnB9K,GAAY,OACZC,GAAa,aACbgL,GAAY,OACZ7K,GAAe,MACfwD,GAAiB,OACjBrD,GAAc,OACd0H,GAAiB,YACjBwK,GAAc,SACdvG,GAAkB,aAClBlE,GAAc,SACdgB,GAAqB,MACrBV,GAAgB,IAChBgE,GAAc,iBACd9D,GAAa,gBACbJ,GAAiB,2BACjBG,GAAoB,wBACpBG,GAAiB,qBACjBD,GAAe,yBACf0D,GAAkB,sBAClBE,GAAoB,wBACpBzD,GAAoB,mBACpB2B,GAA0B,iQAC1BpG,GAAoB,2CACpBlD,GAAsB,qNACtB0K,GAA4B,kIAC5BlE,GAAO,GAAI3J,MAGXgK,GAAyBoE,GAEzB7J,GAAa,GACbwF,GAAY,UAEZ/H,GAAkB,IAClBsM,GAAoB,mBACpBtK,GAAgB,GAEhB6G,GAAiB,GACjBhB,GAAoB,WAEpBkB,MACA9I,GAAoBkL,GACpBrB,GAAmB,GAGnBzH,GAAoB,GACpBuQ,IAAe,EACfnR,IAAW,EACXgD,IAAc,EACd0K,IAAW,EACX3N,IAAiB,EACjB0F,IAAY,EACZvF,IAAqB,EACrB0M,IAAa,EACbzN,MACAuD,GAAkB,EAClBmB,GAAiB,EASjB4E,IAAkB,EAmBlB9J,IACHkL,UAAW,wCACXuH,SAAU,MACVxS,KAAM,WACLnD,EAAMH,KAAKuO,WACVjO,OAAO,EACPC,MACCwV,QAAS,SACT/P,QAAShG,KAAK8V,SACdE,WAAY/H,GAAagI,aAI5B9G,KAAM,SAAUjL,GACf/D,EAAMH,KAAKuO,WACVhO,MACCwV,QAAS,WACT/P,QAAS3C,GAAMyS,SACfE,WAAY/H,GAAagI,UAE1BtV,KAAM,SAAUsO,GACf9K,GAAK,EAAO8K,EAAIiH,aAChB,IAAIC,GAAUzN,EAAUuG,EAAIiH,cAC3B/T,EAASgU,EAAQC,KAAKC,cAAc5M,aAYrC,IAVAxG,GAAkBkT,EAAQC,KAAKE,WAC/B/G,GAAoB4G,EAAQC,KAAKG,aACjCtR,GAAgBkR,EAAQC,KAAKI,gBAEzB,MAAMrR,MAAM,KAAKgE,QAAQhH,EAAOsU,MAAM,EAAG,IAAM,GAClDxL,GAAyBoE,IAEzBpE,GAAyB9I,EACzB0T,IAAe,GAEZ1T,EAAOgH,QAAQ,KAAO,GAAI,CAC7B,GAAIuN,GAAQvU,EAAOgD,MAAM,KAAK,EAEJ,OAAtBuR,EAAMD,MAAM,EAAG,KAClBjR,GAAa,cAEY,MAAtBkR,EAAMD,MAAM,EAAG,KAAgBxR,IAAmC,KAAlBA,MACnDO,GAAa,UAIf,GAAImR,GAAQR,EAAQC,KAAKO,MAAMxR,MAAM,IACrC2G,IAAiB6K,EAAM,GACnBR,EAAQS,aAAeT,EAAQS,YAAYC,eAC9C7K,GAAoB0D,KAAKC,MAAMwG,EAAQS,YAAYC,eAGpD5S,EAAYC,IAEbtD,KAAM,SAAUqO,GACI,MAAfA,EAAI9M,QACPgC,GAAK,EAAM2K,IAEZ7K,EAAYC,OAIfmH,IAAK,SAAUb,EAAUC,GACxB,GAAItI,GAAS8I,GACT6L,EAAQ,EAEPjB,MACA1T,IAAWiJ,IAAkBjJ,IAAWgJ,MAC3C0K,IAAe,EAEdiB,EADG9W,KAAKuO,UAAUpF,QAAQ,KAAO,GACzB,kBAEA,mBAKO,KAAd6B,KACH7I,EAASA,EAAS,IAAM6I,IAGzB7K,EAAMH,KAAKuO,UAAYuI,GACtBvW,MACCwV,QAAS,WACT/P,QAAShG,KAAK8V,SACdE,WAAY/H,GAAagI,SACzBc,UAAW,2BAA6B9R,GACxC,WAAa6G,GACb,mBAAqB3J,EACrB,UAAY2I,GACZ,mCAAqC4E,KAAKsH,UAAUhL,KAErDrL,KAAM,SAAUsO,GACf/C,EAAU1B,EAAUiB,GAAehB,GACnCtG,GAAK,EAAO8K,EAAIiH,eAEjBtV,KAAM,SAAUqO,GACI,MAAfA,EAAI9M,OACPgC,GAAK,EAAM2K,IAEX5C,EAAU1B,EAAU2B,GAAoB1B,QAMzCjH,IACHyT,KAAMlP,OACNmP,QAAS,SAAUrX,GAClB,GAAIsX,GAAU,KACVjU,MAAsB6D,KACzBoQ,EAAU,eAGXnX,KAAKiX,KAAOjX,KAAKoX,aAAavX,GAEzBG,KAAKiX,MAAqB,MAAZpX,EAAEwX,QAAoBxX,EAAEwX,QAAUxX,IACpDG,KAAKiX,KAAOjX,KAAKoX,aAAavX,EAAEwX,OAAQF,IAGpCnX,KAAKiX,MAAqB,MAAZpX,EAAEyX,SACpBtX,KAAKiX,KAAOjX,KAAKoX,aAAavX,EAAEyX,OAAQH,KAG1CC,aAAc,SAAUvX,EAAGsX,GAE1B,IADA,GAAII,GAAQ,GACJ1X,EAAEsX,IAAyB,MAAZtX,EAAEwX,QAAoBxX,EAAEwX,QAAUxX,GAAI,CAE5D,GADA0X,IACIA,EAAQ,GACX,MAED1X,GAAIA,EAAEwX,OAGP,MAAOxX,GAAEsX,IAEVlL,OAAQ,WACP,GAAIuL,GAAS,OASb,OARIxX,MAAKiX,OAEPO,EADGtU,KAAsB6D,GAChB/G,KAAKiX,KAAKhL,OAAO,IAEjBjM,KAAKiX,KAAKQ,UAAU,KAIxBD,EAAOzM,YAEfS,aAAc,WACb,GAAIkM,GAAU,GASd,OARI1X,MAAKiX,OAEPS,EADGxU,KAAsB6D,GACf/G,KAAKiX,KAAKzL,eAEVxL,KAAKiX,KAAKU,mBAIfD,EAAQ3M,YAEhBqE,SAAU,SAAUwI,GACnB,GAAIJ,GAAS,GACTE,EAAUvL,EACd,IAAInM,KAAKiX,KAAM,CACd,GAAI/T,KAAsB6D,GAAgB,CAEzC,OAAQ6Q,GACP,IAAKhM,IACJgM,EAAU,uBACV,MACD,KAAKnI,IACJmI,EAAU,WACV,MACD,KAAKlM,IACJkM,EAAU,kBACV,MACD,KAAK,sBACJA,EAAU,gBACV,MACD,KAAKrM,IACJqM,EAAU,cACV,MACD,KAAKpI,IACJoI,EAAU,kBACV,MACD,KAAKtI,IACJsI,EAAU,gBACV,MACD,KAAK,mCACJA,EAAU,kCACV,MACD,KAAK,kCACJA,EAAU,iCACV,MACD,KAAK,2BACJA,EAAU,qBACV,MACD,KAAK/L,IACJ+L,EAAU,eACV,MACD,KAAK,qBACJA,EAAU,eACV,MACD,KAAK,qBACJA,EAAU,gBAIZJ,EAASxX,KAAKiX,KAAK7H,SAASwI,GAC5BF,EAAU1X,KAAKiX,KAAKzL,eAAeT,eAEnCyM,GAASxX,KAAKiX,KAAKY,YAAYD,GAC/BF,EAAU1X,KAAKiX,KAAKU,kBAAkB5M,UAEnC2M,KAAYjM,KACf+L,EAAS,IAIX,MAAOA,GAAOzM,YAEf0D,WAAY,SAAUqJ,GACrB,GAAIN,GAAS,OAYb,OAVAxX,MAAKkX,QAAQjX,GAETD,KAAKiX,OAEPO,EADGM,IAAkB/Q,GACZ/G,KAAKiX,KAAKxI,WAAW,IAErBzO,KAAKiX,KAAKc,cAAc,KAI5BP,EAAOzM,YAEfO,SAAU,SAAUsM,EAAS5O,GAC5B,GAAIhJ,KAAKiX,KACR,GAAI/T,KAAsB6D,GAAgB,CAEzC,OAAQ6Q,GACP,IAAKhM,KACC5C,IAAUmC,IAAiBnC,IAAU4M,MACzCgC,EAAU,uBAEN5O,IAAUoC,IAAoBpC,IAAUqG,MAC5CuI,EAAU,wBAGX,MAED,KAAKlM,IACJkM,EAAU,kBACV,MACD,KAAKrM,IACJqM,EAAU,cACV,MACD,KAAKjM,IACJiM,EAAU,UACV,MACD,KAAK/L,IACJ+L,EAAU,gBACV5X,KAAKiX,KAAK3L,SAAS,mBAAqBtC,EAAQ,KAIlDhJ,KAAKiX,KAAK3L,SAASsM,EAAS5O,OAExB4O,KAAY7L,KACf/C,EAAQ0G,KAAKsH,UAAUhO,IAExBhJ,KAAKiX,KAAKe,YAAYJ,EAAS5O,IAMlCvF,UAAW,WACV,GAAI+T,GAAS,OASb,OARIxX,MAAKiX,OAEPO,EADGtU,KAAsB6D,GAChB/G,KAAKiX,KAAKxT,UAAU,IAEpBzD,KAAKiX,KAAKgB,UAAU,KAIxBT,EAAOzM,aAIZrI,IACHiL,QAASA,EACTvI,aAAcA,EACd4K,eAAgBA,EAChBI,OAAQA,EACRE,mBAAoBA,EACpBO,cAAeA,EACfQ,WAAYA,EACZM,GAAIA,EACJG,KAAMA,EACNK,WAAYA,EACZI,KAAMA,EACNI,KAAMA,EACN7N,WAAYA,EACZkO,SAAUA,EACVC,OAAQA,EACRC,eAAgBA,EAChBC,aAAcA,EACdqB,SAAUA,EACVhH,WAAYA,EACZwH,aAAcA,EACdO,YAAaA,EACbE,cAAeA,EACf9S,aAAa,EACbqD,QAAS,MAiBV,OAbsB,kBAAXkS,SAAyBA,OAAOC,KAC1CD,OAAO,QAAU,WAChB,MAAOxV,MAKQqF,SAAb7H,IACHD,EAAIyC,GAAKzC,EAAImY,GAAK1V,IAGnByB,GAAK,EAAO,OAASzB,GAAGsD,QAAU,WAE3BtD","file":"ss.3.0.js","sourcesContent":["// Checking if this class is being called from another module\r\n(function (global, factory) {\r\n\tif (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n\t\tmodule.exports = global.document ?\r\n\t\t\tfactory(global, true) :\r\n\t\t\tfunction (w) {\r\n\t\t\t\tif (!w.document) {\r\n\t\t\t\t\tthrow new Error(\"SS requires a window with a document\");\r\n\t\t\t\t}\r\n\t\t\t\treturn factory(w);\r\n\t\t\t};\r\n\t} else {\r\n\t\tfactory(global);\r\n\t}\r\n}(typeof window !== \"undefined\" ? window : this, function (win, noGlobal) { // Main constructor\r\n\tvar doc = win.document;\r\n\tvar querystrings = win.querystrings || {};\r\n\r\n\t// Contstants\r\n\tvar $API_Aicc = 'aicc';\r\n\tvar $API_Local = 'aicc-local';\r\n\tvar $API_None = 'none';\r\n\tvar $API_Scorm12 = '1.2';\r\n\tvar $API_Scorm2004 = '2004';\r\n\tvar $API_TinCan = 'xapi';\r\n\tvar $CMI_Completed = 'completed';\r\n\tvar $CMI_Failed = 'failed';\r\n\tvar $CMI_Incomplete = 'incomplete';\r\n\tvar $CMI_Passed = 'passed';\r\n\tvar $CODE_GeneralError = '100';\r\n\tvar $CODE_NoError = '0';\r\n\tvar $CORE_Entry = 'cmi.core.entry';\r\n\tvar $CORE_Exit = 'cmi.core.exit';\r\n\tvar $CORE_Location = 'cmi.core.lesson_location';\r\n\tvar $CORE_SessionTime = 'cmi.core.session_time';\r\n\tvar $CORE_ScoreRaw = 'cmi.core.score.raw';\r\n\tvar $CORE_Status = 'cmi.core.lesson_status';\r\n\tvar $CORE_StudentId = 'cmi.core.student_id';\r\n\tvar $CORE_StudentName = 'cmi.core.student_name';\r\n\tvar $CORE_SuspendData = 'cmi.suspend_data';\r\n\tvar $ERR_CommunicationIssue = 'An error occurred with the action you performed, if you continue to get this message please close and restart the course. \\n\\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.';\r\n\tvar $ERR_DemoExceeded = 'Thank you for watching this course demo!';\r\n\tvar $ERR_NotInitialized = 'This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \\n\\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.';\r\n\tvar $ERR_SubscriptionInactive = 'Sorry this subscription is no longer active. Please contact your supervisor or SafetySkills support at support@safetyskills.com';\r\n\tvar $NOW = new Date();\r\n\r\n\t// Fields\r\n\tvar _cmi_completion_status = $CMI_Incomplete;\r\n\t//var _cmi_credit = 'credit';\r\n\tvar _cmi_entry = '';\r\n\tvar _cmi_exit = 'suspend';\r\n\t//var _cmi_launch_data = '';\r\n\tvar _cmi_learner_id = '~';\r\n\tvar _cmi_learner_name = 'Example, Anne E.';\r\n\tvar _cmi_location = '';\r\n\t//var _cmi_mode = 'normal';\r\n\tvar _cmi_score_raw = '';\r\n\tvar _cmi_session_time = '00:00:00';\r\n\t//var _cmi_success_status = 'unknown';\r\n\tvar _cmi_suspend_data = {};\r\n\tvar _cmiCommunication = $API_None;\r\n\tvar _current_bullets = '';\r\n\tvar _current_frame;\r\n\tvar _current_kickback;\r\n\tvar _current_language = '';\r\n\tvar _isCompleted = false;\r\n\tvar _isDebug = false;\r\n\tvar _isKickback = false;\r\n\tvar _isMuted = false;\r\n\tvar _isNextEnabled = false;\r\n\tvar _isPaused = false;\r\n\tvar _isPreviousEnabled = false;\r\n\tvar _isSubsOff = true;\r\n\tvar _sco_frames = [];\r\n\tvar _sco_frameLimit = 0;\r\n\tvar _sco_quizTotal = 0;\r\n\tvar _sco_scaledPassingScore;\r\n\tvar _sco_XML;\r\n\tvar _slide_on_mute;\r\n\tvar _slide_on_pause;\r\n\tvar _slide_on_play;\r\n\tvar _slide_on_subsOff;\r\n\tvar _slide_on_subsOn;\r\n\tvar _slide_on_unMute;\r\n\tvar _ui_disableNext = false;\r\n\tvar _ui_frameNumber;\r\n\tvar _ui_kickback;\r\n\tvar _ui_slide;\r\n\tvar _ui_on_animate;\r\n\tvar _ui_on_mute;\r\n\tvar _ui_on_nextDisable;\r\n\tvar _ui_on_nextEnable;\r\n\tvar _ui_on_pause;\r\n\tvar _ui_on_play;\r\n\tvar _ui_on_previousDisable;\r\n\tvar _ui_on_previousEnable;\r\n\tvar _ui_on_progressBar;\r\n\tvar _ui_on_scoFinish;\r\n\tvar _ui_on_subsOff;\r\n\tvar _ui_on_subsOn;\r\n\tvar _ui_on_unMute;\r\n\r\n\t// Communication Helpers\r\n\tvar _aicc = {\r\n\t\t_relayUrl: 'https://scorm.safetyskills.com/relay/',\r\n\t\t_version: '4.0',\r\n\t\tExit: function () {\r\n\t\t\t_ajax(this._relayUrl, {\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'ExitAU',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tInit: function (callback) {\r\n\t\t\t_ajax(this._relayUrl, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'GetParam',\r\n\t\t\t\t\tversion: _aicc._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t\tvar scoData = _parseIni(xhr.responseText),\r\n\t\t\t\t\t\tstatus = scoData.core.lesson_status.toLowerCase();\r\n\r\n\t\t\t\t\t_cmi_learner_id = scoData.core.student_id;\r\n\t\t\t\t\t_cmi_learner_name = scoData.core.student_name;\r\n\t\t\t\t\t_cmi_location = scoData.core.lesson_location;\r\n\r\n\t\t\t\t\tif ('n;i'.split(';').indexOf(status.slice(0, 1)) > -1) {\r\n\t\t\t\t\t\t_cmi_completion_status = $CMI_Incomplete;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_cmi_completion_status = status;\r\n\t\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (status.indexOf(',') > -1) {\r\n\t\t\t\t\t\tvar entry = status.split(',')[1];\r\n\r\n\t\t\t\t\t\tif (entry.slice(0, 1) === 'a') {\r\n\t\t\t\t\t\t\t_cmi_entry = 'ab-initio';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (entry.slice(0, 1) === 'r' || (!_cmi_location && _cmi_location !== '')) { // HACK: for systems that are using SCORMEngine to support the AICC HACP standard, there should never be a case that a location is stored but the LMS returns 'ab-inito'\r\n\t\t\t\t\t\t\t_cmi_entry = 'resume';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar score = scoData.core.score.split(',');\r\n\t\t\t\t\t_cmi_score_raw = score[0];\r\n\t\t\t\t\tif (scoData.core_lesson && scoData.core_lesson.suspend_data) {\r\n\t\t\t\t\t\t_cmi_suspend_data = JSON.parse(scoData.core_lesson.suspend_data);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tPut: function (scoFrame, quizReturn) {\r\n\t\t\tvar status = _cmi_completion_status;\r\n\t\t\tvar query = '';\r\n\r\n\t\t\tif (!_isCompleted) {\r\n\t\t\t\tif (status === $CMI_Completed || status === $CMI_Passed) {\r\n\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\tif (this._relayUrl.indexOf('?') > -1) {\r\n\t\t\t\t\t\tquery = '&completed=true';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquery = '?completed=true';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_cmi_exit !== '') {\r\n\t\t\t\tstatus = status + ',' + _cmi_exit;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(this._relayUrl + query, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'PutParam',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid,\r\n\t\t\t\t\taicc_data: '[CORE]\\nlesson_location=' + _cmi_location +\r\n\t\t\t\t\t'\\nscore=' + _cmi_score_raw +\r\n\t\t\t\t\t'\\nlesson_status=' + status +\r\n\t\t\t\t\t'\\ntime=' + _cmi_session_time +\r\n\t\t\t\t\t'\\n[CORE_LESSON]\\r\\nsuspend_data=' + JSON.stringify(_cmi_suspend_data)\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_updateUI(scoFrame, $CODE_NoError, quizReturn);\r\n\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_updateUI(scoFrame, $CODE_GeneralError, quizReturn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tvar _scorm = {\r\n\t\t_api: undefined,\r\n\t\t_getApi: function (w) {\r\n\t\t\tvar apiName = 'API';\r\n\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\tapiName = 'API_1484_11';\r\n\t\t\t}\r\n\r\n\t\t\tthis._api = this._scanParents(w);\r\n\r\n\t\t\tif (!this._api && (w.parent != null) && (w.parent != w)) {\r\n\t\t\t\tthis._api = this._scanParents(w.parent, apiName);\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._api && (w.opener != null)) {\r\n\t\t\t\tthis._api = this._scanParents(w.opener, apiName);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scanParents: function (w, apiName) {\r\n\t\t\tvar tries = 0;\r\n\t\t\twhile (!w[apiName] && (w.parent != null) && (w.parent != w)) {\r\n\t\t\t\ttries++;\r\n\t\t\t\tif (tries > 10) {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tw = w.parent;\r\n\t\t\t}\r\n\r\n\t\t\treturn w[apiName];\r\n\t\t},\r\n\t\tCommit: function () {\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Commit('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSCommit('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tGetLastError: function () {\r\n\t\t\tvar errCode = 100;\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\terrCode = this._api.GetLastError();\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn errCode.toString();\r\n\t\t},\r\n\t\tGetValue: function (element) {\r\n\t\t\tvar result = '';\r\n\t\t\tvar errCode = $CODE_GeneralError;\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status: //there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Entry:\r\n\t\t\t\t\t\t\telement = 'cmi.entry';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.total_time':\r\n\t\t\t\t\t\t\telement = 'cmi.total_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_StudentName:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_name';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_StudentId:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_id';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference._children':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference.language':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference.language';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score._children':\r\n\t\t\t\t\t\t\telement = 'cmi.score._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.min':\r\n\t\t\t\t\t\t\telement = 'cmi.score.min';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.max':\r\n\t\t\t\t\t\t\telement = 'cmi.score.max';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = this._api.GetValue(element);\r\n\t\t\t\t\terrCode = this._api.GetLastError().toString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSGetValue(element);\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError().toString();\r\n\t\t\t\t}\r\n\t\t\t\tif (errCode !== $CODE_NoError) {\r\n\t\t\t\t\tresult = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tInitialize: function (communication) {\r\n\t\t\tvar result = 'false';\r\n\r\n\t\t\tthis._getApi(win);\r\n\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (communication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Initialize('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSInitialize('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tSetValue: function (element, value) {\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status://there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\tif ((value === $CMI_Passed) || (value === $CMI_Failed)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.success_status';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((value === $CMI_Completed) || (value === $CMI_Incomplete)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Exit:\r\n\t\t\t\t\t\t\telement = 'cmi.exit';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tthis._api.SetValue('cmi.score.scaled', (value / 100));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._api.SetValue(element, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (element === $CORE_SuspendData) {\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._api.LMSSetValue(element, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t},\r\n\t\tTerminate: function () {\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Terminate('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSFinish('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t}\r\n\t};\r\n\r\n\tvar SS = {\r\n\t\tInitSco: InitSco,\r\n\t\tGetLanguages: GetLanguages,\r\n\t\tSelectLanguage: SelectLanguage,\r\n\t\tResume: Resume,\r\n\t\tGetLocalizedValues: GetLocalizedValues,\r\n\t\tInitInterface: InitInterface,\r\n\t\tSubsToggle: SubsToggle,\r\n\t\tCC: CC,\r\n\t\tMute: Mute,\r\n\t\tMuteToggle: MuteToggle,\r\n\t\tNext: Next,\r\n\t\tPlay: Play,\r\n\t\tPlayToggle: PlayToggle,\r\n\t\tPrevious: Previous,\r\n\t\tReplay: Replay,\r\n\t\tGetStudentName: GetStudentName,\r\n\t\tSubmitSurvey: SubmitSurvey,\r\n\t\tSlideEnd: SlideEnd,\r\n\t\tSlideStart: SlideStart,\r\n\t\tScoreResults: ScoreResults,\r\n\t\tQuizCorrect: QuizCorrect,\r\n\t\tQuizIncorrect: QuizIncorrect,\r\n\t\tHasAutoPlay: false,\r\n\t\tversion: '3.0'\r\n\t};\r\n\r\n\t// Defining the object as a AMD module\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('ss', [], function () {\r\n\t\t\treturn SS;\r\n\t\t});\r\n\t}\r\n\r\n\t// Using flag to conditionally not set the window reference to the object\r\n\tif (noGlobal === undefined) {\r\n\t\twin.SS = win.NS = SS;\r\n\t}\r\n\r\n\t_log(false, 'SS v' + SS.version + ' Loaded');\r\n\r\n\treturn SS;\r\n\r\n\t// Private functions\r\n\tfunction _ajax(url, options) {\r\n\t\tvar async = true;\r\n\t\tvar data = '';\r\n\t\tvar ie9 = !win.requestAnimationFrame;\r\n\t\tvar methods = {\r\n\t\t\tdone: function () { },\r\n\t\t\tfail: function () { }\r\n\t\t};\r\n\t\tvar type = 'POST';\r\n\t\tvar XHR = new XMLHttpRequest();\r\n\r\n\t\tif (options) {\r\n\t\t\tif (options.async === false) {\r\n\t\t\t\tasync = false;\r\n\t\t\t}\r\n\t\t\tif (options.cache === false) {\r\n\t\t\t\ttype = 'GET';\r\n\t\t\t\turl = url + '?_=' + new Date().getTime();\r\n\t\t\t}\r\n\t\t\tif (options.data) {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor (var i in options.data) {\r\n\t\t\t\t\tif (options.data.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tparts.push(encodeURIComponent(i) + '=' + encodeURIComponent(options.data[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdata = parts.join('&');\r\n\t\t\t}\r\n\t\t\tif (options.done) {\r\n\t\t\t\tmethods.done = options.done;\r\n\t\t\t}\r\n\t\t\tif (options.fail) {\r\n\t\t\t\tmethods.fail = options.fail;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (type === 'POST' && ie9) {\r\n\t\t\tXHR = new win.XDomainRequest();\r\n\t\t\tXHR.onload = function () {\r\n\t\t\t\tmethods.done.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onerror = function () {\r\n\t\t\t\tmethods.fail.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onprogress = function () { };\r\n\t\t\tXHR.ontimeout = function () { };\r\n\t\t}\r\n\t\tXHR.open(type, url, async);\r\n\t\tif (XHR.setRequestHeader) {\r\n\t\t\tXHR.setRequestHeader('content-type', 'application/x-www-form-urlencoded; charset=utf-8');\r\n\t\t\tXHR.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4) {\r\n\t\t\t\t\tif (this.status === 200) {\r\n\t\t\t\t\t\tmethods.done.call(methods, this);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmethods.fail.call(methods, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tsetTimeout(function () {\r\n\t\t\tXHR.send(data);\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tfunction _checkAutoPlay() { // Test for autoplay to determine if this is a mobile device\r\n\t\ttry {\r\n\t\t\tvar audio = new Audio();\r\n\t\t\t// this will only be triggered if autoplay works\r\n\t\t\taudio.addEventListener('play', function () {\r\n\t\t\t\tSS.HasAutoPlay = true;\r\n\t\t\t}, false);\r\n\t\t\taudio.volume = 0;\r\n\t\t\taudio.autoplay = true;\r\n\r\n\t\t\taudio.src = 'end-sound.mp3';\r\n\t\t} catch (e) { }\r\n\t}\r\n\r\n\tfunction _exit() {\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\t// Default to prevent sending more data\r\n\t\t\t_cmi_learner_id = '~';\r\n\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase $API_Aicc:\r\n\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t_aicc.Exit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t_scorm.Terminate();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getFrameNumber(fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getMatchedFrame(fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn _sco_frames[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _sco_frames[0];\r\n\t}\r\n\r\n\tfunction _initFinish(callback) {\r\n\t\tif (_cmi_learner_id === '~') {\r\n\t\t\t_log(true, $ERR_NotInitialized);\r\n\t\t}\r\n\t\t// Set events and keybinds\r\n\t\twin.addEventListener('beforeunload', _exit);\r\n\r\n\t\tdoc.onkeydown = function (e) {\r\n\t\t\tvar keyPressed = false;\r\n\t\t\tif (e.which === 33) {\r\n\t\t\t\tif (_isNextEnabled || _isDebug) { // PageUp\r\n\t\t\t\t\t_next();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 34) { // PageDown\r\n\t\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t\t_previous();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 106) { // *\r\n\t\t\t\tSS.PlayToggle();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}\r\n\t\t\tif (e.which === 36) { // Home\r\n\t\t\t\t_replay();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}\r\n\t\t\tif (!_isDebug) {\r\n\t\t\t\tif (e.which === 119) { // F8\r\n\t\t\t\t\t_isDebug = true;\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t\t_log(false, 'Debug enabled');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (keyPressed) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Select language if location was stored\r\n\t\tif (_cmi_location && _cmi_location !== '') {\r\n\t\t\tvar folder = _cmi_location.split('/')[0];\r\n\t\t\tvar options = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current_language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\tcallback(_cmi_entry === 'resume');\r\n\t}\r\n\r\n\tfunction _log(showUser, message) {\r\n\t\tif (showUser) {\r\n\t\t\tif (_isDebug) {\r\n\t\t\t\twin.console.log(message);\r\n\t\t\t} else {\r\n\t\t\t\talert(message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (win.console && win.console.log) {\r\n\t\t\t\twin.console.log(message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _millisecondsToCMIDuration(timeDifference, version) {\r\n\t\t//Convert duration from milliseconds to 0000:00:00.00 format\r\n\t\tvar dtm = new Date();\r\n\t\tdtm.setTime(timeDifference);\r\n\t\tvar hms = '';\r\n\t\tvar h = '000' + Math.floor(timeDifference / 3600000);\r\n\t\tvar m = '0' + dtm.getMinutes();\r\n\t\tvar s = '0' + dtm.getSeconds();\r\n\t\tvar cs = '0' + Math.round(dtm.getMilliseconds() / 10);\r\n\t\thms = h.substr(h.length - 4) + ':' + m.substr(m.length - 2) + ':';\r\n\t\thms += s.substr(s.length - 2) + '.' + cs.substr(cs.length - 2);\r\n\r\n\t\tif (version === $API_Scorm2004) {\r\n\t\t\t//then convert hms to a timeinterval format\r\n\t\t\t//P[yY][mM][dD][T[hH][mM][s[.s]S]\r\n\t\t\t//example: PT1H5M (1 hour 5 miutes)\r\n\t\t\tvar aryPieces = hms.split(':');\r\n\t\t\tvar strHour = aryPieces[0];\r\n\t\t\tvar strMin = aryPieces[1];\r\n\t\t\tvar strSec = aryPieces[2];\r\n\r\n\t\t\thms = 'PT' + strHour + 'H' + strMin + 'M' + strSec + 'S';\r\n\t\t}\r\n\r\n\t\treturn hms;\r\n\t}\r\n\r\n\tfunction _next() {\r\n\t\tif (_sco_frameLimit && _sco_frameLimit < _getFrameNumber(_current_frame.getAttribute('file'))) {\r\n\t\t\talert($ERR_DemoExceeded);\r\n\t\t} else {\r\n\t\t\tvar nextFileName;\r\n\t\t\tvar found = false;\r\n\t\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames;\r\n\t\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file');\r\n\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tnextFileName = fileName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (currentFileName === fileName) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (found && nextFileName) {\r\n\t\t\t\t_update(_getMatchedFrame(nextFileName));\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_isKickback = false;\r\n\t\t\t\t\t_current_kickback = undefined;\r\n\t\t\t\t\t_update(_current_frame, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _parseFrames(currentLanguage) {\r\n\t\tvar topics = _sco_XML.getElementsByTagName('topics');\r\n\t\tvar selectedTopics;\r\n\r\n\t\tfor (var t = 0; t < topics.length; t++) {\r\n\t\t\tvar topic = topics[t];\r\n\t\t\tif (topic.getAttribute('lang') === currentLanguage) {\r\n\t\t\t\tselectedTopics = topic;\r\n\t\t\t\tdoc.title = selectedTopics.getAttribute('title');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_sco_frames = selectedTopics.getElementsByTagName('page');\r\n\r\n\t\t// Getting quiz count\r\n\t\t_sco_quizTotal = 0;\r\n\t\tfor (var f = 0; f < _sco_frames.length; f++) {\r\n\t\t\tvar frame = _sco_frames[f];\r\n\t\t\tif (frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\t_sco_quizTotal++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _parseIni(string) {\r\n\t\tvar regex = {\r\n\t\t\tsection: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\r\n\t\t\tparam: /^\\s*([\\w\\.\\-\\_]+)\\s*=\\s*(.*?)\\s*$/,\r\n\t\t\tcomment: /^\\s*;.*$/\r\n\t\t};\r\n\t\tvar value = {};\r\n\t\t// Pulling just ini data\r\n\t\tvar lines = string.substring(string.indexOf('[')).split(/\\n|\\r\\n/g);\r\n\t\tvar section = null;\r\n\t\tlines.forEach(function (line) {\r\n\t\t\tif (regex.comment.test(line)) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if (regex.param.test(line)) {\r\n\t\t\t\tvar pMatch = line.match(regex.param);\r\n\t\t\t\tif (section) {\r\n\t\t\t\t\tvalue[section.toLowerCase()][pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue[pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t}\r\n\t\t\t} else if (regex.section.test(line)) {\r\n\t\t\t\tvar sMatch = line.match(regex.section);\r\n\t\t\t\tvalue[sMatch[1].toLowerCase()] = {};\r\n\t\t\t\tsection = sMatch[1].toLowerCase();\r\n\t\t\t} else if (line.length === 0 && section) {\r\n\t\t\t\tsection = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction _previous() {\r\n\t\tvar previousFileName;\r\n\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames;\r\n\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file');\r\n\r\n\t\tif (frames[0].getAttribute('file') !== currentFileName) {\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (previousFileName && currentFileName === fileName) { break; }\r\n\t\t\t\tpreviousFileName = fileName;\r\n\t\t\t}\r\n\r\n\t\t\t_update(_getMatchedFrame(previousFileName));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _replay() {\r\n\t\tvar frame;\r\n\t\tif (_isKickback) {\r\n\t\t\tframe = _ui_kickback;\r\n\t\t} else {\r\n\t\t\tframe = _ui_slide;\r\n\t\t}\r\n\r\n\t\tframe.contentWindow.location.reload(true);\r\n\t\tsetTimeout(function () {\r\n\t\t\tframe.focus();\r\n\t\t}, 1000);\r\n\r\n\t\tif (_ui_on_play) {\r\n\t\t\t_ui_on_play();\r\n\t\t\t_isPaused = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _toggleFrames(presentorOnTop) {\r\n\t\tif (presentorOnTop) {\r\n\t\t\t_ui_kickback.setAttribute(\"hidden\", \"hidden\");\r\n\t\t\t_ui_slide.removeAttribute(\"hidden\");\r\n\t\t} else {\r\n\t\t\t_ui_slide.setAttribute(\"hidden\", \"hidden\");\r\n\t\t\t_ui_kickback.removeAttribute(\"hidden\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _update(scoFrame, quizReturn) {\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\tvar timeNow = new Date();\r\n\t\t\tvar n = timeNow.getTime() - $NOW.getTime();\r\n\t\t\tvar v = _millisecondsToCMIDuration(n, _cmiCommunication);\r\n\r\n\t\t\tif (!_isKickback) {\r\n\t\t\t\t_cmi_location = scoFrame.getAttribute('file');\r\n\t\t\t}\r\n\t\t\t_cmi_session_time = v.toString();\r\n\t\t\tif (scoFrame.getAttribute('end') === 'true') {\r\n\t\t\t\t_cmi_exit = '';\r\n\t\t\t\tif (_sco_scaledPassingScore) {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Passed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Completed;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (_cmiCommunication) {\r\n\t\t\tcase $API_Aicc:\r\n\t\t\tcase $API_Local:\r\n\t\t\t\t_aicc.Put(scoFrame, quizReturn);\r\n\t\t\t\tbreak;\r\n\t\t\tcase $API_Scorm12:\r\n\t\t\t\tif (!_isKickback) {\r\n\t\t\t\t\t_scorm.SetValue($CORE_Location, _cmi_location);\r\n\t\t\t\t}\r\n\t\t\t\tif (_scorm.GetLastError() === $CODE_NoError) {\r\n\t\t\t\t\t_scorm.SetValue($CORE_SessionTime, _cmi_session_time);\r\n\t\t\t\t\t_scorm.SetValue($CORE_Exit, _cmi_exit);\r\n\t\t\t\t\t_scorm.SetValue($CORE_Status, _cmi_completion_status);\r\n\t\t\t\t\t_scorm.SetValue($CORE_ScoreRaw, _cmi_score_raw);\r\n\t\t\t\t\t_scorm.SetValue($CORE_SuspendData, _cmi_suspend_data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_scorm.GetLastError() === $CODE_NoError) {\r\n\t\t\t\t\t_scorm.Commit();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_updateUI(scoFrame, _scorm.GetLastError(), quizReturn);\r\n\t\t\t\tbreak;\r\n\t\t\tcase $API_TinCan:\r\n\t\t\t\t_updateUI(scoFrame, $CODE_GeneralError, quizReturn);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t_updateUI(scoFrame, $CODE_GeneralError, quizReturn);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction _updateUI(scoFrame, errorCode, quizReturn) {\r\n\t\tif (errorCode === $CODE_NoError || _isDebug) {\r\n\t\t\tvar file = scoFrame.getAttribute('file');\r\n\t\t\tvar frameNumber = _getFrameNumber(file);\r\n\t\t\tvar isEnd = scoFrame.getAttribute('end') === 'true';\r\n\t\t\tvar isQuiz = scoFrame.getAttribute('pType') === 'quiz' || scoFrame.getAttribute('pType') === 'summary';\r\n\t\t\tvar bullets = scoFrame.getElementsByTagName('bullets')[0];\r\n\r\n\t\t\tif (_ui_frameNumber) {\r\n\t\t\t\t_ui_frameNumber.html(frameNumber + ' / ' + _sco_frames.length);\r\n\t\t\t}\r\n\r\n\t\t\tif (_ui_on_progressBar) {\r\n\t\t\t\tvar percent = (frameNumber / _sco_frames.length);\r\n\t\t\t\tif (isNaN(percent)) {\r\n\t\t\t\t\tpercent = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (percent > 1) {\r\n\t\t\t\t\tpercent = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_ui_on_progressBar(percent * 100);\r\n\t\t\t}\r\n\r\n\t\t\tif (bullets && bullets !== null) {\r\n\t\t\t\tif (win.XDomainRequest) {\r\n\t\t\t\t\t_current_bullets = bullets.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current_bullets = new XMLSerializer().serializeToString(bullets);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_current_bullets = '';\r\n\t\t\t}\r\n\r\n\t\t\tif (quizReturn) {\r\n\t\t\t\t_toggleFrames(true);\r\n\t\t\t\t_ui_kickback.src = '';\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t_ui_slide.focus();\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t_isNextEnabled = false;\r\n\t\t\t\t_isPreviousEnabled = true;\r\n\t\t\t} else {\r\n\t\t\t\tvar frame;\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_toggleFrames(false);\r\n\t\t\t\t\tframe = _ui_kickback;\r\n\t\t\t\t\t_isPreviousEnabled = _current_frame.getElementsByTagName('kickback')[0].getAttribute('file') !== file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_toggleFrames(true);\r\n\t\t\t\t\tframe = _ui_slide;\r\n\t\t\t\t\t_isPreviousEnabled = _sco_frames[0].getAttribute('file') !== file;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tframe.src = file;\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tframe.focus();\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t\tif (!_isKickback && (isQuiz || (_ui_disableNext && frameNumber > 1))) {\r\n\t\t\t\t\t_isNextEnabled = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_isNextEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t_ui_on_previousEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_ui_on_previousDisable();\r\n\t\t\t}\r\n\r\n\t\t\tif (_isNextEnabled) {\r\n\t\t\t\t_ui_on_nextEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_ui_on_nextDisable();\r\n\t\t\t}\r\n\r\n\t\t\tif (isQuiz || isEnd) {\r\n\t\t\t\tSS.SlideStart({});\r\n\t\t\t}\r\n\t\t\tif (_ui_on_play) {\r\n\t\t\t\t_ui_on_play();\r\n\t\t\t\t_isPaused = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (isEnd) {\r\n\t\t\t\t_ui_on_scoFinish();\r\n\t\t\t\twin.setTimeout(_exit, 1000);\r\n\t\t\t}\r\n\r\n\t\t\tif (_isKickback) {\r\n\t\t\t\t_current_kickback = scoFrame;\r\n\t\t\t} else {\r\n\t\t\t\t_current_frame = scoFrame;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_log(true, $ERR_CommunicationIssue);\r\n\t\t}\r\n\t}\r\n\r\n\t// Public functions\r\n\tfunction InitSco(callback) { // Using callback to prevent slide sync issues\r\n\t\tvar endAudio = doc.createElement('audio');\r\n\t\tendAudio.id = 'end';\r\n\t\tendAudio.src = 'end-sound.mp3';\r\n\t\tendAudio.preload = 'auto';\r\n\t\tendAudio.volume = 0;\r\n\t\tdoc.body.appendChild(endAudio);\r\n\t\t_checkAutoPlay();\r\n\r\n\t\tif (querystrings.debug) {\r\n\t\t\t_isDebug = true;\r\n\t\t\t_log(false, 'Debug Enabled');\r\n\t\t}\r\n\t\t// Scan for LMS communication format\r\n\t\tif (querystrings.demo) {\r\n\t\t\t_cmiCommunication = 'Demo';\r\n\t\t\t_isDebug = true;\r\n\t\t\t_sco_frameLimit = querystrings.demo;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url && querystrings.subid) {\r\n\t\t\t_cmiCommunication = $API_Aicc;\r\n\t\t\t_aicc._relayUrl += querystrings.subid + '?relay-url=' + querystrings.aicc_url;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url && querystrings.local) {\r\n\t\t\t_cmiCommunication = $API_Local;\r\n\t\t\t_aicc._relayUrl = querystrings.aicc_url;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && _scorm.Initialize($API_Scorm12) === 'true') {\r\n\t\t\t_cmiCommunication = $API_Scorm12;\r\n\t\t}\r\n\r\n\t\t_log(false, _cmiCommunication + ' selected');\r\n\r\n\t\tvar author = doc.querySelector('meta[name=author]');\r\n\t\tvar julian = Math.floor(($NOW.getTime() / 86400000) - ($NOW.getTimezoneOffset() / 1440) + 2440587.5);\r\n\r\n\t\tif (author && author.getAttribute('content') < julian) {\r\n\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t} else {\r\n\t\t\tvar scoXMLPath = 'sco.xml';\r\n\t\t\tif (querystrings.sco) {\r\n\t\t\t\tscoXMLPath = querystrings.sco;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(scoXMLPath, {\r\n\t\t\t\tcache: false,\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_sco_XML = xhr.responseXML;\r\n\t\t\t\t\t_current_language = _sco_XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t\t\t\tvar sco = _sco_XML.getElementsByTagName('sco')[0];\r\n\t\t\t\t\tif (sco.getAttribute('mastery-score')) {\r\n\t\t\t\t\t\t_sco_scaledPassingScore = sco.getAttribute('mastery-score');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\t\t\tcase $API_Aicc:\r\n\t\t\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t\t\t_aicc.Init(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_Status) === 'not attempted') {\r\n\t\t\t\t\t\t\t\t_scorm.SetValue($CORE_Status, $CMI_Incomplete);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_cmi_learner_id = _scorm.GetValue($CORE_StudentId);\r\n\t\t\t\t\t\t\t_cmi_learner_name = _scorm.GetValue($CORE_StudentName);\r\n\t\t\t\t\t\t\t_cmi_entry = _scorm.GetValue($CORE_Entry);\r\n\t\t\t\t\t\t\t_cmi_location = _scorm.GetValue($CORE_Location);\r\n\t\t\t\t\t\t\t_cmi_score_raw = _scorm.GetValue($CORE_ScoreRaw);\r\n\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_SuspendData) !== '') {\r\n\t\t\t\t\t\t\t\t_cmi_suspend_data = JSON.parse(_scorm.GetValue($CORE_SuspendData));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Public second step calls (GetLanguage -> SelectLanguage) Or (Resume)\r\n\tfunction GetLanguages() {\r\n\t\tvar languagesXML = _sco_XML.getElementsByTagName('language');\r\n\t\tvar languagesJSON = [];\r\n\r\n\t\tfor (var i = 0; i < languagesXML.length; i++) {\r\n\t\t\tvar lang = languagesXML[i];\r\n\t\t\tlanguagesJSON[i] = { 'id': lang.getAttribute('id'), 'label': lang.getAttribute('label') };\r\n\t\t}\r\n\r\n\t\treturn languagesJSON;\r\n\t}\r\n\r\n\tfunction SelectLanguage(language) {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play();\r\n\r\n\t\tif (language) {\r\n\t\t\t_current_language = language;\r\n\t\t} else {\r\n\t\t\t_current_language = _sco_XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\t_current_frame = _sco_frames[0];\r\n\t}\r\n\r\n\tfunction Resume() {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play();\r\n\r\n\t\tif (_cmi_location && _cmi_location !== '') {\r\n\t\t\tvar folder = _cmi_location.split('/')[0],\r\n\t\t\t\toptions = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current_language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\tvar matchedPage = _getMatchedFrame(_cmi_location);\r\n\r\n\t\tif (matchedPage) {\r\n\t\t\t_current_frame = matchedPage;\r\n\t\t}\r\n\t}\r\n\r\n\t// Public last step calls\r\n\tfunction GetLocalizedValues() {\r\n\t\tvar languagesXML = _sco_XML.getElementsByTagName('language');\r\n\t\tvar data = {};\r\n\t\tfor (var i = 0; i < languagesXML.length; i++) {\r\n\t\t\tvar lang = languagesXML[i];\r\n\t\t\tif (lang.getAttribute('id') === _current_language) {\r\n\t\t\t\tvar langElements = lang.childNodes;\r\n\t\t\t\tfor (var e = 0; e < langElements.length; e++) {\r\n\t\t\t\t\tif (langElements[e].textContent) {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].textContent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction InitInterface(options) {\r\n\t\toptions.presentorFrame.html('<iframe id=\"slide-kick\" title=\"Kickback slide\" allowfullscreen></iframe><iframe id=\"slide-frame\" title=\"Main slide\" allowfullscreen></iframe>');\r\n\r\n\t\t_ui_on_animate = options.onAnimate;\r\n\t\t_ui_on_progressBar = options.setProgressBar;\r\n\t\t_ui_on_scoFinish = options.onScoFinish;\r\n\r\n\t\t_ui_frameNumber = options.frameField;\r\n\t\t_ui_slide = doc.getElementById('slide-frame');\r\n\t\t_ui_kickback = doc.getElementById('slide-kick');\r\n\r\n\t\tif (options.titleField) {\r\n\t\t\toptions.titleField.html(doc.title);\r\n\t\t}\r\n\r\n\t\t_update(_current_frame);\r\n\t}\r\n\r\n\tfunction SubsToggle() {\r\n\t\tif (_isSubsOff) {\r\n\t\t\tif (_ui_on_subsOn) {\r\n\t\t\t\t_ui_on_subsOn();\r\n\t\t\t}\r\n\t\t\t_isSubsOff = false;\r\n\t\t\tif (_slide_on_subsOn) {\r\n\t\t\t\t_slide_on_subsOn();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_ui_on_subsOff) {\r\n\t\t\t\t_ui_on_subsOff();\r\n\t\t\t}\r\n\t\t\t_isSubsOff = true;\r\n\t\t\tif (_slide_on_subsOff) {\r\n\t\t\t\t_slide_on_subsOff();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _isSubsOff;\r\n\t}\r\n\r\n\tfunction CC(options) {\r\n\t\t_ui_on_subsOff = options.ccOff;\r\n\t\t_ui_on_subsOn = options.ccOn;\r\n\r\n\t\t_ui_on_subsOff(); // Default the button to no CC\r\n\r\n\t\treturn this.SubsToggle;\r\n\t}\r\n\r\n\tfunction Mute(options) {\r\n\t\t_ui_on_mute = options.mute;\r\n\t\t_ui_on_unMute = options.unMute;\r\n\r\n\t\t_ui_on_unMute(); // Default the button to un-muted\r\n\r\n\t\treturn this.MuteToggle;\r\n\t}\r\n\r\n\tfunction MuteToggle() {\r\n\t\tif (_isMuted) {\r\n\t\t\tif (_ui_on_unMute) {\r\n\t\t\t\t_ui_on_unMute();\r\n\t\t\t}\r\n\t\t\t_isMuted = false;\r\n\t\t\tif (_slide_on_unMute) {\r\n\t\t\t\t_slide_on_unMute();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_ui_on_mute) {\r\n\t\t\t\t_ui_on_mute();\r\n\t\t\t}\r\n\t\t\t_isMuted = true;\r\n\t\t\tif (_slide_on_mute) {\r\n\t\t\t\t_slide_on_mute();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _isMuted;\r\n\t}\r\n\r\n\tfunction Next(options) {\r\n\t\t_ui_on_nextDisable = options.onDisable;\r\n\t\t_ui_on_nextEnable = options.onEnable;\r\n\r\n\t\tif (options.disableOnNext) {\r\n\t\t\t_ui_disableNext = options.disableOnNext;\r\n\t\t}\r\n\r\n\t\treturn _next;\r\n\t}\r\n\r\n\tfunction Play(options) {\r\n\t\t_ui_on_pause = options.pause;\r\n\t\t_ui_on_play = options.play;\r\n\r\n\t\treturn this.PlayToggle;\r\n\t}\r\n\r\n\tfunction PlayToggle() {\r\n\t\tif (_isPaused) {\r\n\t\t\tif (_ui_on_play) {\r\n\t\t\t\t_ui_on_play();\r\n\t\t\t}\r\n\t\t\t_isPaused = false;\r\n\t\t\tif (_slide_on_play) {\r\n\t\t\t\t_slide_on_play();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_ui_on_pause) {\r\n\t\t\t\t_ui_on_pause();\r\n\t\t\t}\r\n\t\t\t_isPaused = true;\r\n\t\t\tif (_slide_on_pause) {\r\n\t\t\t\t_slide_on_pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Previous(options) {\r\n\t\t_ui_on_previousDisable = options.onDisable;\r\n\t\t_ui_on_previousEnable = options.onEnable;\r\n\r\n\t\treturn _previous;\r\n\t}\r\n\r\n\tfunction Replay() {\r\n\t\treturn _replay;\r\n\t}\r\n\r\n\t// Public slide functions\r\n\tfunction GetStudentName() {\r\n\t\treturn _cmi_learner_name;\r\n\t}\r\n\r\n\tfunction SubmitSurvey(survey) {\r\n\t\tif (survey) {\r\n\t\t\tvar data = {\r\n\t\t\t\tComments: survey.Comments,\r\n\t\t\t\tCourseName: doc.title,\r\n\t\t\t\tEmphasis: survey.Emphasis,\r\n\t\t\t\tIntro: survey.Intro,\r\n\t\t\t\tOverall: survey.Overall,\r\n\t\t\t\tScreenHeight: screen.height,\r\n\t\t\t\tScreenWidth: screen.width,\r\n\t\t\t\tStudent: '',\r\n\t\t\t\tSummaries: survey.Summaries,\r\n\t\t\t\tThoroughness: survey.Thoroughness,\r\n\t\t\t\tUrl: location.href,\r\n\t\t\t\tUserAgent: navigator.userAgent\r\n\t\t\t};\r\n\r\n\t\t\tif (survey.IsAnonymous) {\r\n\t\t\t\tdata.Student = 'anonymous';\r\n\t\t\t} else {\r\n\t\t\t\tdata.Student = _cmi_learner_name;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax('https://admin.safetyskills.com/api/survey', {\r\n\t\t\t\tdata: data,\r\n\t\t\t\tdone: function () {\r\n\t\t\t\t\t_log(false, 'Survey Data: ' + data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t}\r\n\r\n\tfunction SlideEnd() {\r\n\t\tif (!SS.HasAutoPlay) {\r\n\t\t\t_checkAutoPlay();\r\n\t\t}\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar end = doc.getElementById('end');\r\n\t\t\tend.volume = 1;\r\n\t\t\tend.play();\r\n\t\t\tif (SS.HasAutoPlay) {\r\n\t\t\t\t_ui_on_nextEnable();\r\n\t\t\t\t_isNextEnabled = true;\r\n\t\t\t} else {\r\n\t\t\t\t_next();\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tfunction SlideStart(options) {\r\n\t\t_slide_on_mute = options.slideMute;\r\n\t\t_slide_on_pause = options.slidePause;\r\n\t\t_slide_on_play = options.slidePlay;\r\n\t\t_slide_on_subsOff = options.subsOff;\r\n\t\t_slide_on_subsOn = options.subsOn;\r\n\t\t_slide_on_unMute = options.slideUnMute;\r\n\r\n\t\tif (_isMuted && _slide_on_mute) {\r\n\t\t\t_slide_on_mute();\r\n\t\t}\r\n\t\tif (_isSubsOff && _slide_on_subsOff) {\r\n\t\t\t_slide_on_subsOff();\r\n\t\t}\r\n\t\tif (_ui_on_animate) {\r\n\t\t\t_ui_on_animate(_current_bullets);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction ScoreResults() {\r\n\t\tvar answers = 0;\r\n\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t}\r\n\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\treturn {\r\n\t\t\tanswered: answers,\r\n\t\t\tpassed: ratio >= _sco_scaledPassingScore,\r\n\t\t\tpercent: (ratio * 100).toFixed(2),\r\n\t\t\ttotal: _sco_quizTotal\r\n\t\t};\r\n\t}\r\n\r\n\tfunction QuizCorrect() {\r\n\t\tif (_sco_scaledPassingScore) {\r\n\t\t\tif (_current_frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_suspend_data.answered = [];\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t_cmi_suspend_data.answered.push(_current_frame.getAttribute('file'));\r\n\r\n\t\t\t\t\tvar answers = 0;\r\n\t\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t}\r\n\r\n\tfunction QuizIncorrect() {\r\n\t\tvar firstKickback = _current_frame.getElementsByTagName('kickback')[0];\r\n\r\n\t\tif (_sco_scaledPassingScore) {\r\n\t\t\tvar index = -1;\r\n\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'));\r\n\t\t\t}\r\n\t\t\tif (index > -1) {\r\n\t\t\t\t_cmi_suspend_data.answered.splice(index, 1);\r\n\r\n\t\t\t\tvar answers = 0;\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t\t\t}\r\n\t\t\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2);\r\n\t\t\t}\r\n\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\t_isKickback = false;\r\n\r\n\t\t\t\t_update(_getMatchedFrame(firstKickback.getAttribute('file')));\r\n\t\t\t} else {\r\n\t\t\t\t_next();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\t_isKickback = true;\r\n\r\n\t\t\t\t_update(_getMatchedFrame(firstKickback.getAttribute('file')));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}));"],"sourceRoot":"/source/"}