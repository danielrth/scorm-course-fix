this.CanAutoplay=!1,this.NS=function(e,t,i,a){"use strict";var n={},r="aicc",s="aicc-local",o="none",l="1.2",c="2004",u="xapi",d="completed",m="failed",f="incomplete",p="passed",g="100",h="0",b="cmi.core.entry",v="cmi.core.exit",_="cmi.core.lesson_location",y="cmi.core.session_time",k="cmi.core.score.raw",w="cmi.core.lesson_status",S="cmi.core.student_id",A="cmi.core.student_name",E="cmi.suspend_data",x="An error occurred with the action you performed, if you continue to get this message please close and restart the course. \n\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.",T="Thank you for watching this course demo!",M="This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \n\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.",N="Sorry this subscription is no longer active. Please contact your supervisor or SafetySkills support at support@safetyskills.com",L=new Date,P=f,G="",V="suspend",C="~",B="Example, Anne E.",O="",D="",z="00:00:00",I={},F=o,U=g,q="",R=a,X=a,H=a,J="",j=!1,$=0,Q={disableNext:!1,frameNumber:a,kickback:a,on:{animate:a,mute:a,nextEnable:a,nextDisable:a,pause:a,play:a,previousEnable:a,previousDisable:a,progressBar:a,slidePlay:a,slidePause:a,slideMute:a,slideUnMute:a,scoFinish:a,unMute:a},presentor:a,title:a},Y=!1,K=!1,W=!1,Z=!1,ee=!1,te=!0,ie=[],ae=[],ne=0,re=a,se=a,oe={_relayUrl:"https://scorm.safetyskills.com/relay/",_version:"4.0",Exit:function(){le(this._relayUrl,{async:!1,data:{command:"ExitAU",version:this._version,session_id:i.aicc_sid}})},Put:function(){var e=P,t="";Y||e!==d&&e!==p||(Y=!0,t=this._relayUrl.indexOf("?")>-1?"&completed=true":"?completed=true"),""!==V&&(e=e+","+V);var a=["[core]","lesson_location="+O,"score="+D,"lesson_status="+e,"time="+z,"[core_lesson]","suspend_data="+JSON.stringify(I)].join("\r\n");le(this._relayUrl+t,{async:!1,data:{command:"PutParam",version:this._version,session_id:i.aicc_sid,aicc_data:a},done:function(e){U=h,ge(e.responseText)},fail:function(e){402===e.status?ge(N,!j):ge(x,!j),U=g}})}},le=function(t,i){var a=!0,n="",r=!e.requestAnimationFrame,s={done:function(){},fail:function(){}},o="POST",l=new XMLHttpRequest;if(i){if(i.async===!1&&(a=!1),i.cache===!1&&(o="GET",t=t+"?_="+(new Date).getTime()),i.data){var c=[];for(var u in i.data)i.data.hasOwnProperty(u)&&c.push(encodeURIComponent(u)+"="+encodeURIComponent(i.data[u]));n=c.join("&")}i.done&&(s.done=i.done),i.fail&&(s.fail=i.fail)}"POST"===o&&r&&(l=new e.XDomainRequest,l.onload=function(){s.done.call(s,l)},l.onerror=function(){s.fail.call(s,l)},l.onprogress=function(){},l.ontimeout=function(){}),l.open(o,t,a),l.setRequestHeader&&(l.setRequestHeader("content-type","application/x-www-form-urlencoded; charset=utf-8"),l.onreadystatechange=function(){4===this.readyState&&(200===this.status?s.done.call(s,this):s.fail.call(s,this))}),setTimeout(function(){l.send(n)},0)},ce=function(){try{var t=new Audio;t.addEventListener("play",function(){e.CanAutoplay=!0},!1),t.volume=0,t.autoplay=!0,t.src="end-sound.mp3"}catch(e){}},ue=function(e){var t=K?"slide-kick":"slide-frame";return e.indexOf(".swf")>-1?'<embed fullscreen="yes" height="100%" src="'+e+'" width="100%" id="'+t+'" name="'+t+'" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" quality="high" wmode="opaque"></embed>':'<iframe height="100%" id="'+t+'" scrolling="no" src="'+e+'" style="border: none; overflow: hidden;" width="100%"></iframe>'},de=function(){if("~"!==C)switch(C="~",F){case r:case s:oe.Exit();break;case l:Ae.Terminate();break;case u:}},me=function(e){for(var t=0;t<ie.length;t++)if(ie[t].getAttribute("file")===e)return t+1},fe=function(e){for(var t=0;t<ie.length;t++)if(ie[t].getAttribute("file")===e)return ie[t];return ie[0]},pe=function(i){if("~"===C&&ge(M,!j),e.addEventListener("beforeunload",de),t.onkeydown=function(e){var t=!1;33===e.which&&(Z||j)&&(ve(),t=!0),34===e.which&&te&&(we(),t=!0),106===e.which&&(ke(),t=!0),36===e.which&&(Se(),t=!0),j||119===e.which&&(j=!0,t=!0,ge("Debug enabled")),t&&e.preventDefault()},O&&""!==O)for(var a=O.split("/")[0],r=n.GetLanguages(),s=0;s<r.length;s++)r[s].id===a&&(J=a);_e(J),i("resume"===G)},ge=function(t,i){i?alert(t):e.console&&e.console.log&&e.console.log(t)},he=function(e,t){var i=new Date;i.setTime(e);var a="",n="000"+Math.floor(e/36e5),r="0"+i.getMinutes(),s="0"+i.getSeconds(),o="0"+Math.round(i.getMilliseconds()/10);if(a=n.substr(n.length-4)+":"+r.substr(r.length-2)+":",a+=s.substr(s.length-2)+"."+o.substr(o.length-2),t===c){var l=a.split(":"),u=l[0],d=l[1],m=l[2];a="PT"+u+"H"+d+"M"+m+"S"}return a},be=function(){W?(Q.on.unMute&&Q.on.unMute(),W=!1,Q.on.slideUnMute&&Q.on.slideUnMute()):(Q.on.mute&&Q.on.mute(),W=!0,Q.on.slideMute&&Q.on.slideMute())},ve=function(){if($&&$<me(X.getAttribute("file")))alert(T);else{for(var e,t=!1,i=K?X.getElementsByTagName("kickback"):ie,n=K?H.getAttribute("file"):X.getAttribute("file"),r=0;r<i.length;r++){var s=i[r].getAttribute("file");if(t){e=s;break}n===s&&(t=!0)}if(t&&e){var o=fe(e);xe(o)&&(K?H=o:X=o)}else K&&(K=!1,H=a,xe(X,!0))}},_e=function(e){for(var i,a=se.getElementsByTagName("topics"),n=0;n<a.length;n++){var r=a[n];r.getAttribute("lang")===e&&(i=r,t.title=i.getAttribute("title"))}ie=[];var s=i.getElementsByTagName("page");ne=0;for(var o=0;o<s.length;o++){var l=s[o];"quiz"===l.getAttribute("pType")&&ne++,"survey"!==l.getAttribute("pType")&&ie.push(l)}},ye=function(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},i={},a=e.substring(e.indexOf("[")).split(/\n|\r\n/g),n=null;return a.forEach(function(e){if(!t.comment.test(e))if(t.param.test(e)){var a=e.match(t.param);n?i[n.toLowerCase()][a[1].toLowerCase()]=a[2]:i[a[1].toLowerCase()]=a[2]}else if(t.section.test(e)){var r=e.match(t.section);i[r[1].toLowerCase()]={},n=r[1].toLowerCase()}else 0===e.length&&n&&(n=null)}),i},ke=function(){ee?(Q.on.play&&Q.on.play(),ee=!1,Q.on.slidePlay&&Q.on.slidePlay()):(Q.on.pause&&Q.on.pause(),ee=!0,Q.on.slidePause&&Q.on.slidePause())},we=function(){var e,t=K?X.getElementsByTagName("kickback"):ie,i=K?H.getAttribute("file"):X.getAttribute("file");if(t[0].getAttribute("file")!==i){for(var a=0;a<t.length;a++){var n=t[a].getAttribute("file");if(e&&i===n)break;e=n}var r=fe(e);xe(r)&&(K?H=r:X=r)}},Se=function(){K?Q.kickback.html(ue(H.getAttribute("file"))):Q.presentor.html(ue(X.getAttribute("file"))),Q.on.play&&(Q.on.play(),ee=!1)},Ae={_api:a,_getApi:function(e){var t="API";F===c&&(t="API_1484_11"),this._api=this._scanParents(e),this._api||null==e.parent||e.parent==e||(this._api=this._scanParents(e.parent,t)),this._api||null==e.opener||(this._api=this._scanParents(e.opener,t))},_scanParents:function(e,t){for(var i=0;!e[t]&&null!=e.parent&&e.parent!=e;){if(i++,i>10)return a;e=e.parent}return e[t]},Commit:function(){var e="false";return this._api&&(e=F===c?this._api.Commit(""):this._api.LMSCommit("")),e.toString()},GetLastError:function(){var e=100;return this._api&&(e=F===c?this._api.GetLastError():this._api.LMSGetLastError()),e.toString()},GetValue:function(e){var t="",i=g;if(this._api){if(F===c){switch(e){case w:e="cmi.completion_status";break;case b:e="cmi.entry";break;case y:e="cmi.session_time";break;case"cmi.core.total_time":e="cmi.total_time";break;case _:e="cmi.location";break;case A:e="cmi.learner_name";break;case S:e="cmi.learner_id";break;case"cmi.student_preference._children":e="cmi.learner_preference._children";break;case"cmi.student_preference.language":e="cmi.learner_preference.language";break;case"cmi.core.score._children":e="cmi.score._children";break;case k:e="cmi.score.raw";break;case"cmi.core.score.min":e="cmi.score.min";break;case"cmi.core.score.max":e="cmi.score.max"}t=this._api.GetValue(e),i=this._api.GetLastError().toString()}else t=this._api.LMSGetValue(e),i=this._api.LMSGetLastError().toString();i!==h&&(t="")}return t.toString()},Initialize:function(){var t="false";return this._getApi(e),this._api&&(t=F===c?this._api.Initialize(""):this._api.LMSInitialize("")),t.toString()},SetValue:function(e,t){if(this._api)if(F===c){switch(e){case w:t!==p&&t!==m||(e="cmi.success_status"),t!==d&&t!==f||(e="cmi.completion_status");break;case y:e="cmi.session_time";break;case _:e="cmi.location";break;case v:e="cmi.exit";break;case k:e="cmi.score.raw",this._api.SetValue("cmi.score.scaled",t/100)}this._api.SetValue(e,t)}else e===E&&(t=JSON.stringify(t)),this._api.LMSSetValue(e,t)},Terminate:function(){var e="false";return this._api&&(e=F===c?this._api.Terminate(""):this._api.LMSFinish("")),e.toString()}},Ee=function(t){e.CanAutoplay?(Q.presentor.css("visibility",t?"visible":"hidden"),Q.kickback.css("visibility",t?"hidden":"visible")):(Q.presentor.css("display",t?"block":"none"),Q.kickback.css("display",t?"none":"block"))},xe=function(t,i){var a=t.getAttribute("file"),o=me(a),c="true"===t.getAttribute("end"),m="quiz"===t.getAttribute("pType")||"summary"===t.getAttribute("pType"),f=t.getElementsByTagName("narration")[0],g=t.getElementsByTagName("bullets")[0];if("~"!==C){var b=new Date,S=b.getTime()-L.getTime(),A=he(S,F);switch(K||(O=a),z=A.toString(),c&&(V="",P=re?p:d),F){case r:case s:oe.Put();break;case l:K||(Ae.SetValue(_,O),U=Ae.GetLastError()),U===h&&(Ae.SetValue(y,z),Ae.SetValue(v,V),Ae.SetValue(w,P),Ae.SetValue(k,D),Ae.SetValue(E,I),U=Ae.GetLastError()),U===h?(Ae.Commit(),U=Ae.GetLastError()):ge(x,!j);break;case u:}}else ge(M,!j);if(U===h||j){if(Q.frameNumber&&Q.frameNumber.html(o+" / "+ie.length),Q.on.progressBar){var T=o/ie.length;isNaN(T)&&(T=0),T>1&&(T=1),Q.on.progressBar(100*T)}return R=f&&null!==f?e.requestAnimationFrame?(new XMLSerializer).serializeToString(f):f.xml:"",q=g&&null!==g?e.requestAnimationFrame?(new XMLSerializer).serializeToString(g):g.xml:"",i?(Ee(!0),Q.kickback.empty(),Z=!1,te=!0):(K?(Ee(!1),Q.kickback.html(ue(a)),te=X.getElementsByTagName("kickback")[0].getAttribute("file")!==a):(Ee(!0),Q.presentor.html(ue(a)),te=ie[0].getAttribute("file")!==a),Z=!(!K&&(m||Q.disableNext&&o>1))),te?Q.on.previousEnable():Q.on.previousDisable(),Z?Q.on.nextEnable():Q.on.nextDisable(),(m||c)&&n.SlideStart({}),Q.on.play&&(Q.on.play(),ee=!1),c&&(e.setTimeout(de,1e3),Q.on.scoFinish()),!0}return!1};return n.InitSco=function(e){var a=t.createElement("audio");a.id="end",a.src="end-sound.mp3",a.preload="auto",a.volume=0,t.body.appendChild(a),ce(),i.debug&&(j=!0),i.demo&&(F="Demo",j=!0,$=i.demo),F===o&&i.aicc_url&&i.subid&&(F=r,oe._relayUrl+=i.subid+"?relay-url="+i.aicc_url),F===o&&i.aicc_url&&i.local&&(F=s,oe._relayUrl=i.aicc_url),F===o&&(F=l);var n=t.querySelector("meta[name=author]"),c=Math.floor(L.getTime()/864e5-L.getTimezoneOffset()/1440+2440587.5);if(n&&n.getAttribute("content")<c)ge(N,!j);else{var g="sco.xml";i.sco&&(g=i.sco),le(g,{cache:!1,done:function(t){se=t.responseXML,ae=se.getElementsByTagName("language"),J=se.getElementsByTagName("languages")[0].getAttribute("default");var a=se.getElementsByTagName("sco")[0];switch(a.getAttribute("mastery-score")&&(re=a.getAttribute("mastery-score")),ge("SS v2.9.6 Initialized, Tracking type: "+F),F){case r:case s:le(oe._relayUrl,{data:{command:"GetParam",version:oe._version,session_id:i.aicc_sid},done:function(t){ge(t.responseText);var i=ye(t.responseText),a=i.core.lesson_status.toLowerCase(),n=a.trim().slice(0,1);if(C=i.core.student_id,B=i.core.student_name,O=i.core.lesson_location,"n;i".split(";").indexOf(n)>-1?P=f:(P="f"===n?m:"p"===n?p:d,Y=!0),a.indexOf(",")>-1){var r=a.split(",")[1].trim().slice(0,1);"a"===r&&(G="ab-initio"),("r"===r||O&&""!==O)&&(G="resume")}var s=i.core.score.split(",");D=s[0],i.core_lesson&&i.core_lesson.suspend_data&&(I=JSON.parse(i.core_lesson.suspend_data)),pe(e),oe.Put()},fail:function(t){pe(e)}});break;case l:if("true"===Ae.Initialize()&&("not attempted"===Ae.GetValue(w)&&Ae.SetValue(w,f),C=Ae.GetValue(S),B=Ae.GetValue(A),G=Ae.GetValue(b),O=Ae.GetValue(_),D=Ae.GetValue(k),""!==Ae.GetValue(E))){var n=Ae.GetValue(E);0===n.lastIndexOf("suspend_data=",0)&&(n=n.slice(13)),I=JSON.parse(n)}pe(e);break;case u:break;default:pe(e)}}})}},n.GetLanguages=function(){for(var e=[],t=0;t<ae.length;t++){var i=ae[t];e[t]={id:i.getAttribute("id"),label:i.getAttribute("label")}}return e},n.SelectLanguage=function(e){t.getElementById("end").play(),J=e?e:se.getElementsByTagName("languages")[0].getAttribute("default"),_e(J),X=ie[0]},n.Resume=function(){if(t.getElementById("end").play(),O&&""!==O)for(var e=O.split("/")[0],i=n.GetLanguages(),a=0;a<i.length;a++)i[a].id===e&&(J=e);_e(J);var r=fe(O);r&&(X=r)},n.GetLocalizedValues=function(){for(var e={},t=0;t<ae.length;t++){var i=ae[t];if(i.getAttribute("id")===J)for(var a=i.childNodes,n=0;n<a.length;n++)a[n].textContent?e[a[n].tagName]=a[n].textContent:e[a[n].tagName]=a[n].firstChild.nodeValue}return e},n.InitInterface=function(e){Q.on.animate=e.onAnimate,Q.on.progressBar=e.setProgressBar,Q.on.scoFinish=e.onScoFinish,Q.title=e.titleField,Q.frameNumber=e.frameField,Q.presentor=e.presentorFrame,Q.kickback=e.kickbackFrame,Q.title&&Q.title.html(t.title),xe(X)},n.Mute=function(e){return Q.on.mute=e.mute,Q.on.unMute=e.unMute,Q.on.unMute(),be},n.Next=function(e){return Q.on.nextDisable=e.onDisable,Q.on.nextEnable=e.onEnable,e.disableOnNext&&(Q.disableNext=e.disableOnNext),ve},n.Play=function(e){return Q.on.play=e.play,Q.on.pause=e.pause,ke},n.Previous=function(e){return Q.on.previousDisable=e.onDisable,Q.on.previousEnable=e.onEnable,we},n.Replay=function(){return Se},n.EndSco=function(){return function(){de(),e.top.opener?e.top.close():ge("Data saved, but window was not able to be closed",!j)}},n.GetStudentName=function(){return B},n.SlideStart=function(e){Q.on.slidePause=e.slidePause,Q.on.slidePlay=e.slidePlay,Q.on.slideMute=e.slideMute,Q.on.slideUnMute=e.slideUnMute,Q.on.animate&&Q.on.animate(q,R),W&&Q.on.slideMute&&Q.on.slideMute()},n.SlideEnd=function(){e.CanAutoplay||ce(),setTimeout(function(){var i=t.getElementById("end");i.volume=1,i.play(),e.CanAutoplay?(Q.on.nextEnable(),Z=!0):ve()},1e3)},n.ScoreResults=function(){var e=0;I.answered&&(e=I.answered.length);var t=e/ne;return{answered:e,passed:t>=re,percent:(100*t).toFixed(2),total:ne}},n.QuizCorrect=function(){if(re&&"quiz"===X.getAttribute("pType")){var e=-1;if(I.answered?e=I.answered.indexOf(X.getAttribute("file")):I.answered=[],e===-1){I.answered.push(X.getAttribute("file"));var t=0;I.answered&&(t=I.answered.length);var i=t/ne;D=(100*i).toFixed(2)}}ve()},n.QuizIncorrect=function(){var e=X.getElementsByTagName("kickback")[0];if(re){var t=-1;if(I.answered&&(t=I.answered.indexOf(X.getAttribute("file"))),t>-1){I.answered.splice(t,1);var i=0;I.answered&&(i=I.answered.length);var a=i/ne;D=(100*a).toFixed(2)}if(e){var n=fe(e.getAttribute("file"));K=!1,xe(n)&&(X=n)}else ve()}else if(e){var r=fe(e.getAttribute("file"));K=!0,xe(r)&&(H=r)}},n}(this,this.document,this.querystrings||{});
//# sourceMappingURL=ss.2.9.min.js.map
