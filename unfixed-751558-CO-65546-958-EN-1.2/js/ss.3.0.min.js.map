{"version":3,"sources":["ss.3.0.js"],"names":["this","CanAutoplay","global","factory","module","exports","document","w","Error","window","win","noGlobal","_ajax","url","options","async","data","ie9","requestAnimationFrame","methods","done","fail","type","XHR","XMLHttpRequest","cache","Date","getTime","parts","i","hasOwnProperty","push","encodeURIComponent","join","XDomainRequest","onload","call","onerror","onprogress","ontimeout","open","setRequestHeader","onreadystatechange","readyState","status","setTimeout","send","_checkAutoPlay","audio","Audio","addEventListener","volume","autoplay","src","e","_debug","set","location","hash","_exit","_cmi_learner_id","_cmiCommunication","$API_Aicc","$API_Local","_aicc","Exit","$API_Scorm12","_scorm","Terminate","$API_TinCan","_getFrameNumber","fileName","_sco_frames","length","getAttribute","_getMatchedFrame","_initFinish","callback","_log","$ERR_NotInitialized","doc","onkeydown","keyPressed","which","_isNextEnabled","_next","_isPreviousEnabled","_previous","preventDefault","_parseFrames","_cmi_entry","message","showUser","alert","console","log","_millisecondsToCMIDuration","timeDifference","version","dtm","setTime","hms","h","Math","floor","m","getMinutes","s","getSeconds","cs","round","getMilliseconds","substr","$API_Scorm2004","aryPieces","split","strHour","strMin","strSec","$API_Demo","_sco_frameLimit","_current_frame","$ERR_DemoExceeded","nextFileName","found","frames","_isKickback","getElementsByTagName","currentFileName","_current_kickback","_update","undefined","selectedTopics","topics","_sco_XML","_cmi_suspend_data","scoId","t","topic","title","testFrames","exclude","$API_Playthrough","_sco_quizTotal","f","indexOf","_parseIni","string","regex","section","param","comment","value","lines","substring","forEach","line","test","pMatch","match","toLowerCase","sMatch","previousFileName","_tryParse","json","JSON","parse","_toggleFrames","presentorOnTop","_ui_kickback","setAttribute","_ui_slide","removeAttribute","scoFrame","quizReturn","timeNow","n","$NOW","v","_cmi_location","_cmi_session_time","toString","_cmi_exit","_sco_scaledPassingScore","_cmi_completion_status","$CMI_Passed","$CMI_Completed","_hackScore","_cmi_score_raw","Put","SetValue","$CORE_Location","GetLastError","$CODE_NoError","$CORE_SessionTime","$CORE_Exit","$CORE_Status","$CORE_ScoreRaw","$CORE_SuspendData","stringify","Commit","_updateUI","$CODE_GeneralError","errorCode","file","frameNumber","isEnd","isQuiz","_ui_frameNumber","html","_ui_on_progressBar","percent","isNaN","focus","frame","_ui_disableNext","_ui_on_previousEnable","_ui_on_previousDisable","_ui_on_nextEnable","_ui_on_nextDisable","SS","SlideStart","_ui_on_scoFinish","$ERR_CommunicationIssue","InitSco","endAudio","createElement","id","preload","body","appendChild","querystrings","mode","limit","$API_None","Initialize","aicc_url","_relayUrl","author","querySelector","julian","getTimezoneOffset","$ERR_SubscriptionInactive","scoXMLPath","sco","xhr","responseXML","Init","GetValue","$CMI_Incomplete","$CORE_StudentId","_cmi_learner_name","$CORE_StudentName","$CORE_Entry","suspendData","lastIndexOf","slice","GetLanguages","languagesXML","languagesJSON","lang","label","SelectLanguage","language","getElementById","play","Resume","GetLocalizedValues","langElements","childNodes","textContent","tagName","firstChild","nodeValue","InitInterface","presentorFrame","_ui_on_animate","onAnimate","setProgressBar","onScoFinish","frameField","titleField","commaHack","_hackComma","scoreHack","Next","onDisable","onEnable","disableOnNext","Previous","GetStudentName","SlideEnd","end","ScoreResults","answers","answered","ratio","passed","toFixed","total","QuizCorrect","index","QuizIncorrect","firstKickback","splice","$CMI_Failed","_isCompleted","_version","command","session_id","aicc_sid","responseText","scoData","core","lesson_status","statusSlice","trim","student_id","student_name","lesson_location","entry","score","core_lesson","suspend_data","query","aiccData","aicc_data","_api","_getApi","apiName","_scanParents","parent","opener","tries","result","LMSCommit","errCode","LMSGetLastError","element","LMSGetValue","communication","LMSInitialize","LMSSetValue","LMSFinish","CC","Mute","Play","Replay","define","amd","NS"],"mappings":"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","file":"ss.3.0.min.js","sourcesContent":["this.CanAutoplay = false;\r\n// Checking if this class is being called from another module\r\n(function (global, factory) {\r\n\tif (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n\t\tmodule.exports = global.document ?\r\n\t\t\tfactory(global, true) :\r\n\t\t\tfunction (w) {\r\n\t\t\t\tif (!w.document) {\r\n\t\t\t\t\tthrow new Error(\"SS requires a window with a document\")\r\n\t\t\t\t}\r\n\t\t\t\treturn factory(w)\r\n\t\t\t}\r\n\t} else {\r\n\t\tfactory(global)\r\n\t}\r\n}(typeof window !== \"undefined\" ? window : this, function (win, noGlobal) { // Main constructor\r\n\t\"use strict\"\r\n\tvar doc = win.document\r\n\tvar querystrings = win.querystrings || {}\r\n\r\n\t// Contstants\r\n\tvar $API_Aicc = 'aicc'\r\n\tvar $API_Demo = 'demo'\r\n\tvar $API_Local = 'aicc-local'\r\n\tvar $API_None = 'none'\r\n\tvar $API_Playthrough = 'playthrough'\r\n\tvar $API_Scorm12 = '1.2'\r\n\tvar $API_Scorm2004 = '2004'\r\n\tvar $API_TinCan = 'xapi'\r\n\tvar $CMI_Completed = 'completed'\r\n\tvar $CMI_Failed = 'failed'\r\n\tvar $CMI_Incomplete = 'incomplete'\r\n\tvar $CMI_Passed = 'passed'\r\n\tvar $CODE_GeneralError = '100'\r\n\tvar $CODE_NoError = '0'\r\n\tvar $CORE_Entry = 'cmi.core.entry'\r\n\tvar $CORE_Exit = 'cmi.core.exit'\r\n\tvar $CORE_Location = 'cmi.core.lesson_location'\r\n\tvar $CORE_SessionTime = 'cmi.core.session_time'\r\n\tvar $CORE_ScoreRaw = 'cmi.core.score.raw'\r\n\tvar $CORE_Status = 'cmi.core.lesson_status'\r\n\tvar $CORE_StudentId = 'cmi.core.student_id'\r\n\tvar $CORE_StudentName = 'cmi.core.student_name'\r\n\tvar $CORE_SuspendData = 'cmi.suspend_data'\r\n\tvar $ERR_CommunicationIssue = 'An error occurred with the action you performed, if you continue to get this message please close and restart the course. \\n\\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.'\r\n\tvar $ERR_DemoExceeded = 'Thank you for watching this course demo!'\r\n\tvar $ERR_NotInitialized = 'This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \\n\\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.'\r\n\tvar $ERR_SubscriptionInactive = 'Sorry this subscription is no longer active. Please contact your supervisor or SafetySkills support at support@safetyskills.com'\r\n\tvar $NOW = new Date()\r\n\r\n\t// Fields\r\n\tvar _cmi_completion_status = $CMI_Incomplete\r\n\t//var _cmi_credit = 'credit'\r\n\tvar _cmi_entry = ''\r\n\tvar _cmi_exit = 'suspend'\r\n\t//var _cmi_launch_data = ''\r\n\tvar _cmi_learner_id = '~'\r\n\tvar _cmi_learner_name = 'Example, Anne E.'\r\n\tvar _cmi_location = ''\r\n\t//var _cmi_mode = 'normal'\r\n\tvar _cmi_score_raw = ''\r\n\tvar _cmi_session_time = '00:00:00'\r\n\t//var _cmi_success_status = 'unknown'\r\n\tvar _cmi_suspend_data = {}\r\n\tvar _cmiCommunication = $API_None\r\n\tvar _current_frame\r\n\tvar _current_kickback\r\n\tvar _hackComma\r\n\tvar _hackScore\r\n\tvar _isCompleted = false\r\n\tvar _isKickback = false\r\n\tvar _isNextEnabled = false\r\n\tvar _isPreviousEnabled = false\r\n\tvar _sco_frames = []\r\n\tvar _sco_frameLimit = 4\r\n\tvar _sco_quizTotal = 0\r\n\tvar _sco_scaledPassingScore\r\n\tvar _sco_XML\r\n\tvar _ui_disableNext = false\r\n\tvar _ui_frameNumber\r\n\tvar _ui_kickback\r\n\tvar _ui_slide\r\n\tvar _ui_on_animate\r\n\tvar _ui_on_nextDisable\r\n\tvar _ui_on_nextEnable\r\n\tvar _ui_on_previousDisable\r\n\tvar _ui_on_previousEnable\r\n\tvar _ui_on_progressBar\r\n\tvar _ui_on_scoFinish\r\n\r\n\t// Communication Helpers\r\n\tvar _aicc = {\r\n\t\t_relayUrl: \"\",\r\n\t\t_version: '4.0',\r\n\t\tExit: function () {\r\n\t\t\t_ajax(this._relayUrl, {\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'ExitAU',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tInit: function (callback) {\r\n\t\t\t_ajax(this._relayUrl, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'GetParam',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_log(xhr.responseText)\r\n\t\t\t\t\tvar scoData = _parseIni(xhr.responseText)\r\n\t\t\t\t\tvar status = scoData.core.lesson_status.toLowerCase()\r\n\t\t\t\t\tvar statusSlice = status.trim().slice(0, 1)\r\n\r\n\t\t\t\t\t_cmi_learner_id = scoData.core.student_id\r\n\t\t\t\t\t_cmi_learner_name = scoData.core.student_name\r\n\t\t\t\t\t_cmi_location = scoData.core.lesson_location\r\n\r\n\t\t\t\t\tif ('n;i'.split(';').indexOf(statusSlice) > -1) {\r\n\t\t\t\t\t\t_cmi_completion_status = $CMI_Incomplete\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (statusSlice === 'f') {\r\n\t\t\t\t\t\t\t_cmi_completion_status = $CMI_Failed\r\n\t\t\t\t\t\t} else if (statusSlice === 'p') {\r\n\t\t\t\t\t\t\t_cmi_completion_status = $CMI_Passed\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_cmi_completion_status = $CMI_Completed\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_isCompleted = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (status.indexOf(',') > -1) {\r\n\t\t\t\t\t\tvar entry = status.split(',')[1].trim().slice(0, 1)\r\n\r\n\t\t\t\t\t\tif (entry === 'a') {\r\n\t\t\t\t\t\t\t_cmi_entry = 'ab-initio'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (entry === 'r' || (_cmi_location && _cmi_location !== '')) { // HACK: for systems that are using SCORMEngine to support the AICC HACP standard, there should never be a case that a location is stored but the LMS returns 'ab-inito'\r\n\t\t\t\t\t\t\t_cmi_entry = 'resume'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar score = scoData.core.score.split(',')\r\n\t\t\t\t\t_cmi_score_raw = score[0]\r\n\t\t\t\t\tif (scoData.core_lesson && scoData.core_lesson.suspend_data) {\r\n\t\t\t\t\t\t_cmi_suspend_data = _tryParse(scoData.core_lesson.suspend_data)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_initFinish(callback)\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t_log($ERR_SubscriptionInactive, !_debug())\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_initFinish(callback)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tPut: function (scoFrame, quizReturn) {\r\n\t\t\tvar status = _cmi_completion_status\r\n\t\t\tvar query = ''\r\n\r\n\t\t\tif (!_isCompleted) {\r\n\t\t\t\tif (status === $CMI_Completed || status === $CMI_Passed) {\r\n\t\t\t\t\t_isCompleted = true\r\n\t\t\t\t\tif (this._relayUrl.indexOf('?') > -1) {\r\n\t\t\t\t\t\tquery = '&completed=true'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquery = '?completed=true'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_cmi_exit !== '' || _hackComma) {\r\n\t\t\t\tstatus = status + ',' + _cmi_exit\r\n\t\t\t}\r\n\r\n\t\t\tvar aiccData = [\r\n\t\t\t\t'[core]',\r\n\t\t\t\t'lesson_location=' + _cmi_location,\r\n\t\t\t\t'score=' + _cmi_score_raw,\r\n\t\t\t\t'lesson_status=' + status,\r\n\t\t\t\t'time=' + _cmi_session_time,\r\n\t\t\t\t'[core_lesson]',\r\n\t\t\t\t'suspend_data=' + JSON.stringify(_cmi_suspend_data)\r\n\t\t\t].join('\\r\\n')\r\n\t\t\t_ajax(this._relayUrl + query, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'PutParam',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid,\r\n\t\t\t\t\taicc_data: aiccData\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_updateUI(scoFrame, $CODE_NoError, quizReturn)\r\n\t\t\t\t\t_log(xhr.responseText)\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t_log($ERR_SubscriptionInactive, !_debug())\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_updateUI(scoFrame, $CODE_GeneralError, quizReturn)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tvar _scorm = {\r\n\t\t_api: undefined,\r\n\t\t_getApi: function (apiName) {\r\n\t\t\tthis._api = this._scanParents(win)\r\n\r\n\t\t\tif (!this._api && win.parent !== win) {\r\n\t\t\t\tthis._api = this._scanParents(win.parent, apiName)\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._api && win.opener) {\r\n\t\t\t\tthis._api = this._scanParents(win.opener, apiName)\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scanParents: function (w, apiName) {\r\n\t\t\ttry {\r\n\t\t\t\tvar tries = 0\r\n\t\t\t\twhile (!w[apiName] && w.parent !== w) {\r\n\t\t\t\t\ttries++\r\n\t\t\t\t\tif (tries > 10) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tw = w.parent\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn w[apiName]\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t},\r\n\t\tCommit: function () {\r\n\t\t\tvar result = 'false'\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Commit('')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSCommit('')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString()\r\n\t\t},\r\n\t\tGetLastError: function () {\r\n\t\t\tvar errCode = 100\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\terrCode = this._api.GetLastError()\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn errCode.toString()\r\n\t\t},\r\n\t\tGetValue: function (element) {\r\n\t\t\tvar result = ''\r\n\t\t\tvar errCode = $CODE_GeneralError\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status: //there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\telement = 'cmi.completion_status'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_Entry:\r\n\t\t\t\t\t\t\telement = 'cmi.entry'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.core.total_time':\r\n\t\t\t\t\t\t\telement = 'cmi.total_time'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_StudentName:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_name'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_StudentId:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_id'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.student_preference._children':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference._children'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.student_preference.language':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference.language'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.core.score._children':\r\n\t\t\t\t\t\t\telement = 'cmi.score._children'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.core.score.min':\r\n\t\t\t\t\t\t\telement = 'cmi.score.min'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'cmi.core.score.max':\r\n\t\t\t\t\t\t\telement = 'cmi.score.max'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = this._api.GetValue(element)\r\n\t\t\t\t\terrCode = this._api.GetLastError().toString()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSGetValue(element)\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError().toString()\r\n\t\t\t\t}\r\n\t\t\t\tif (errCode !== $CODE_NoError) {\r\n\t\t\t\t\tresult = ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString()\r\n\t\t},\r\n\t\tInitialize: function (communication) {\r\n\t\t\tvar result = 'false'\r\n\t\t\tif (communication === $API_Scorm2004) {\r\n\t\t\t\tthis._getApi(\"API_1484_11\")\r\n\t\t\t\tif (this._api) {\r\n\t\t\t\t\tresult = this._api.Initialize('')\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._getApi(\"API\")\r\n\t\t\t\tif (this._api) {\r\n\t\t\t\t\tresult = this._api.LMSInitialize('')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString()\r\n\t\t},\r\n\t\tSetValue: function (element, value) {\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status://there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\tif ((value === $CMI_Passed) || (value === $CMI_Failed)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.success_status'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((value === $CMI_Completed) || (value === $CMI_Incomplete)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.completion_status'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_Exit:\r\n\t\t\t\t\t\t\telement = 'cmi.exit'\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw'\r\n\t\t\t\t\t\t\tthis._api.SetValue('cmi.score.scaled', (value / 100))\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._api.SetValue(element, value)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._api.LMSSetValue(element, value)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t},\r\n\t\tTerminate: function () {\r\n\t\t\tvar result = 'false'\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Terminate('')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSFinish('')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString()\r\n\t\t}\r\n\t}\r\n\r\n\tvar SS = {\r\n\t\tInitSco: InitSco,\r\n\t\tGetLanguages: GetLanguages,\r\n\t\tSelectLanguage: SelectLanguage,\r\n\t\tResume: Resume,\r\n\t\tGetLocalizedValues: GetLocalizedValues,\r\n\t\tInitInterface: InitInterface,\r\n\t\tCC: function () { },\r\n\t\tMute: function () { },\r\n\t\tNext: Next,\r\n\t\tPlay: function () { },\r\n\t\tPrevious: Previous,\r\n\t\tReplay: function () { },\r\n\t\tGetStudentName: GetStudentName,\r\n\t\tSlideEnd: SlideEnd,\r\n\t\tSlideStart: SlideStart,\r\n\t\tScoreResults: ScoreResults,\r\n\t\tQuizCorrect: QuizCorrect,\r\n\t\tQuizIncorrect: QuizIncorrect,\r\n\t\tversion: '3.0.6'\r\n\t}\r\n\r\n\t// Defining the object as a AMD module\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('ss', [], function () {\r\n\t\t\treturn SS\r\n\t\t})\r\n\t}\r\n\r\n\t// Using flag to conditionally not set the window reference to the object\r\n\tif (!noGlobal) {\r\n\t\twin.SS = win.NS = SS\r\n\t}\r\n\r\n\treturn SS\r\n\r\n\t// Private functions\r\n\tfunction _ajax(url, options) {\r\n\t\tvar async = true\r\n\t\tvar data = ''\r\n\t\tvar ie9 = !win.requestAnimationFrame\r\n\t\tvar methods = {\r\n\t\t\tdone: function () { },\r\n\t\t\tfail: function () { }\r\n\t\t}\r\n\t\tvar type = 'POST'\r\n\t\tvar XHR = new XMLHttpRequest()\r\n\r\n\t\tif (options) {\r\n\t\t\tif (options.async === false) {\r\n\t\t\t\tasync = false\r\n\t\t\t}\r\n\t\t\tif (options.cache === false) {\r\n\t\t\t\ttype = 'GET'\r\n\t\t\t\turl = url + '?_=' + new Date().getTime()\r\n\t\t\t}\r\n\t\t\tif (options.data) {\r\n\t\t\t\tvar parts = []\r\n\t\t\t\tfor (var i in options.data) {\r\n\t\t\t\t\tif (options.data.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tparts.push(encodeURIComponent(i) + '=' + encodeURIComponent(options.data[i]))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdata = parts.join('&')\r\n\t\t\t}\r\n\t\t\tif (options.done) {\r\n\t\t\t\tmethods.done = options.done\r\n\t\t\t}\r\n\t\t\tif (options.fail) {\r\n\t\t\t\tmethods.fail = options.fail\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (type === 'POST' && ie9) {\r\n\t\t\tXHR = new win.XDomainRequest()\r\n\t\t\tXHR.onload = function () {\r\n\t\t\t\tmethods.done.call(methods, XHR)\r\n\t\t\t}\r\n\t\t\tXHR.onerror = function () {\r\n\t\t\t\tmethods.fail.call(methods, XHR)\r\n\t\t\t}\r\n\t\t\tXHR.onprogress = function () { }\r\n\t\t\tXHR.ontimeout = function () { }\r\n\t\t}\r\n\t\tXHR.open(type, url, async)\r\n\t\tif (XHR.setRequestHeader) {\r\n\t\t\tXHR.setRequestHeader('content-type', 'application/x-www-form-urlencoded')\r\n\t\t\tXHR.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4) {\r\n\t\t\t\t\tif (this.status === 200) {\r\n\t\t\t\t\t\tmethods.done.call(methods, this)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmethods.fail.call(methods, this)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetTimeout(function () {\r\n\t\t\tXHR.send(data)\r\n\t\t}, 0)\r\n\t}\r\n\r\n\tfunction _checkAutoPlay() { // Test for autoplay to determine if this is a mobile device\r\n\t\ttry {\r\n\t\t\tvar audio = new Audio()\r\n\t\t\t// this will only be triggered if autoplay works\r\n\t\t\taudio.addEventListener('play', function () {\r\n\t\t\t\twin.CanAutoplay = true\r\n\t\t\t}, false)\r\n\t\t\taudio.volume = 0\r\n\t\t\taudio.autoplay = true\r\n\r\n\t\t\taudio.src = 'end-sound.mp3'\r\n\t\t} catch (e) { }\r\n\t}\r\n\r\n\tfunction _debug(set) {\r\n\t\tif (set) {\r\n\t\t\twin.location.hash = 'debug'\r\n\t\t}\r\n\t\treturn win.location.hash === '#debug'\r\n\t}\r\n\r\n\tfunction _exit() {\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\t// Default to prevent sending more data\r\n\t\t\t_cmi_learner_id = '~'\r\n\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase $API_Aicc:\r\n\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t_aicc.Exit()\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t_scorm.Terminate()\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getFrameNumber(fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn i + 1\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _getMatchedFrame(fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn _sco_frames[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _sco_frames[0]\r\n\t}\r\n\r\n\tfunction _initFinish(callback) {\r\n\t\tif (_cmi_learner_id === '~') {\r\n\t\t\t_log($ERR_NotInitialized, !_debug())\r\n\t\t}\r\n\t\t// Set events and keybinds\r\n\t\twin.addEventListener('beforeunload', _exit)\r\n\r\n\t\tdoc.onkeydown = function (e) {\r\n\t\t\tvar keyPressed = false\r\n\t\t\tif (e.which === 33) {\r\n\t\t\t\tif (_isNextEnabled || _debug()) { // PageUp\r\n\t\t\t\t\t_next()\r\n\t\t\t\t\tkeyPressed = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 34) { // PageDown\r\n\t\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t\t_previous()\r\n\t\t\t\t\tkeyPressed = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!_debug()) {\r\n\t\t\t\tif (e.which === 119) { // F8\r\n\t\t\t\t\t_debug(true)\r\n\t\t\t\t\tkeyPressed = true\r\n\t\t\t\t\t_log('Debug enabled')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (keyPressed) {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_parseFrames()\r\n\r\n\t\tcallback(_cmi_entry === 'resume')\r\n\t}\r\n\r\n\tfunction _log(message, showUser) {\r\n\t\tif (showUser) {\r\n\t\t\talert(message)\r\n\t\t} else {\r\n\t\t\tif (win.console && win.console.log) {\r\n\t\t\t\twin.console.log(message)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _millisecondsToCMIDuration(timeDifference, version) {\r\n\t\t//Convert duration from milliseconds to 0000:00:00.00 format\r\n\t\tvar dtm = new Date()\r\n\t\tdtm.setTime(timeDifference)\r\n\t\tvar hms = ''\r\n\t\tvar h = '000' + Math.floor(timeDifference / 3600000)\r\n\t\tvar m = '0' + dtm.getMinutes()\r\n\t\tvar s = '0' + dtm.getSeconds()\r\n\t\tvar cs = '0' + Math.round(dtm.getMilliseconds() / 10)\r\n\t\thms = h.substr(h.length - 4) + ':' + m.substr(m.length - 2) + ':'\r\n\t\thms += s.substr(s.length - 2) + '.' + cs.substr(cs.length - 2)\r\n\r\n\t\tif (version === $API_Scorm2004) {\r\n\t\t\t//then convert hms to a timeinterval format\r\n\t\t\t//P[yY][mM][dD][T[hH][mM][s[.s]S]\r\n\t\t\t//example: PT1H5M (1 hour 5 miutes)\r\n\t\t\tvar aryPieces = hms.split(':')\r\n\t\t\tvar strHour = aryPieces[0]\r\n\t\t\tvar strMin = aryPieces[1]\r\n\t\t\tvar strSec = aryPieces[2]\r\n\r\n\t\t\thms = 'PT' + strHour + 'H' + strMin + 'M' + strSec + 'S'\r\n\t\t}\r\n\r\n\t\treturn hms\r\n\t}\r\n\r\n\tfunction _next() {\r\n\t\tif (_cmiCommunication === $API_Demo && _sco_frameLimit < _getFrameNumber(_current_frame.getAttribute('file'))) {\r\n\t\t\talert($ERR_DemoExceeded)\r\n\t\t} else {\r\n\t\t\tvar nextFileName\r\n\t\t\tvar found = false\r\n\t\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames\r\n\t\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file')\r\n\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file')\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tnextFileName = fileName\r\n\t\t\t\t\tbreak\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (currentFileName === fileName) {\r\n\t\t\t\t\t\tfound = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (found && nextFileName) {\r\n\t\t\t\t_update(_getMatchedFrame(nextFileName))\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_isKickback = false\r\n\t\t\t\t\t_current_kickback = undefined\r\n\t\t\t\t\t_update(_current_frame, true)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _parseFrames() {\r\n\t\tvar topics = _sco_XML.getElementsByTagName('topics')\r\n\t\tvar selectedTopics\r\n\r\n\t\tif (!_cmi_suspend_data.scoId) {\r\n\t\t\t_cmi_suspend_data.scoId = _sco_XML.getElementsByTagName('languages')[0].getAttribute('default')\r\n\t\t}\r\n\r\n\t\tfor (var t = 0; t < topics.length; t++) {\r\n\t\t\tvar topic = topics[t]\r\n\t\t\tif (topic.getAttribute('lang') === _cmi_suspend_data.scoId) {\r\n\t\t\t\tselectedTopics = topic\r\n\t\t\t\tdoc.title = selectedTopics.getAttribute('title')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_sco_frames = []\r\n\r\n\t\tvar testFrames = selectedTopics.getElementsByTagName('page')\r\n\t\tvar exclude = [\"survey\"]\r\n\t\tif (_cmiCommunication === $API_Playthrough) {\r\n\t\t\texclude.push(\"quiz\")\r\n\t\t}\r\n\r\n\t\t_sco_quizTotal = 0\r\n\t\tfor (var f = 0; f < testFrames.length; f++) {\r\n\t\t\tvar type = testFrames[f].getAttribute('pType')\r\n\t\t\tif (exclude.indexOf(type) === -1) {\r\n\t\t\t\t_sco_frames.push(testFrames[f])\r\n\t\t\t\tif (type === \"quiz\") { // Getting quiz count\r\n\t\t\t\t\t_sco_quizTotal++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _parseIni(string) {\r\n\t\tvar regex = {\r\n\t\t\tsection: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\r\n\t\t\tparam: /^\\s*([\\w\\.\\-\\_]+)\\s*=\\s*(.*?)\\s*$/,\r\n\t\t\tcomment: /^\\s*;.*$/\r\n\t\t}\r\n\t\tvar value = {}\r\n\t\t// Pulling just ini data\r\n\t\tvar lines = string.substring(string.indexOf('[')).split(/\\n|\\r\\n/g)\r\n\t\tvar section = null\r\n\t\tlines.forEach(function (line) {\r\n\t\t\tif (regex.comment.test(line)) {\r\n\t\t\t\treturn\r\n\t\t\t} else if (regex.param.test(line)) {\r\n\t\t\t\tvar pMatch = line.match(regex.param)\r\n\t\t\t\tif (section) {\r\n\t\t\t\t\tvalue[section.toLowerCase()][pMatch[1].toLowerCase()] = pMatch[2]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue[pMatch[1].toLowerCase()] = pMatch[2]\r\n\t\t\t\t}\r\n\t\t\t} else if (regex.section.test(line)) {\r\n\t\t\t\tvar sMatch = line.match(regex.section)\r\n\t\t\t\tvalue[sMatch[1].toLowerCase()] = {}\r\n\t\t\t\tsection = sMatch[1].toLowerCase()\r\n\t\t\t} else if (line.length === 0 && section) {\r\n\t\t\t\tsection = null\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction _previous() {\r\n\t\tvar previousFileName\r\n\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames\r\n\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file')\r\n\r\n\t\tif (frames[0].getAttribute('file') !== currentFileName) {\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file')\r\n\t\t\t\tif (previousFileName && currentFileName === fileName) { break }\r\n\t\t\t\tpreviousFileName = fileName\r\n\t\t\t}\r\n\r\n\t\t\t_update(_getMatchedFrame(previousFileName))\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _tryParse(json) {\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(json)\r\n\t\t} catch (e) {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _toggleFrames(presentorOnTop) {\r\n\t\tif (presentorOnTop) {\r\n\t\t\t_ui_kickback.setAttribute(\"hidden\", \"hidden\")\r\n\t\t\t_ui_slide.removeAttribute(\"hidden\")\r\n\t\t} else {\r\n\t\t\t_ui_slide.setAttribute(\"hidden\", \"hidden\")\r\n\t\t\t_ui_kickback.removeAttribute(\"hidden\")\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _update(scoFrame, quizReturn) {\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\tvar timeNow = new Date()\r\n\t\t\tvar n = timeNow.getTime() - $NOW.getTime()\r\n\t\t\tvar v = _millisecondsToCMIDuration(n, _cmiCommunication)\r\n\r\n\t\t\tif (!_isKickback) {\r\n\t\t\t\t_cmi_location = scoFrame.getAttribute('file')\r\n\t\t\t}\r\n\t\t\t_cmi_session_time = v.toString()\r\n\t\t\tif (scoFrame.getAttribute('end') === 'true') {\r\n\t\t\t\t_cmi_exit = ''\r\n\t\t\t\tif (_sco_scaledPassingScore) {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Passed\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Completed\r\n\t\t\t\t\tif (_hackScore) {\r\n\t\t\t\t\t\t_cmi_completion_status = $CMI_Passed\r\n\t\t\t\t\t\t_cmi_score_raw = '100.00'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (_cmiCommunication) {\r\n\t\t\tcase $API_Aicc:\r\n\t\t\tcase $API_Local:\r\n\t\t\t\t_aicc.Put(scoFrame, quizReturn)\r\n\t\t\t\tbreak\r\n\t\t\tcase $API_Scorm12:\r\n\t\t\t\tif (!_isKickback) {\r\n\t\t\t\t\t_scorm.SetValue($CORE_Location, _cmi_location)\r\n\t\t\t\t}\r\n\t\t\t\tif (_scorm.GetLastError() === $CODE_NoError) {\r\n\t\t\t\t\t_scorm.SetValue($CORE_SessionTime, _cmi_session_time)\r\n\t\t\t\t\t_scorm.SetValue($CORE_Exit, _cmi_exit)\r\n\t\t\t\t\t_scorm.SetValue($CORE_Status, _cmi_completion_status)\r\n\t\t\t\t\t_scorm.SetValue($CORE_ScoreRaw, _cmi_score_raw)\r\n\t\t\t\t\t_scorm.SetValue($CORE_SuspendData, JSON.stringify(_cmi_suspend_data))\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_scorm.GetLastError() === $CODE_NoError) {\r\n\t\t\t\t\t_scorm.Commit()\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_updateUI(scoFrame, _scorm.GetLastError(), quizReturn)\r\n\t\t\t\tbreak\r\n\t\t\tcase $API_TinCan:\r\n\t\t\tdefault:\r\n\t\t\t\t_updateUI(scoFrame, $CODE_GeneralError, quizReturn)\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction _updateUI(scoFrame, errorCode, quizReturn) {\r\n\t\tif (errorCode === $CODE_NoError || _debug()) {\r\n\t\t\tvar file = scoFrame.getAttribute('file')\r\n\t\t\tvar frameNumber = _getFrameNumber(file)\r\n\t\t\tvar isEnd = scoFrame.getAttribute('end') === 'true'\r\n\t\t\tvar isQuiz = scoFrame.getAttribute('pType') === 'quiz' || scoFrame.getAttribute('pType') === 'summary'\r\n\r\n\t\t\tif (_ui_frameNumber) {\r\n\t\t\t\t_ui_frameNumber.html(frameNumber + ' / ' + _sco_frames.length)\r\n\t\t\t}\r\n\r\n\t\t\tif (_ui_on_progressBar) {\r\n\t\t\t\tvar percent = (frameNumber / _sco_frames.length)\r\n\t\t\t\tif (isNaN(percent)) {\r\n\t\t\t\t\tpercent = 0\r\n\t\t\t\t}\r\n\t\t\t\tif (percent > 1) {\r\n\t\t\t\t\tpercent = 1\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_ui_on_progressBar(percent * 100)\r\n\t\t\t}\r\n\r\n\t\t\tif (quizReturn) {\r\n\t\t\t\t_toggleFrames(true)\r\n\t\t\t\t_ui_kickback.src = ''\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t_ui_slide.focus()\r\n\t\t\t\t}, 1000)\r\n\r\n\t\t\t\t_isNextEnabled = false\r\n\t\t\t\t_isPreviousEnabled = true\r\n\t\t\t} else {\r\n\t\t\t\tvar frame\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_toggleFrames(false)\r\n\t\t\t\t\tframe = _ui_kickback\r\n\t\t\t\t\t_isPreviousEnabled = _current_frame.getElementsByTagName('kickback')[0].getAttribute('file') !== file\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_toggleFrames(true)\r\n\t\t\t\t\tframe = _ui_slide\r\n\t\t\t\t\t_isPreviousEnabled = _sco_frames[0].getAttribute('file') !== file\r\n\t\t\t\t}\r\n\r\n\t\t\t\tframe.src = file\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tframe.focus()\r\n\t\t\t\t}, 1000)\r\n\r\n\t\t\t\tif (!_isKickback && (isQuiz || (_ui_disableNext && frameNumber > 1))) {\r\n\t\t\t\t\t_isNextEnabled = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_isNextEnabled = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t_ui_on_previousEnable()\r\n\t\t\t} else {\r\n\t\t\t\t_ui_on_previousDisable()\r\n\t\t\t}\r\n\r\n\t\t\tif (_isNextEnabled) {\r\n\t\t\t\t_ui_on_nextEnable()\r\n\t\t\t} else {\r\n\t\t\t\t_ui_on_nextDisable()\r\n\t\t\t}\r\n\r\n\t\t\tif (isQuiz || isEnd) {\r\n\t\t\t\tSS.SlideStart({})\r\n\t\t\t}\r\n\r\n\t\t\tif (isEnd) {\r\n\t\t\t\t_ui_on_scoFinish()\r\n\t\t\t\twin.setTimeout(_exit, 1000)\r\n\t\t\t}\r\n\r\n\t\t\tif (_isKickback) {\r\n\t\t\t\t_current_kickback = scoFrame\r\n\t\t\t} else {\r\n\t\t\t\t_current_frame = scoFrame\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_log($ERR_CommunicationIssue, !_debug())\r\n\t\t}\r\n\t}\r\n\r\n\t// Public functions\r\n\tfunction InitSco(callback) { // Using callback to prevent slide sync issues\r\n\t\tvar endAudio = doc.createElement('audio')\r\n\t\tendAudio.id = 'end'\r\n\t\tendAudio.src = 'end-sound.mp3'\r\n\t\tendAudio.preload = 'auto'\r\n\t\tendAudio.volume = 0\r\n\t\tdoc.body.appendChild(endAudio)\r\n\t\t_checkAutoPlay()\r\n\r\n\t\t// Scan for LMS communication format\r\n\t\tif (querystrings.mode) {\r\n\t\t\t_debug(true)\r\n\t\t\tif (querystrings.mode === $API_Playthrough) {\r\n\t\t\t\t_cmiCommunication = $API_Playthrough\r\n\t\t\t}\r\n\t\t\tif (querystrings.mode === $API_Demo) {\r\n\t\t\t\t_cmiCommunication = $API_Demo\r\n\t\t\t\tif (querystrings.limit) {\r\n\t\t\t\t\t_sco_frameLimit = querystrings.limit\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None) {\r\n\t\t\tif (_scorm.Initialize($API_Scorm2004) === 'true') {\r\n\t\t\t\t_cmiCommunication = $API_Scorm2004\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None) {\r\n\t\t\tif (_scorm.Initialize($API_Scorm12) === 'true') {\r\n\t\t\t\t_cmiCommunication = $API_Scorm12\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url && querystrings['sub-relay']) {\r\n\t\t\t_cmiCommunication = $API_Aicc\r\n\t\t\t_aicc._relayUrl = querystrings['sub-relay'] + '?relay-url=' + querystrings.aicc_url\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url) {\r\n\t\t\t_cmiCommunication = $API_Local\r\n\t\t\t_aicc._relayUrl = querystrings.aicc_url\r\n\t\t}\r\n\r\n\t\tvar author = doc.querySelector('meta[name=author]')\r\n\t\tvar julian = Math.floor(($NOW.getTime() / 86400000) - ($NOW.getTimezoneOffset() / 1440) + 2440587.5)\r\n\r\n\t\tif (author && author.getAttribute('content') < julian) {\r\n\t\t\t_log($ERR_SubscriptionInactive, !_debug())\r\n\t\t} else {\r\n\t\t\tvar scoXMLPath = 'sco.xml'\r\n\t\t\tif (querystrings.sco) {\r\n\t\t\t\tscoXMLPath = querystrings.sco\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(scoXMLPath, {\r\n\t\t\t\tcache: false,\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_sco_XML = xhr.responseXML\r\n\t\t\t\t\tvar sco = _sco_XML.getElementsByTagName('sco')[0]\r\n\t\t\t\t\tif (sco.getAttribute('mastery-score')) {\r\n\t\t\t\t\t\t_sco_scaledPassingScore = sco.getAttribute('mastery-score')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_log('SS v' + SS.version + ' Initialized, Tracking type: ' + _cmiCommunication)\r\n\t\t\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\t\t\tcase $API_Aicc:\r\n\t\t\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t\t\t_aicc.Init(callback)\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_Status) === 'not attempted') {\r\n\t\t\t\t\t\t\t\t_scorm.SetValue($CORE_Status, $CMI_Incomplete)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_cmi_learner_id = _scorm.GetValue($CORE_StudentId)\r\n\t\t\t\t\t\t\t_cmi_learner_name = _scorm.GetValue($CORE_StudentName)\r\n\t\t\t\t\t\t\t_cmi_entry = _scorm.GetValue($CORE_Entry)\r\n\t\t\t\t\t\t\t_cmi_location = _scorm.GetValue($CORE_Location)\r\n\t\t\t\t\t\t\t_cmi_score_raw = _scorm.GetValue($CORE_ScoreRaw)\r\n\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_SuspendData) !== '') {\r\n\t\t\t\t\t\t\t\tvar suspendData = _scorm.GetValue($CORE_SuspendData)\r\n\t\t\t\t\t\t\t\tif (suspendData.lastIndexOf('suspend_data=', 0) === 0) {\r\n\t\t\t\t\t\t\t\t\tsuspendData = suspendData.slice(13)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_cmi_suspend_data = _tryParse(suspendData)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t_initFinish(callback)\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t_initFinish(callback)\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// Public second step calls (GetLanguage -> SelectLanguage) Or (Resume)\r\n\tfunction GetLanguages() {\r\n\t\tvar languagesXML = _sco_XML.getElementsByTagName('language')\r\n\t\tvar languagesJSON = []\r\n\r\n\t\tfor (var i = 0; i < languagesXML.length; i++) {\r\n\t\t\tvar lang = languagesXML[i]\r\n\t\t\tlanguagesJSON[i] = { id: lang.getAttribute('id'), label: lang.getAttribute('label') }\r\n\t\t}\r\n\r\n\t\treturn languagesJSON\r\n\t}\r\n\r\n\tfunction SelectLanguage(language) {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play()\r\n\r\n\t\tif (language) {\r\n\t\t\t_cmi_suspend_data.scoId = language\r\n\t\t}\r\n\r\n\t\t_cmi_location = \"\"\r\n\r\n\t\t_parseFrames()\r\n\t}\r\n\r\n\tfunction Resume() {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play()\r\n\t}\r\n\r\n\t// Public last step calls\r\n\tfunction GetLocalizedValues() {\r\n\t\tvar languagesXML = _sco_XML.getElementsByTagName('language')\r\n\t\tvar data = {}\r\n\t\tfor (var i = 0; i < languagesXML.length; i++) {\r\n\t\t\tvar lang = languagesXML[i]\r\n\t\t\tif (lang.getAttribute('id') === _cmi_suspend_data.scoId) {\r\n\t\t\t\tvar langElements = lang.childNodes\r\n\t\t\t\tfor (var e = 0; e < langElements.length; e++) {\r\n\t\t\t\t\tif (langElements[e].textContent) {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].textContent\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].firstChild.nodeValue\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction InitInterface(options) {\r\n\t\toptions.presentorFrame.html('<iframe id=\"slide-kick\" title=\"Kickback slide\" allowfullscreen></iframe><iframe id=\"slide-frame\" title=\"Main slide\" allowfullscreen></iframe>')\r\n\r\n\t\t_ui_on_animate = options.onAnimate\r\n\t\t_ui_on_progressBar = options.setProgressBar\r\n\t\t_ui_on_scoFinish = options.onScoFinish\r\n\r\n\t\t_ui_frameNumber = options.frameField\r\n\t\t_ui_slide = doc.getElementById('slide-frame')\r\n\t\t_ui_kickback = doc.getElementById('slide-kick')\r\n\r\n\t\tif (options.titleField) {\r\n\t\t\toptions.titleField.html(doc.title)\r\n\t\t}\r\n\t\tif (options.commaHack) {\r\n\t\t\t_hackComma = true\r\n\t\t}\r\n\t\tif (options.scoreHack) {\r\n\t\t\t_hackScore = true\r\n\t\t}\r\n\r\n\t\t_update(_getMatchedFrame(_cmi_location))\r\n\t}\r\n\r\n\tfunction Next(options) {\r\n\t\t_ui_on_nextDisable = options.onDisable\r\n\t\t_ui_on_nextEnable = options.onEnable\r\n\r\n\t\tif (options.disableOnNext && _cmiCommunication !== $API_Playthrough) {\r\n\t\t\t_ui_disableNext = options.disableOnNext\r\n\t\t}\r\n\r\n\t\treturn _next\r\n\t}\r\n\r\n\tfunction Previous(options) {\r\n\t\t_ui_on_previousDisable = options.onDisable\r\n\t\t_ui_on_previousEnable = options.onEnable\r\n\r\n\t\treturn _previous\r\n\t}\r\n\r\n\t// Public slide functions\r\n\tfunction GetStudentName() {\r\n\t\treturn _cmi_learner_name\r\n\t}\r\n\r\n\tfunction SlideEnd() {\r\n\t\tif (!win.CanAutoplay) {\r\n\t\t\t_checkAutoPlay()\r\n\t\t}\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar end = doc.getElementById('end')\r\n\t\t\tend.volume = 1\r\n\t\t\tend.play()\r\n\t\t\tif (win.CanAutoplay) {\r\n\t\t\t\t_ui_on_nextEnable()\r\n\t\t\t\t_isNextEnabled = true\r\n\t\t\t} else {\r\n\t\t\t\t_next()\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\tfunction SlideStart(options) {\r\n\t\tif (_ui_on_animate) {\r\n\t\t\t_ui_on_animate()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction ScoreResults() {\r\n\t\tvar answers = 0\r\n\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\tanswers = _cmi_suspend_data.answered.length\r\n\t\t}\r\n\t\tvar ratio = answers / _sco_quizTotal\r\n\r\n\t\treturn {\r\n\t\t\tanswered: answers,\r\n\t\t\tpassed: ratio >= _sco_scaledPassingScore,\r\n\t\t\tpercent: (ratio * 100).toFixed(2),\r\n\t\t\ttotal: _sco_quizTotal\r\n\t\t}\r\n\t}\r\n\r\n\tfunction QuizCorrect() {\r\n\t\tif (_sco_scaledPassingScore) {\r\n\t\t\tif (_current_frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\tvar index = -1\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'))\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_suspend_data.answered = []\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t_cmi_suspend_data.answered.push(_current_frame.getAttribute('file'))\r\n\r\n\t\t\t\t\tvar answers = 0\r\n\t\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\t\tanswers = _cmi_suspend_data.answered.length\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ratio = answers / _sco_quizTotal\r\n\r\n\t\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_next()\r\n\t}\r\n\r\n\tfunction QuizIncorrect() {\r\n\t\tvar firstKickback = _current_frame.getElementsByTagName('kickback')[0]\r\n\r\n\t\tif (_sco_scaledPassingScore) {\r\n\t\t\tvar index = -1\r\n\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'))\r\n\t\t\t}\r\n\t\t\tif (index > -1) {\r\n\t\t\t\t_cmi_suspend_data.answered.splice(index, 1)\r\n\r\n\t\t\t\tvar answers = 0\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tanswers = _cmi_suspend_data.answered.length\r\n\t\t\t\t}\r\n\t\t\t\tvar ratio = answers / _sco_quizTotal\r\n\r\n\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2)\r\n\t\t\t}\r\n\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\t_isKickback = false\r\n\r\n\t\t\t\t_update(_getMatchedFrame(firstKickback.getAttribute('file')))\r\n\t\t\t} else {\r\n\t\t\t\t_next()\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\t_isKickback = true\r\n\r\n\t\t\t\t_update(_getMatchedFrame(firstKickback.getAttribute('file')))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}))"],"sourceRoot":"/source/"}