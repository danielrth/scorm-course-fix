{"version":3,"sources":["ss.2.9.js"],"names":["this","CanAutoplay","NS","win","doc","querystrings","undefined","SS","$API_Aicc","$API_Local","$API_None","$API_Scorm12","$API_Scorm2004","$API_TinCan","$CMI_Completed","$CMI_Failed","$CMI_Incomplete","$CMI_Passed","$CODE_GeneralError","$CODE_NoError","$CORE_Entry","$CORE_Exit","$CORE_Location","$CORE_SessionTime","$CORE_ScoreRaw","$CORE_Status","$CORE_StudentId","$CORE_StudentName","$CORE_SuspendData","$ERR_CommunicationIssue","$ERR_DemoExceeded","$ERR_NotInitialized","$ERR_SubscriptionInactive","$NOW","Date","_cmi_completion_status","_cmi_entry","_cmi_exit","_cmi_learner_id","_cmi_learner_name","_cmi_location","_cmi_score_raw","_cmi_session_time","_cmi_suspend_data","_cmiCommunication","_cmiError","_current_bullets","_current_captions","_current_frame","_current_kickback","_current_language","_debug","_demoFrameLimit","_interface","disableNext","frameNumber","kickback","on","animate","mute","nextEnable","nextDisable","pause","play","previousEnable","previousDisable","progressBar","slidePlay","slidePause","slideMute","slideUnMute","scoFinish","unMute","presentor","title","_isCompleted","_isKickback","_isMuted","_isNextEnabled","_isPaused","_isPreviousEnabled","_sco_frames","_sco_languages","_sco_quizTotal","_sco_scaled_passing_score","_sco_XML","_aicc","_relayUrl","_version","Exit","_ajax","async","data","command","version","session_id","aicc_sid","Put","status","query","indexOf","aicc_data","JSON","stringify","done","xhr","_log","responseText","fail","url","options","ie9","requestAnimationFrame","methods","type","XHR","XMLHttpRequest","cache","getTime","parts","i","hasOwnProperty","push","encodeURIComponent","join","XDomainRequest","onload","call","onerror","onprogress","ontimeout","open","setRequestHeader","onreadystatechange","readyState","setTimeout","send","_checkAutoPlay","audio","Audio","addEventListener","volume","autoplay","src","e","_createFrame","frameName","_exit","_scorm","Terminate","_getFrameNumber","fileName","length","getAttribute","_getMatchedFrame","_initFinish","callback","onkeydown","keyPressed","which","_next","_previous","_playToggle","_replay","preventDefault","folder","split","GetLanguages","id","_parseFrames","showUser","message","console","log","alert","_millisecondsToCMIDuration","timeDifference","dtm","setTime","hms","h","Math","floor","m","getMinutes","s","getSeconds","cs","round","getMilliseconds","substr","aryPieces","strHour","strMin","strSec","_muteToggle","nextFileName","found","frames","getElementsByTagName","currentFileName","nextFrame","_update","currentLanguage","selectedTopics","topics","t","topic","f","frame","_parseIni","string","regex","section","param","comment","value","lines","substring","forEach","line","test","pMatch","match","toLowerCase","sMatch","previousFileName","previousFrame","html","_api","_getApi","w","apiName","_scanParents","parent","opener","tries","Commit","result","LMSCommit","toString","GetLastError","errCode","LMSGetLastError","GetValue","element","LMSGetValue","Initialize","LMSInitialize","SetValue","LMSSetValue","LMSFinish","_toggleFrames","presentorOnTop","css","scoFrame","quizReturn","file","isEnd","isSurvey","isQuiz","narration","bullets","timeNow","n","v","percent","isNaN","xml","XMLSerializer","serializeToString","empty","SlideStart","InitSco","endAudio","createElement","preload","body","appendChild","debug","demo","aicc_url","subid","local","author","querySelector","julian","getTimezoneOffset","scoXMLPath","sco","responseXML","scoData","core","lesson_status","slice","entry","student_id","student_name","lesson_location","score","core_lesson","suspend_data","parse","languagesJSON","lang","label","SelectLanguage","language","getElementById","Resume","matchedPage","GetLocalizedValues","langElements","childNodes","textContent","tagName","firstChild","nodeValue","InitInterface","onAnimate","setProgressBar","onScoFinish","titleField","frameField","presentorFrame","kickbackFrame","Mute","Next","onDisable","onEnable","disableOnNext","Play","Previous","Replay","EndSco","top","close","GetStudentName","SubmitSurvey","survey","Comments","CourseName","Emphasis","Intro","Overall","ScreenHeight","screen","height","ScreenWidth","width","Student","Summaries","Thoroughness","Url","location","href","UserAgent","navigator","userAgent","IsAnonymous","SlideEnd","end","ScoreResults","answers","answered","ratio","passed","toFixed","total","QuizCorrect","index","QuizIncorrect","firstKickback","splice","matchedFrame","matchedKickback","document"],"mappings":"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","file":"ss.2.9.js","sourcesContent":["this.CanAutoplay = false;\r\nthis.NS = (function (win, doc, querystrings, undefined) {\r\n\t'use strict';\r\n\r\n\tvar SS = {};\r\n\t// Contstants\r\n\tvar $API_Aicc = 'aicc';\r\n\tvar $API_Local = 'aicc-local';\r\n\tvar $API_None = 'none';\r\n\tvar $API_Scorm12 = '1.2';\r\n\tvar $API_Scorm2004 = '2004';\r\n\tvar $API_TinCan = 'xapi';\r\n\tvar $CMI_Completed = 'completed';\r\n\tvar $CMI_Failed = 'failed';\r\n\tvar $CMI_Incomplete = 'incomplete';\r\n\tvar $CMI_Passed = 'passed';\r\n\tvar $CODE_GeneralError = '100';\r\n\tvar $CODE_NoError = '0';\r\n\tvar $CORE_Entry = 'cmi.core.entry';\r\n\tvar $CORE_Exit = 'cmi.core.exit';\r\n\tvar $CORE_Location = 'cmi.core.lesson_location';\r\n\tvar $CORE_SessionTime = 'cmi.core.session_time';\r\n\tvar $CORE_ScoreRaw = 'cmi.core.score.raw';\r\n\tvar $CORE_Status = 'cmi.core.lesson_status';\r\n\tvar $CORE_StudentId = 'cmi.core.student_id';\r\n\tvar $CORE_StudentName = 'cmi.core.student_name';\r\n\tvar $CORE_SuspendData = 'cmi.suspend_data';\r\n\tvar $ERR_CommunicationIssue = 'An error occurred with the action you performed, if you continue to get this message please close and restart the course. \\n\\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.';\r\n\tvar $ERR_DemoExceeded = 'Thank you for watching this course demo!';\r\n\tvar $ERR_NotInitialized = 'This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \\n\\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.';\r\n\tvar $ERR_SubscriptionInactive = 'Sorry this subscription is no longer active. Please contact your supervisor or SafetySkills support at support@safetyskills.com';\r\n\tvar $NOW = new Date();\r\n\r\n\t// Fields\r\n\tvar _cmi_completion_status = $CMI_Incomplete;\r\n\t//var _cmi_credit = 'credit';\r\n\tvar _cmi_entry = '';\r\n\tvar _cmi_exit = 'suspend';\r\n\t//var _cmi_launch_data = '';\r\n\tvar _cmi_learner_id = '~';\r\n\tvar _cmi_learner_name = 'Example, Anne E.';\r\n\tvar _cmi_location = '';\r\n\t//var _cmi_mode = 'normal';\r\n\tvar _cmi_score_raw = '';\r\n\tvar _cmi_session_time = '00:00:00';\r\n\t//var _cmi_success_status = 'unknown';\r\n\tvar _cmi_suspend_data = {};\r\n\tvar _cmiCommunication = $API_None;\r\n\tvar _cmiError = $CODE_GeneralError;\r\n\tvar _current_bullets = '';\r\n\tvar _current_captions = undefined;\r\n\tvar _current_frame = undefined;\r\n\tvar _current_kickback = undefined;\r\n\tvar _current_language = '';\r\n\tvar _debug = false;\r\n\tvar _demoFrameLimit = 0;\r\n\tvar _interface = {\r\n\t\tdisableNext: false,\r\n\t\tframeNumber: undefined,\r\n\t\tkickback: undefined,\r\n\t\ton: {\r\n\t\t\tanimate: undefined,\r\n\t\t\tmute: undefined,\r\n\t\t\tnextEnable: undefined,\r\n\t\t\tnextDisable: undefined,\r\n\t\t\tpause: undefined,\r\n\t\t\tplay: undefined,\r\n\t\t\tpreviousEnable: undefined,\r\n\t\t\tpreviousDisable: undefined,\r\n\t\t\tprogressBar: undefined,\r\n\t\t\tslidePlay: undefined,\r\n\t\t\tslidePause: undefined,\r\n\t\t\tslideMute: undefined,\r\n\t\t\tslideUnMute: undefined,\r\n\t\t\tscoFinish: undefined,\r\n\t\t\tunMute: undefined\r\n\t\t},\r\n\t\tpresentor: undefined,\r\n\t\ttitle: undefined\r\n\t};\r\n\tvar _isCompleted = false;\r\n\tvar _isKickback = false;\r\n\tvar _isMuted = false;\r\n\tvar _isNextEnabled = false;\r\n\tvar _isPaused = false;\r\n\tvar _isPreviousEnabled = true;\r\n\tvar _sco_frames = [];\r\n\tvar _sco_languages = [];\r\n\tvar _sco_quizTotal = 0;\r\n\tvar _sco_scaled_passing_score = undefined;\r\n\tvar _sco_XML = undefined;\r\n\t// Helpers\r\n\tvar _aicc = {\r\n\t\t_relayUrl: 'https://scorm.safetyskills.com/relay/',\r\n\t\t_version: '4.0',\r\n\t\tExit: function () {\r\n\t\t\t_ajax(this._relayUrl, {\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'ExitAU',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tPut: function () {\r\n\t\t\tvar status = _cmi_completion_status;\r\n\t\t\tvar query = '';\r\n\r\n\t\t\tif (!_isCompleted) {\r\n\t\t\t\tif (status === $CMI_Completed || status === $CMI_Passed) {\r\n\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\tif (this._relayUrl.indexOf('?') > -1) {\r\n\t\t\t\t\t\tquery = '&completed=true';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tquery = '?completed=true';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_cmi_exit !== '') {\r\n\t\t\t\tstatus = status + ',' + _cmi_exit;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(this._relayUrl + query, {\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'PutParam',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid,\r\n\t\t\t\t\taicc_data: '[CORE]\\nlesson_location=' + _cmi_location +\r\n\t\t\t\t\t'\\nscore=' + _cmi_score_raw +\r\n\t\t\t\t\t'\\nlesson_status=' + status +\r\n\t\t\t\t\t'\\ntime=' + _cmi_session_time +\r\n\t\t\t\t\t'\\n[CORE_LESSON]\\r\\nsuspend_data=' + JSON.stringify(_cmi_suspend_data)\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_cmiError = $CODE_NoError;\r\n\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t},\r\n\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_cmiError = $CODE_GeneralError;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tvar _ajax = function (url, options) {\r\n\t\tvar async = true;\r\n\t\tvar data = '';\r\n\t\tvar ie9 = !win.requestAnimationFrame;\r\n\t\tvar methods = {\r\n\t\t\tdone: function () { },\r\n\t\t\tfail: function () { }\r\n\t\t};\r\n\t\tvar type = 'POST';\r\n\t\tvar XHR = new XMLHttpRequest();\r\n\r\n\t\tif (options) {\r\n\t\t\tif (options.async === false) {\r\n\t\t\t\tasync = false;\r\n\t\t\t}\r\n\t\t\tif (options.cache === false) {\r\n\t\t\t\ttype = 'GET';\r\n\t\t\t\turl = url + '?_=' + new Date().getTime();\r\n\t\t\t}\r\n\t\t\tif (options.data) {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor (var i in options.data) {\r\n\t\t\t\t\tif (options.data.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tparts.push(encodeURIComponent(i) + '=' + encodeURIComponent(options.data[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdata = parts.join('&');\r\n\t\t\t}\r\n\t\t\tif (options.done) {\r\n\t\t\t\tmethods.done = options.done;\r\n\t\t\t}\r\n\t\t\tif (options.fail) {\r\n\t\t\t\tmethods.fail = options.fail;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (type === 'POST' && ie9) {\r\n\t\t\tXHR = new win.XDomainRequest();\r\n\t\t\tXHR.onload = function () {\r\n\t\t\t\tmethods.done.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onerror = function () {\r\n\t\t\t\tmethods.fail.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onprogress = function () { };\r\n\t\t\tXHR.ontimeout = function () { };\r\n\t\t}\r\n\t\tXHR.open(type, url, async);\r\n\t\tif (XHR.setRequestHeader) {\r\n\t\t\tXHR.setRequestHeader('content-type', 'application/x-www-form-urlencoded; charset=utf-8');\r\n\t\t\tXHR.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4) {\r\n\t\t\t\t\tif (this.status === 200) {\r\n\t\t\t\t\t\tmethods.done.call(methods, this);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmethods.fail.call(methods, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tsetTimeout(function () {\r\n\t\t\tXHR.send(data);\r\n\t\t}, 0);\r\n\t};\r\n\tvar _checkAutoPlay = function () { // Test for autoplay to determine if this is a mobile device\r\n\t\ttry {\r\n\t\t\tvar audio = new Audio();\r\n\t\t\t// this will only be triggered if autoplay works\r\n\t\t\taudio.addEventListener('play', function () {\r\n\t\t\t\twin.CanAutoplay = true;\r\n\t\t\t}, false);\r\n\t\t\taudio.volume = 0;\r\n\t\t\taudio.autoplay = true;\r\n\r\n\t\t\taudio.src = 'end-sound.mp3';\r\n\t\t} catch (e) { }\r\n\t};\r\n\tvar _createFrame = function (src) {\r\n\t\tvar frameName = _isKickback ? 'slide-kick' : 'slide-frame';\r\n\r\n\t\tif (src.indexOf('.swf') > -1) {\r\n\t\t\treturn '<embed fullscreen=\"yes\" height=\"100%\" src=\"' + src + '\" width=\"100%\" id=\"' + frameName + '\" name=\"' + frameName + '\" allowScriptAccess=\"sameDomain\" type=\"application/x-shockwave-flash\" quality=\"high\" wmode=\"opaque\"></embed>';\r\n\t\t}\r\n\t\treturn '<iframe height=\"100%\" id=\"' + frameName + '\" scrolling=\"no\" src=\"' + src + '\" style=\"border: none; overflow: hidden;\" width=\"100%\"></iframe>';\r\n\t};\r\n\tvar _exit = function () {\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\t// Default to prevent sending more data\r\n\t\t\t_cmi_learner_id = '~';\r\n\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase $API_Aicc:\r\n\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t_aicc.Exit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t_scorm.Terminate();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _getFrameNumber = function (fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _getMatchedFrame = function (fileName) {\r\n\t\tfor (var i = 0; i < _sco_frames.length; i++) {\r\n\t\t\tif (_sco_frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn _sco_frames[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _sco_frames[0];\r\n\t};\r\n\tvar _initFinish = function (callback) {\r\n\t\tif (_cmi_learner_id === '~') {\r\n\t\t\t_log(true, $ERR_NotInitialized);\r\n\t\t}\r\n\t\t// Set events and keybinds\r\n\t\twin.addEventListener('beforeunload', _exit);\r\n\r\n\t\tdoc.onkeydown = function (e) {\r\n\t\t\tvar keyPressed = false;\r\n\t\t\tif (e.which === 33) {\r\n\t\t\t\tif (_isNextEnabled || _debug) { // PageUp\r\n\t\t\t\t\t_next();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 34) { // PageDown\r\n\t\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t\t_previous();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 106) { // *\r\n\t\t\t\t_playToggle();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}\r\n\t\t\tif (e.which === 36) { // Home\r\n\t\t\t\t_replay();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}\r\n\t\t\tif (!_debug) {\r\n\t\t\t\tif (e.which === 119) { // F8\r\n\t\t\t\t\t_debug = true;\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t\t_log(false, 'Debug enabled');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (keyPressed) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Select language if location was stored\r\n\t\tif (_cmi_location && _cmi_location !== '') {\r\n\t\t\tvar folder = _cmi_location.split('/')[0];\r\n\t\t\tvar options = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current_language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\tcallback(_cmi_entry === 'resume');\r\n\t};\r\n\tvar _log = function (showUser, message) {\r\n\t\tif (showUser) {\r\n\t\t\tif (_debug) {\r\n\t\t\t\twin.console.log(message);\r\n\t\t\t} else {\r\n\t\t\t\talert(message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (win.console && win.console.log) {\r\n\t\t\t\twin.console.log(message);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _millisecondsToCMIDuration = function (timeDifference, version) {\r\n\t\t//Convert duration from milliseconds to 0000:00:00.00 format\r\n\t\tvar dtm = new Date();\r\n\t\tdtm.setTime(timeDifference);\r\n\t\tvar hms = '';\r\n\t\tvar h = '000' + Math.floor(timeDifference / 3600000);\r\n\t\tvar m = '0' + dtm.getMinutes();\r\n\t\tvar s = '0' + dtm.getSeconds();\r\n\t\tvar cs = '0' + Math.round(dtm.getMilliseconds() / 10);\r\n\t\thms = h.substr(h.length - 4) + ':' + m.substr(m.length - 2) + ':';\r\n\t\thms += s.substr(s.length - 2) + '.' + cs.substr(cs.length - 2);\r\n\r\n\t\tif (version === $API_Scorm2004) {\r\n\t\t\t//then convert hms to a timeinterval format\r\n\t\t\t//P[yY][mM][dD][T[hH][mM][s[.s]S]\r\n\t\t\t//example: PT1H5M (1 hour 5 miutes)\r\n\t\t\tvar aryPieces = hms.split(':');\r\n\t\t\tvar strHour = aryPieces[0];\r\n\t\t\tvar strMin = aryPieces[1];\r\n\t\t\tvar strSec = aryPieces[2];\r\n\r\n\t\t\thms = 'PT' + strHour + 'H' + strMin + 'M' + strSec + 'S';\r\n\t\t}\r\n\r\n\t\treturn hms;\r\n\t};\r\n\tvar _muteToggle = function () {\r\n\t\tif (_isMuted) {\r\n\t\t\tif (_interface.on.unMute) {\r\n\t\t\t\t_interface.on.unMute();\r\n\t\t\t}\r\n\t\t\t_isMuted = false;\r\n\t\t\tif (_interface.on.slideUnMute) {\r\n\t\t\t\t_interface.on.slideUnMute();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_interface.on.mute) {\r\n\t\t\t\t_interface.on.mute();\r\n\t\t\t}\r\n\t\t\t_isMuted = true;\r\n\t\t\tif (_interface.on.slideMute) {\r\n\t\t\t\t_interface.on.slideMute();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _next = function () {\r\n\t\tif (_demoFrameLimit && _demoFrameLimit < _getFrameNumber(_current_frame.getAttribute('file'))) {\r\n\t\t\talert($ERR_DemoExceeded);\r\n\t\t} else {\r\n\t\t\tvar nextFileName;\r\n\t\t\tvar found = false;\r\n\t\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames;\r\n\t\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file');\r\n\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tnextFileName = fileName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (currentFileName === fileName) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (found && nextFileName) {\r\n\t\t\t\tvar nextFrame = _getMatchedFrame(nextFileName);\r\n\t\t\t\tif (_update(nextFrame)) {\r\n\t\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t\t_current_kickback = nextFrame;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_current_frame = nextFrame;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_isKickback = false;\r\n\t\t\t\t\t_current_kickback = undefined;\r\n\t\t\t\t\t_update(_current_frame, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _parseFrames = function (currentLanguage) {\r\n\t\tvar topics = _sco_XML.getElementsByTagName('topics');\r\n\t\tvar selectedTopics;\r\n\r\n\t\tfor (var t = 0; t < topics.length; t++) {\r\n\t\t\tvar topic = topics[t];\r\n\t\t\tif (topic.getAttribute('lang') === currentLanguage) {\r\n\t\t\t\tselectedTopics = topic;\r\n\t\t\t\tdoc.title = selectedTopics.getAttribute('title');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_sco_frames = selectedTopics.getElementsByTagName('page');\r\n\r\n\t\t// Getting quiz count\r\n\t\t_sco_quizTotal = 0;\r\n\t\tfor (var f = 0; f < _sco_frames.length; f++) {\r\n\t\t\tvar frame = _sco_frames[f];\r\n\t\t\tif (frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\t_sco_quizTotal++;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _parseIni = function (string) {\r\n\t\tvar regex = {\r\n\t\t\tsection: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\r\n\t\t\tparam: /^\\s*([\\w\\.\\-\\_]+)\\s*=\\s*(.*?)\\s*$/,\r\n\t\t\tcomment: /^\\s*;.*$/\r\n\t\t};\r\n\t\tvar value = {};\r\n\t\t// Pulling just ini data\r\n\t\tvar lines = string.substring(string.indexOf('[')).split(/\\n|\\r\\n/g);\r\n\t\tvar section = null;\r\n\t\tlines.forEach(function (line) {\r\n\t\t\tif (regex.comment.test(line)) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if (regex.param.test(line)) {\r\n\t\t\t\tvar pMatch = line.match(regex.param);\r\n\t\t\t\tif (section) {\r\n\t\t\t\t\tvalue[section.toLowerCase()][pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue[pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t}\r\n\t\t\t} else if (regex.section.test(line)) {\r\n\t\t\t\tvar sMatch = line.match(regex.section);\r\n\t\t\t\tvalue[sMatch[1].toLowerCase()] = {};\r\n\t\t\t\tsection = sMatch[1].toLowerCase();\r\n\t\t\t} else if (line.length === 0 && section) {\r\n\t\t\t\tsection = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t};\r\n\tvar _playToggle = function () {\r\n\t\tif (_isPaused) {\r\n\t\t\tif (_interface.on.play) {\r\n\t\t\t\t_interface.on.play();\r\n\t\t\t}\r\n\t\t\t_isPaused = false;\r\n\t\t\tif (_interface.on.slidePlay) {\r\n\t\t\t\t_interface.on.slidePlay();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_interface.on.pause) {\r\n\t\t\t\t_interface.on.pause();\r\n\t\t\t}\r\n\t\t\t_isPaused = true;\r\n\t\t\tif (_interface.on.slidePause) {\r\n\t\t\t\t_interface.on.slidePause();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _previous = function () {\r\n\t\tvar previousFileName;\r\n\t\tvar frames = _isKickback ? _current_frame.getElementsByTagName('kickback') : _sco_frames;\r\n\t\tvar currentFileName = _isKickback ? _current_kickback.getAttribute('file') : _current_frame.getAttribute('file');\r\n\r\n\t\tif (frames[0].getAttribute('file') !== currentFileName) {\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (previousFileName && currentFileName === fileName) { break; }\r\n\t\t\t\tpreviousFileName = fileName;\r\n\t\t\t}\r\n\r\n\t\t\tvar previousFrame = _getMatchedFrame(previousFileName);\r\n\t\t\tif (_update(previousFrame)) {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_current_kickback = previousFrame;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current_frame = previousFrame;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _replay = function () {\r\n\t\tif (_isKickback) {\r\n\t\t\t_interface.kickback.html(_createFrame(_current_kickback.getAttribute('file')));\r\n\t\t} else {\r\n\t\t\t_interface.presentor.html(_createFrame(_current_frame.getAttribute('file')));\r\n\t\t}\r\n\t\tif (_interface.on.play) {\r\n\t\t\t_interface.on.play();\r\n\t\t\t_isPaused = false;\r\n\t\t}\r\n\t};\r\n\tvar _scorm = {\r\n\t\t_api: undefined,\r\n\t\t_getApi: function (w) {\r\n\t\t\tvar apiName = 'API';\r\n\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\tapiName = 'API_1484_11';\r\n\t\t\t}\r\n\r\n\t\t\tthis._api = this._scanParents(w);\r\n\r\n\t\t\tif (!this._api && (w.parent != null) && (w.parent != w)) {\r\n\t\t\t\tthis._api = this._scanParents(w.parent, apiName);\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._api && (w.opener != null)) {\r\n\t\t\t\tthis._api = this._scanParents(w.opener, apiName);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scanParents: function (w, apiName) {\r\n\t\t\tvar tries = 0;\r\n\t\t\twhile (!w[apiName] && (w.parent != null) && (w.parent != w)) {\r\n\t\t\t\ttries++;\r\n\t\t\t\tif (tries > 10) {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tw = w.parent;\r\n\t\t\t}\r\n\r\n\t\t\treturn w[apiName];\r\n\t\t},\r\n\t\tCommit: function () {\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Commit('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSCommit('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tGetLastError: function () {\r\n\t\t\tvar errCode = 100;\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\terrCode = this._api.GetLastError();\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn errCode.toString();\r\n\t\t},\r\n\t\tGetValue: function (element) {\r\n\t\t\tvar result = '';\r\n\t\t\tvar errCode = $CODE_GeneralError;\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status: //there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Entry:\r\n\t\t\t\t\t\t\telement = 'cmi.entry';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.total_time':\r\n\t\t\t\t\t\t\telement = 'cmi.total_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_StudentName:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_name';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_StudentId:\r\n\t\t\t\t\t\t\telement = 'cmi.learner_id';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference._children':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference.language':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference.language';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score._children':\r\n\t\t\t\t\t\t\telement = 'cmi.score._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.min':\r\n\t\t\t\t\t\t\telement = 'cmi.score.min';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.max':\r\n\t\t\t\t\t\t\telement = 'cmi.score.max';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = this._api.GetValue(element);\r\n\t\t\t\t\terrCode = this._api.GetLastError().toString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSGetValue(element);\r\n\t\t\t\t\terrCode = this._api.LMSGetLastError().toString();\r\n\t\t\t\t}\r\n\t\t\t\tif (errCode !== $CODE_NoError) {\r\n\t\t\t\t\tresult = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tInitialize: function () {\r\n\t\t\tvar result = 'false';\r\n\r\n\t\t\tthis._getApi(win);\r\n\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Initialize('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSInitialize('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tSetValue: function (element, value) {\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase $CORE_Status://there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\tif ((value === $CMI_Passed) || (value === $CMI_Failed)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.success_status';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((value === $CMI_Completed) || (value === $CMI_Incomplete)) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase $CORE_SessionTime:\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Location:\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_Exit:\r\n\t\t\t\t\t\t\telement = 'cmi.exit';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $CORE_ScoreRaw:\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tthis._api.SetValue('cmi.score.scaled', (value / 100));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._api.SetValue(element, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (element === $CORE_SuspendData) {\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._api.LMSSetValue(element, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t},\r\n\t\tTerminate: function () {\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (this._api) {\r\n\t\t\t\tif (_cmiCommunication === $API_Scorm2004) {\r\n\t\t\t\t\tresult = this._api.Terminate('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._api.LMSFinish('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t}\r\n\t};\r\n\tvar _toggleFrames = function (presentorOnTop) {\r\n\t\tif (win.CanAutoplay) {\r\n\t\t\t_interface.presentor.css('visibility', presentorOnTop ? 'visible' : 'hidden');\r\n\t\t\t_interface.kickback.css('visibility', presentorOnTop ? 'hidden' : 'visible');\r\n\t\t} else {\r\n\t\t\t_interface.presentor.css('display', presentorOnTop ? 'block' : 'none');\r\n\t\t\t_interface.kickback.css('display', presentorOnTop ? 'none' : 'block');\r\n\t\t}\r\n\t};\r\n\tvar _update = function (scoFrame, quizReturn) {\r\n\t\tvar file = scoFrame.getAttribute('file');\r\n\t\tvar frameNumber = _getFrameNumber(file);\r\n\t\tvar isEnd = scoFrame.getAttribute('end') === 'true';\r\n\t\tvar isSurvey = scoFrame.getAttribute('pType') === 'survey';\r\n\t\tvar isQuiz = scoFrame.getAttribute('pType') === 'quiz' || scoFrame.getAttribute('pType') === 'summary';\r\n\t\tvar narration = scoFrame.getElementsByTagName('narration')[0];\r\n\t\tvar bullets = scoFrame.getElementsByTagName('bullets')[0];\r\n\r\n\t\t// Set values in LMS\r\n\t\tif (_cmi_learner_id !== '~') {\r\n\t\t\tvar timeNow = new Date();\r\n\t\t\tvar n = timeNow.getTime() - $NOW.getTime();\r\n\t\t\tvar v = _millisecondsToCMIDuration(n, _cmiCommunication);\r\n\r\n\t\t\tif (!_isKickback) {\r\n\t\t\t\t_cmi_location = file;\r\n\t\t\t}\r\n\t\t\t_cmi_session_time = v.toString();\r\n\t\t\tif (isEnd || isSurvey) {\r\n\t\t\t\t_cmi_exit = '';\r\n\t\t\t\tif (_sco_scaled_passing_score) {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Passed;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_completion_status = $CMI_Completed;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase $API_Aicc:\r\n\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t_aicc.Put();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\tif (!_isKickback) {\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_Location, _cmi_location);\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_cmiError === $CODE_NoError) {\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_SessionTime, _cmi_session_time);\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_Exit, _cmi_exit);\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_Status, _cmi_completion_status);\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_ScoreRaw, _cmi_score_raw);\r\n\t\t\t\t\t\t_scorm.SetValue($CORE_SuspendData, _cmi_suspend_data);\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (_cmiError === $CODE_NoError) {\r\n\t\t\t\t\t\t_scorm.Commit();\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_log(true, $ERR_NotInitialized);\r\n\t\t}\r\n\r\n\t\tif (_cmiError === $CODE_NoError || _debug) {\r\n\t\t\t// Update UI\r\n\t\t\tif (_interface.frameNumber) {\r\n\t\t\t\t_interface.frameNumber.html(frameNumber + ' / ' + _sco_frames.length);\r\n\t\t\t}\r\n\r\n\t\t\tif (_interface.on.progressBar) {\r\n\t\t\t\tvar percent = (frameNumber / _sco_frames.length);\r\n\t\t\t\tif (isNaN(percent)) {\r\n\t\t\t\t\tpercent = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (percent > 1) {\r\n\t\t\t\t\tpercent = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_interface.on.progressBar(percent * 100);\r\n\t\t\t}\r\n\r\n\t\t\tif (narration && narration !== null) {\r\n\t\t\t\tif (win.XDomainRequest) {\r\n\t\t\t\t\t_current_captions = narration.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current_captions = new XMLSerializer().serializeToString(narration);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_current_captions = '';\r\n\t\t\t}\r\n\r\n\t\t\tif (bullets && bullets !== null) {\r\n\t\t\t\tif (win.XDomainRequest) {\r\n\t\t\t\t\t_current_bullets = bullets.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current_bullets = new XMLSerializer().serializeToString(bullets);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_current_bullets = '';\r\n\t\t\t}\r\n\r\n\t\t\tif (quizReturn) {\r\n\t\t\t\t_toggleFrames(true);\r\n\t\t\t\t_interface.kickback.empty();\r\n\r\n\t\t\t\t_isNextEnabled = false;\r\n\t\t\t\t_isPreviousEnabled = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_toggleFrames(false);\r\n\t\t\t\t\t_interface.kickback.html(_createFrame(file));\r\n\t\t\t\t\t_isPreviousEnabled = _current_frame.getElementsByTagName('kickback')[0].getAttribute('file') !== file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_toggleFrames(true);\r\n\t\t\t\t\t_interface.presentor.html(_createFrame(file));\r\n\t\t\t\t\t_isPreviousEnabled = _sco_frames[0].getAttribute('file') !== file;\r\n\t\t\t\t}\r\n\t\t\t\tif (!_isKickback && (isQuiz || (_interface.disableNext && frameNumber > 1 && !isSurvey))) {\r\n\t\t\t\t\t_isNextEnabled = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_isNextEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_isPreviousEnabled) {\r\n\t\t\t\t_interface.on.previousEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_interface.on.previousDisable();\r\n\t\t\t}\r\n\r\n\t\t\tif (_isNextEnabled) {\r\n\t\t\t\t_interface.on.nextEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_interface.on.nextDisable();\r\n\t\t\t}\r\n\r\n\t\t\tif (isQuiz || isSurvey || isEnd) {\r\n\t\t\t\tSS.SlideStart({});\r\n\t\t\t}\r\n\t\t\tif (_interface.on.play) {\r\n\t\t\t\t_interface.on.play();\r\n\t\t\t\t_isPaused = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (isEnd) {\r\n\t\t\t\t_interface.on.scoFinish();\r\n\t\t\t\twin.setTimeout(_exit, 1000);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\t_log(true, $ERR_CommunicationIssue);\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t// Begin calls\r\n\tSS.InitSco = function (callback) { // Using callback to prevent slide sync issues\r\n\t\tvar endAudio = doc.createElement('audio');\r\n\t\tendAudio.id = 'end';\r\n\t\tendAudio.src = 'end-sound.mp3';\r\n\t\tendAudio.preload = 'auto';\r\n\t\tendAudio.volume = 0;\r\n\t\tdoc.body.appendChild(endAudio);\r\n\t\t_checkAutoPlay();\r\n\r\n\t\tif (querystrings.debug) {\r\n\t\t\t_debug = true;\r\n\t\t\t_log(false, 'Debug Enabled');\r\n\t\t}\r\n\t\t// Scan for LMS communication format\r\n\t\tif (querystrings.demo) {\r\n\t\t\t_cmiCommunication = 'Demo';\r\n\t\t\t_debug = true;\r\n\t\t\t_demoFrameLimit = querystrings.demo;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url && querystrings.subid) {\r\n\t\t\t_cmiCommunication = $API_Aicc;\r\n\t\t\t_aicc._relayUrl += querystrings.subid + '?relay-url=' + querystrings.aicc_url;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None && querystrings.aicc_url && querystrings.local) {\r\n\t\t\t_cmiCommunication = $API_Local;\r\n\t\t\t_aicc._relayUrl = querystrings.aicc_url;\r\n\t\t}\r\n\t\tif (_cmiCommunication === $API_None) {\r\n\t\t\t_cmiCommunication = $API_Scorm12;\r\n\t\t}\r\n\t\t_log(false, _cmiCommunication + ' selected');\r\n\r\n\t\tvar author = doc.querySelector('meta[name=author]');\r\n\t\tvar julian = Math.floor(($NOW.getTime() / 86400000) - ($NOW.getTimezoneOffset() / 1440) + 2440587.5);\r\n\r\n\t\tif (author && author.getAttribute('content') < julian) {\r\n\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t} else {\r\n\t\t\tvar scoXMLPath = 'sco.xml';\r\n\t\t\tif (querystrings.sco) {\r\n\t\t\t\tscoXMLPath = querystrings.sco;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(scoXMLPath, {\r\n\t\t\t\tcache: false,\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_sco_XML = xhr.responseXML;\r\n\t\t\t\t\t_sco_languages = _sco_XML.getElementsByTagName('language');\r\n\t\t\t\t\t_current_language = _sco_XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t\t\t\tvar sco = _sco_XML.getElementsByTagName('sco')[0];\r\n\t\t\t\t\tif (sco.getAttribute('mastery-score')) {\r\n\t\t\t\t\t\t_sco_scaled_passing_score = sco.getAttribute('mastery-score');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\t\t\tcase $API_Aicc:\r\n\t\t\t\t\t\tcase $API_Local:\r\n\t\t\t\t\t\t\t_ajax(_aicc._relayUrl, {\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tcommand: 'GetParam',\r\n\t\t\t\t\t\t\t\t\tversion: _aicc._version,\r\n\t\t\t\t\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t\t\t\t\t\tvar scoData = _parseIni(xhr.responseText),\r\n\t\t\t\t\t\t\t\t\t\tstatus = scoData.core.lesson_status.toLowerCase();\r\n\r\n\t\t\t\t\t\t\t\t\tif ('n;i'.split(';').indexOf(status.slice(0, 1)) > -1) {\r\n\t\t\t\t\t\t\t\t\t\t_cmi_completion_status = $CMI_Incomplete;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t_cmi_completion_status = status;\r\n\t\t\t\t\t\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (status.indexOf(',') > -1) {\r\n\t\t\t\t\t\t\t\t\t\tvar entry = status.split(',')[1];\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (entry.slice(0, 1) === 'r') {\r\n\t\t\t\t\t\t\t\t\t\t\t_cmi_entry = 'resume';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (entry.slice(0, 1) === 'a') {\r\n\t\t\t\t\t\t\t\t\t\t\t_cmi_entry = 'ab-initio';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t_cmi_learner_id = scoData.core.student_id;\r\n\t\t\t\t\t\t\t\t\t_cmi_learner_name = scoData.core.student_name;\r\n\t\t\t\t\t\t\t\t\t_cmi_location = scoData.core.lesson_location;\r\n\r\n\t\t\t\t\t\t\t\t\tvar score = scoData.core.score.split(',');\r\n\t\t\t\t\t\t\t\t\t_cmi_score_raw = score[0];\r\n\t\t\t\t\t\t\t\t\tif (scoData.core_lesson && scoData.core_lesson.suspend_data) {\r\n\t\t\t\t\t\t\t\t\t\t_cmi_suspend_data = JSON.parse(scoData.core_lesson.suspend_data);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\t\t\t_aicc.Put();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\t\t\t\t\tif (xhr.status === 402) {\r\n\t\t\t\t\t\t\t\t\t\t_log(true, $ERR_SubscriptionInactive);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $API_Scorm12:\r\n\t\t\t\t\t\t\tif (_scorm.Initialize() === 'true') {\r\n\t\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_Status) === 'not attempted') {\r\n\t\t\t\t\t\t\t\t\t_scorm.SetValue($CORE_Status, $CMI_Incomplete);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_cmi_learner_id = _scorm.GetValue($CORE_StudentId);\r\n\t\t\t\t\t\t\t\t_cmi_learner_name = _scorm.GetValue($CORE_StudentName);\r\n\t\t\t\t\t\t\t\t_cmi_entry = _scorm.GetValue($CORE_Entry);\r\n\t\t\t\t\t\t\t\t_cmi_location = _scorm.GetValue($CORE_Location);\r\n\t\t\t\t\t\t\t\t_cmi_score_raw = _scorm.GetValue($CORE_ScoreRaw);\r\n\t\t\t\t\t\t\t\tif (_scorm.GetValue($CORE_SuspendData) !== '') {\r\n\t\t\t\t\t\t\t\t\t_cmi_suspend_data = JSON.parse(_scorm.GetValue($CORE_SuspendData));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase $API_TinCan:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Second step calls (GetLanguage -> SelectLanguage) Or (Resume)\r\n\tSS.GetLanguages = function () {\r\n\t\tvar languagesJSON = [];\r\n\r\n\t\tfor (var i = 0; i < _sco_languages.length; i++) {\r\n\t\t\tvar lang = _sco_languages[i];\r\n\t\t\tlanguagesJSON[i] = { 'id': lang.getAttribute('id'), 'label': lang.getAttribute('label') };\r\n\t\t}\r\n\r\n\t\treturn languagesJSON;\r\n\t};\r\n\r\n\tSS.SelectLanguage = function (language) {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play();\r\n\r\n\t\tif (language) {\r\n\t\t\t_current_language = language;\r\n\t\t} else {\r\n\t\t\t_current_language = _sco_XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\t_current_frame = _sco_frames[0];\r\n\t};\r\n\r\n\tSS.Resume = function () {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('end').play();\r\n\r\n\t\tif (_cmi_location && _cmi_location !== '') {\r\n\t\t\tvar folder = _cmi_location.split('/')[0],\r\n\t\t\t\toptions = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current_language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current_language);\r\n\r\n\t\tvar matchedPage = _getMatchedFrame(_cmi_location);\r\n\r\n\t\tif (matchedPage) {\r\n\t\t\t_current_frame = matchedPage;\r\n\t\t}\r\n\t};\r\n\r\n\t// Last step calls\r\n\tSS.GetLocalizedValues = function () {\r\n\t\tvar data = {};\r\n\t\tfor (var i = 0; i < _sco_languages.length; i++) {\r\n\t\t\tvar lang = _sco_languages[i];\r\n\t\t\tif (lang.getAttribute('id') === _current_language) {\r\n\t\t\t\tvar langElements = lang.childNodes;\r\n\t\t\t\tfor (var e = 0; e < langElements.length; e++) {\r\n\t\t\t\t\tif (langElements[e].textContent) {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].textContent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t};\r\n\r\n\tSS.InitInterface = function (options) {\r\n\t\t_interface.on.animate = options.onAnimate;\r\n\t\t_interface.on.progressBar = options.setProgressBar;\r\n\t\t_interface.on.scoFinish = options.onScoFinish;\r\n\r\n\t\t_interface.title = options.titleField;\r\n\t\t_interface.frameNumber = options.frameField;\r\n\r\n\t\t_interface.presentor = options.presentorFrame;\r\n\t\t_interface.kickback = options.kickbackFrame;\r\n\r\n\t\tif (_interface.title) {\r\n\t\t\t_interface.title.html(doc.title);\r\n\t\t}\r\n\r\n\t\t_update(_current_frame);\r\n\t};\r\n\r\n\tSS.Mute = function (options) {\r\n\t\t_interface.on.mute = options.mute;\r\n\t\t_interface.on.unMute = options.unMute;\r\n\r\n\t\t_interface.on.unMute(); // Default the button to un-muted\r\n\r\n\t\treturn _muteToggle;\r\n\t};\r\n\r\n\tSS.Next = function (options) {\r\n\t\t_interface.on.nextDisable = options.onDisable;\r\n\t\t_interface.on.nextEnable = options.onEnable;\r\n\r\n\t\tif (options.disableOnNext) {\r\n\t\t\t_interface.disableNext = options.disableOnNext;\r\n\t\t}\r\n\r\n\t\treturn _next;\r\n\t};\r\n\r\n\tSS.Play = function (options) {\r\n\t\t_interface.on.play = options.play;\r\n\t\t_interface.on.pause = options.pause;\r\n\r\n\t\treturn _playToggle;\r\n\t};\r\n\r\n\tSS.Previous = function (options) {\r\n\t\t_interface.on.previousDisable = options.onDisable;\r\n\t\t_interface.on.previousEnable = options.onEnable;\r\n\r\n\t\treturn _previous;\r\n\t};\r\n\r\n\tSS.Replay = function () {\r\n\t\treturn _replay;\r\n\t};\r\n\r\n\tSS.EndSco = function () {\r\n\t\treturn function () {\r\n\t\t\t_exit();\r\n\t\t\tif (win.top.opener) {\r\n\t\t\t\twin.top.close();\r\n\t\t\t} else {\r\n\t\t\t\t_log(true, 'Data saved, but window was not able to be closed');\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Slide functions\r\n\tSS.GetStudentName = function () {\r\n\t\treturn _cmi_learner_name;\r\n\t};\r\n\r\n\tSS.SubmitSurvey = function (survey) {\r\n\t\tif (survey) {\r\n\t\t\tvar data = {\r\n\t\t\t\tComments: survey.Comments,\r\n\t\t\t\tCourseName: doc.title,\r\n\t\t\t\tEmphasis: survey.Emphasis,\r\n\t\t\t\tIntro: survey.Intro,\r\n\t\t\t\tOverall: survey.Overall,\r\n\t\t\t\tScreenHeight: screen.height,\r\n\t\t\t\tScreenWidth: screen.width,\r\n\t\t\t\tStudent: '',\r\n\t\t\t\tSummaries: survey.Summaries,\r\n\t\t\t\tThoroughness: survey.Thoroughness,\r\n\t\t\t\tUrl: location.href,\r\n\t\t\t\tUserAgent: navigator.userAgent\r\n\t\t\t};\r\n\r\n\t\t\tif (survey.IsAnonymous) {\r\n\t\t\t\tdata.Student = 'anonymous';\r\n\t\t\t} else {\r\n\t\t\t\tdata.Student = _cmi_learner_name;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax('https://admin.safetyskills.com/api/survey', {\r\n\t\t\t\tdata: data,\r\n\t\t\t\tdone: function () {\r\n\t\t\t\t\t_log(false, 'Survey Data: ' + data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t};\r\n\r\n\tSS.SlideStart = function (options) {\r\n\t\t_interface.on.slidePause = options.slidePause;\r\n\t\t_interface.on.slidePlay = options.slidePlay;\r\n\t\t_interface.on.slideMute = options.slideMute;\r\n\t\t_interface.on.slideUnMute = options.slideUnMute;\r\n\r\n\t\tif (_interface.on.animate) {\r\n\t\t\t_interface.on.animate(_current_bullets, _current_captions);\r\n\t\t}\r\n\t\tif (_isMuted && _interface.on.slideMute) {\r\n\t\t\t_interface.on.slideMute();\r\n\t\t}\r\n\t};\r\n\r\n\tSS.SlideEnd = function () {\r\n\t\tif (!win.CanAutoplay) {\r\n\t\t\t_checkAutoPlay();\r\n\t\t}\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar end = doc.getElementById('end');\r\n\t\t\tend.volume = 1;\r\n\t\t\tend.play();\r\n\t\t\tif (win.CanAutoplay) {\r\n\t\t\t\t_interface.on.nextEnable();\r\n\t\t\t\t_isNextEnabled = true;\r\n\t\t\t} else {\r\n\t\t\t\t_next();\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\tSS.ScoreResults = function () {\r\n\t\tvar answers = 0;\r\n\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t}\r\n\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\treturn {\r\n\t\t\tanswered: answers,\r\n\t\t\tpassed: ratio >= _sco_scaled_passing_score,\r\n\t\t\tpercent: (ratio * 100).toFixed(2),\r\n\t\t\ttotal: _sco_quizTotal\r\n\t\t};\r\n\t};\r\n\r\n\tSS.QuizCorrect = function () {\r\n\t\tif (_sco_scaled_passing_score) {\r\n\t\t\tif (_current_frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi_suspend_data.answered = [];\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t_cmi_suspend_data.answered.push(_current_frame.getAttribute('file'));\r\n\r\n\t\t\t\t\tvar answers = 0;\r\n\t\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t};\r\n\r\n\tSS.QuizIncorrect = function () {\r\n\t\tvar firstKickback = _current_frame.getElementsByTagName('kickback')[0];\r\n\r\n\t\tif (_sco_scaled_passing_score) {\r\n\t\t\tvar index = -1;\r\n\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\tindex = _cmi_suspend_data.answered.indexOf(_current_frame.getAttribute('file'));\r\n\t\t\t}\r\n\t\t\tif (index > -1) {\r\n\t\t\t\t_cmi_suspend_data.answered.splice(index, 1);\r\n\r\n\t\t\t\tvar answers = 0;\r\n\t\t\t\tif (_cmi_suspend_data.answered) {\r\n\t\t\t\t\tanswers = _cmi_suspend_data.answered.length;\r\n\t\t\t\t}\r\n\t\t\t\tvar ratio = answers / _sco_quizTotal;\r\n\r\n\t\t\t\t_cmi_score_raw = (ratio * 100).toFixed(2);\r\n\t\t\t}\r\n\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\tvar matchedFrame = _getMatchedFrame(firstKickback.getAttribute('file'));\r\n\t\t\t\t_isKickback = false;\r\n\r\n\t\t\t\tif (_update(matchedFrame)) {\r\n\t\t\t\t\t_current_frame = matchedFrame;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_next();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\tvar matchedKickback = _getMatchedFrame(firstKickback.getAttribute('file'));\r\n\t\t\t\t_isKickback = true;\r\n\r\n\t\t\t\tif (_update(matchedKickback)) {\r\n\t\t\t\t\t_current_kickback = matchedKickback;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t_log(false, 'SS v2.9.3 Loaded');\r\n\r\n\treturn SS;\r\n})(this, this.document, this.querystrings || {});"],"sourceRoot":"/source/"}