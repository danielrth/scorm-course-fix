{"version":3,"sources":["ss.2.8.js"],"names":["this","CanAutoplay","NS","win","doc","querystrings","undefined","SS","_cmi","completion_status","credit","entry","exit","launch_data","learner_id","learner_name","location","mode","score","raw","session_time","success_status","suspend_data","_cmiCommunication","_cmiError","_current","bullets","captions","frame","kickback","language","nextEnabled","previousEnabled","_debug","_demoFrameLimit","_errorMessages","CommunicationIssue","DemoExceeded","NotInitialized","SubscriptionInactive","_interface","disableNext","frameNumber","on","animate","mute","nextEnable","nextDisable","pause","play","previousEnable","previousDisable","progressBar","slidePlay","slidePause","slideMute","slideUnMute","scoFinish","unMute","presentor","title","_isCompleted","_isKickback","_isMuted","_isPaused","_now","Date","_sco","frames","languages","path","quizTotal","scaled_passing_score","XML","_aicc","_relayUrl","_version","Exit","_ajax","data","command","version","session_id","aicc_sid","done","xhr","_log","responseText","Put","cmi","status","query","aicc_data","JSON","stringify","fail","Fail","statusCode","url","type","options","methods","XHR","XDomainRequest","XMLHttpRequest","cache","getTime","parts","i","hasOwnProperty","push","encodeURIComponent","join","open","setRequestHeader","onreadystatechange","readyState","call","setTimeout","send","onload","onerror","onprogress","ontimeout","_createFrame","src","frameName","indexOf","_exit","_scorm","Terminate","_getFrameNumber","fileName","length","getAttribute","_getMatchedFrame","_initFinish","callback","addEventListener","e","confirmationMessage","window","event","returnValue","onkeydown","keyPressed","which","shiftKey","ctrlKey","_next","_previous","_replay","preventDefault","folder","split","GetLanguages","id","_parseFrames","showUser","message","console","log","alert","_millisecondsToCMIDuration","timeDifference","dtm","setTime","hms","h","Math","floor","m","getMinutes","s","getSeconds","cs","round","getMilliseconds","substr","aryPieces","strHour","strMin","strSec","_muteToggle","nextFileName","found","getElementsByTagName","currentFileName","nextFrame","_update","currentLanguage","selectedTopics","topics","t","topic","f","_parseIni","string","regex","section","param","comment","value","lines","substring","forEach","line","test","pMatch","match","toLowerCase","sMatch","_playToggle","previousFileName","previousFrame","empty","append","_api","Commit","api","getApi","result","LMSCommit","toString","apiName","parent","scanParents","top","opener","GetErrorString","errorCode","LMSGetErrorString","GetLastError","errCode","LMSGetLastError","GetValue","element","LMSGetValue","Initialize","LMSInitialize","tries","SetValue","LMSSetValue","LMSFinish","scoFrame","quizReturn","file","isEnd","isSurvey","isQuiz","narration","timeNow","n","v","html","percent","isNaN","xml","XMLSerializer","serializeToString","hide","show","SlideStart","InitSco","endAudio","createElement","preload","body","appendChild","audio","Audio","autoplay","volume","noSound","debug","demo","aicc_url","subid","author","querySelector","julian","getTimezoneOffset","sco","responseXML","scoData","core","lesson_status","slice","student_id","student_name","lesson_location","core_lesson","parse","languagesJSON","lang","label","SelectLanguage","getElementById","Resume","matchedPage","GetLocalizedValues","langElements","childNodes","tagName","textContent","firstChild","nodeValue","InitInterface","onAnimate","setProgressBar","onScoFinish","titleField","frameField","presentorFrame","kickbackFrame","Mute","Next","onDisable","onEnable","disableOnNext","Play","Previous","Replay","EndSco","close","GetStudentName","SubmitSurvey","survey","Comments","CourseName","Emphasis","Intro","Overall","ScreenHeight","screen","height","ScreenWidth","width","Student","Summaries","Thoroughness","Url","href","UserAgent","navigator","userAgent","IsAnonymous","SlideEnd","ScoreResults","answers","answered","ratio","passed","toFixed","total","QuizCorrect","index","QuizIncorrect","firstKickback","splice","matchedFrame","matchedKickback","document"],"mappings":"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","file":"ss.2.8.js","sourcesContent":["this.CanAutoplay = false;\r\nthis.NS = (function (win, doc, querystrings, undefined) {\r\n\t'use strict';\r\n\r\n\tvar SS = {};\r\n\t// Fields\r\n\tvar _cmi = {\r\n\t\tcompletion_status: 'incomplete',\r\n\t\tcredit: 'credit',\r\n\t\tentry: '',\r\n\t\texit: 'suspend',\r\n\t\tlaunch_data: '',\r\n\t\tlearner_id: '~',\r\n\t\tlearner_name: 'Example, Anne E.',\r\n\t\tlocation: '',\r\n\t\tmode: 'normal',\r\n\t\tscore: {\r\n\t\t\traw: ''\r\n\t\t},\r\n\t\tsession_time: '00:00:00',\r\n\t\tsuccess_status: 'unknown',\r\n\t\tsuspend_data: {}\r\n\t};\r\n\tvar _cmiCommunication = 'none';\r\n\tvar _cmiError = '100';\r\n\tvar _current = {\r\n\t\tbullets: '',\r\n\t\tcaptions: undefined,\r\n\t\tframe: undefined,\r\n\t\tkickback: undefined,\r\n\t\tlanguage: '',\r\n\t\tnextEnabled: false,\r\n\t\tpreviousEnabled: true\r\n\t};\r\n\tvar _debug = false;\r\n\tvar _demoFrameLimit = 0;\r\n\tvar _errorMessages = {\r\n\t\tCommunicationIssue: ' : An error occurred with the action you performed, if you continue to get this message please close and restart the course. \\n\\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.',\r\n\t\tDemoExceeded: 'Thank you for watching this course demo!',\r\n\t\tNotInitialized: 'This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \\n\\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.',\r\n\t\tSubscriptionInactive: 'Sorry this subscription is no longer active. Please contact support at https://safetyskills.com/support'\r\n\t};\r\n\tvar _interface = {\r\n\t\tdisableNext: false,\r\n\t\tframeNumber: undefined,\r\n\t\tkickback: undefined,\r\n\t\ton: {\r\n\t\t\tanimate: undefined,\r\n\t\t\tmute: undefined,\r\n\t\t\tnextEnable: undefined,\r\n\t\t\tnextDisable: undefined,\r\n\t\t\tpause: undefined,\r\n\t\t\tplay: undefined,\r\n\t\t\tpreviousEnable: undefined,\r\n\t\t\tpreviousDisable: undefined,\r\n\t\t\tprogressBar: undefined,\r\n\t\t\tslidePlay: undefined,\r\n\t\t\tslidePause: undefined,\r\n\t\t\tslideMute: undefined,\r\n\t\t\tslideUnMute: undefined,\r\n\t\t\tscoFinish: undefined,\r\n\t\t\tunMute: undefined\r\n\t\t},\r\n\t\tpresentor: undefined,\r\n\t\ttitle: undefined\r\n\t};\r\n\tvar _isCompleted = false;\r\n\tvar _isKickback = false;\r\n\tvar _isMuted = false;\r\n\tvar _isPaused = false;\r\n\tvar _now = new Date();\r\n\tvar _sco = {\r\n\t\tframes: [],\r\n\t\tlanguages: [],\r\n\t\tpath: 'sco.xml',\r\n\t\tquizTotal: 0,\r\n\t\tscaled_passing_score: undefined,\r\n\t\ttitle: 'Example Course',\r\n\t\tXML: undefined\r\n\t};\r\n\t// Helpers\r\n\tvar _aicc = {\r\n\t\t_relayUrl: 'https://admin.safetyskills.com/api/aicc-relay/',\r\n\t\t_version: '4.0',\r\n\t\tExit: function () {\r\n\t\t\t_ajax(this._relayUrl, 'POST', {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'ExitAU',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tPut: function (cmi) {\r\n\t\t\tvar status = cmi.completion_status;\r\n\t\t\tvar query = '';\r\n\r\n\t\t\tif (!_isCompleted) {\r\n\t\t\t\tif (status === 'completed' || status === 'passed') {\r\n\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\tquery = '&completed=true';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (cmi.exit && cmi.exit !== '') {\r\n\t\t\t\tstatus = status + ',' + cmi.exit;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(this._relayUrl + query, 'POST', {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcommand: 'PutParam',\r\n\t\t\t\t\tversion: this._version,\r\n\t\t\t\t\tsession_id: querystrings.aicc_sid,\r\n\t\t\t\t\taicc_data: '[CORE]\\nlesson_location=' + cmi.location +\r\n\t\t\t\t\t'\\nscore=' + cmi.score.raw +\r\n\t\t\t\t\t'\\nlesson_status=' + status +\r\n\t\t\t\t\t'\\ntime=' + cmi.session_time +\r\n\t\t\t\t\t'\\n[CORE_LESSON]\\r\\nsuspend_data=' + JSON.stringify(cmi.suspend_data)\r\n\t\t\t\t},\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_cmiError = '0';\r\n\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t},\r\n\t\t\t\tfail: this.Fail\r\n\t\t\t});\r\n\t\t},\r\n\t\tFail: function (xhr) {\r\n\t\t\tif (xhr.statusCode === 401) {\r\n\t\t\t\t_log(true, _errorMessages.SubscriptionInactive);\r\n\t\t\t} else {\r\n\t\t\t\t_cmiError = '100';\r\n\t\t\t\t_cmi.learner_id = '~';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _ajax = function (url, type, options) {\r\n\t\tvar data = '';\r\n\t\tvar methods = {\r\n\t\t\tdone: function () { },\r\n\t\t\tfail: function () { }\r\n\t\t};\r\n\t\tvar XHR = type === 'POST' && win.XDomainRequest ? new win.XDomainRequest() : new XMLHttpRequest();\r\n\r\n\t\tif (options) {\r\n\t\t\tif (options.cache === false) {\r\n\t\t\t\turl = url + '?_=' + new Date().getTime();\r\n\t\t\t}\r\n\t\t\tif (options.data) {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor (var i in options.data) {\r\n\t\t\t\t\tif (options.data.hasOwnProperty(i)) {\r\n\t\t\t\t\t\tparts.push(encodeURIComponent(i) + '=' + encodeURIComponent(options.data[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdata = parts.join('&');\r\n\t\t\t}\r\n\t\t\tif (options.done) {\r\n\t\t\t\tmethods.done = options.done;\r\n\t\t\t}\r\n\t\t\tif (options.fail) {\r\n\t\t\t\tmethods.fail = options.fail;\r\n\t\t\t}\r\n\t\t}\r\n\t\tXHR.open(type, url);\r\n\t\tif (XHR.setRequestHeader) {\r\n\t\t\tXHR.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n\t\t\tXHR.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4) {\r\n\t\t\t\t\tif (this.status === 200) {\r\n\t\t\t\t\t\tmethods.done.call(methods, this);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmethods.fail.call(methods, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tXHR.send(data);\r\n\t\t\t}, 0);\r\n\t\t} else {\r\n\t\t\tXHR.onload = function () {\r\n\t\t\t\tmethods.done.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onerror = function () {\r\n\t\t\t\tmethods.fail.call(methods, XHR);\r\n\t\t\t};\r\n\t\t\tXHR.onprogress = function () { };\r\n\t\t\tXHR.ontimeout = function () { };\r\n\t\t\tXHR.onerror = function () { };\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tXHR.send(data);\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t};\r\n\tvar _createFrame = function (src) {\r\n\t\tvar frameName = _isKickback ? 'slide-kick' : 'slide-frame';\r\n\r\n\t\tif (src.indexOf('.swf') > -1) {\r\n\t\t\treturn '<embed fullscreen=\"yes\" height=\"100%\" src=\"' + src + '\" width=\"100%\" id=\"' + frameName + '\" name=\"' + frameName + '\" allowScriptAccess=\"sameDomain\" type=\"application/x-shockwave-flash\" quality=\"high\" wmode=\"opaque\"></embed>';\r\n\t\t}\r\n\t\treturn '<iframe height=\"100%\" id=\"' + frameName + '\" scrolling=\"no\" src=\"' + src + '\" style=\"border: none; overflow: hidden;\" width=\"100%\"></iframe>';\r\n\t};\r\n\tvar _exit = function () {\r\n\t\tif (_cmi.learner_id !== '~') {\r\n\t\t\t// Default to prevent sending more data\r\n\t\t\t_cmi.learner_id = '~';\r\n\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase 'AICC':\r\n\t\t\t\t\t_aicc.Exit();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'SCORM':\r\n\t\t\t\t\t_scorm.Terminate();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'TinCan':\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t_log(false, 'Course Terminated');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\tvar _getFrameNumber = function (fileName) {\r\n\t\tfor (var i = 0; i < _sco.frames.length; i++) {\r\n\t\t\tif (_sco.frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _getMatchedFrame = function (fileName) {\r\n\t\tfor (var i = 0; i < _sco.frames.length; i++) {\r\n\t\t\tif (_sco.frames[i].getAttribute('file') === fileName) {\r\n\t\t\t\treturn _sco.frames[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _sco.frames[0];\r\n\t};\r\n\tvar _initFinish = function (callback) {\r\n\t\tif (_cmi.learner_id === '~') {\r\n\t\t\t_log(true, _errorMessages.NotInitialized);\r\n\t\t}\r\n\t\t// Set events and keybinds\r\n\t\twin.addEventListener('beforeunload', function (e) {\r\n\t\t\tif (_exit()) {\r\n\t\t\t\tvar confirmationMessage = 'Data saved, click to continue...';\r\n\t\t\t\t(e || window.event).returnValue = confirmationMessage;\r\n\t\t\t\treturn confirmationMessage;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdoc.onkeydown = function (e) {\r\n\t\t\tvar keyPressed = false;\r\n\t\t\tif (e.which === 39) {\r\n\t\t\t\tif (_current.nextEnabled || (_debug && e.shiftKey && e.ctrlKey)) {\r\n\t\t\t\t\t_next();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (e.which === 37) {\r\n\t\t\t\tif (_current.previousEnabled) {\r\n\t\t\t\t\t_previous();\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*if (e.which === 32) {\r\n\t\t\t\t_playToggle();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}*/\r\n\t\t\tif (e.which === 38) {\r\n\t\t\t\t_replay();\r\n\t\t\t\tkeyPressed = true;\r\n\t\t\t}\r\n\t\t\tif (!_debug) {\r\n\t\t\t\tif (e.which === 119) {\r\n\t\t\t\t\t_debug = true;\r\n\t\t\t\t\tkeyPressed = true;\r\n\t\t\t\t\t_log(false, 'Debug enabled');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (keyPressed) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Select language if location was stored\r\n\t\tif (_cmi.location && _cmi.location !== '') {\r\n\t\t\tvar folder = _cmi.location.split('/')[0];\r\n\t\t\tvar options = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current.language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t_parseFrames(_current.language);\r\n\t\tdoc.title = _sco.title;\r\n\r\n\t\tcallback(_cmi.entry === 'resume');\r\n\t};\r\n\tvar _log = function (showUser, message) {\r\n\t\tif (showUser) {\r\n\t\t\tif (_debug) {\r\n\t\t\t\tconsole.log(message);\r\n\t\t\t} else {\r\n\t\t\t\talert(message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (console && console.log) {\r\n\t\t\t\tconsole.log(message);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _millisecondsToCMIDuration = function (timeDifference, version) {\r\n\t\t//Convert duration from milliseconds to 0000:00:00.00 format\r\n\t\tvar dtm = new Date();\r\n\t\tdtm.setTime(timeDifference);\r\n\t\tvar hms = '';\r\n\t\tvar h = '000' + Math.floor(timeDifference / 3600000);\r\n\t\tvar m = '0' + dtm.getMinutes();\r\n\t\tvar s = '0' + dtm.getSeconds();\r\n\t\tvar cs = '0' + Math.round(dtm.getMilliseconds() / 10);\r\n\t\thms = h.substr(h.length - 4) + ':' + m.substr(m.length - 2) + ':';\r\n\t\thms += s.substr(s.length - 2) + '.' + cs.substr(cs.length - 2);\r\n\r\n\t\tif (version === '2004') {\r\n\t\t\t//then convert hms to a timeinterval format\r\n\t\t\t//P[yY][mM][dD][T[hH][mM][s[.s]S]\r\n\t\t\t//example: PT1H5M (1 hour 5 miutes)\r\n\t\t\tvar aryPieces = hms.split(':');\r\n\t\t\tvar strHour = aryPieces[0];\r\n\t\t\tvar strMin = aryPieces[1];\r\n\t\t\tvar strSec = aryPieces[2];\r\n\r\n\t\t\thms = 'PT' + strHour + 'H' + strMin + 'M' + strSec + 'S';\r\n\t\t}\r\n\r\n\t\treturn hms;\r\n\t};\r\n\tvar _muteToggle = function () {\r\n\t\tif (_isMuted) {\r\n\t\t\tif (_interface.on.unMute) {\r\n\t\t\t\t_interface.on.unMute();\r\n\t\t\t}\r\n\t\t\t_isMuted = false;\r\n\t\t\tif (_interface.on.slideUnMute) {\r\n\t\t\t\t_interface.on.slideUnMute();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_interface.on.mute) {\r\n\t\t\t\t_interface.on.mute();\r\n\t\t\t}\r\n\t\t\t_isMuted = true;\r\n\t\t\tif (_interface.on.slideMute) {\r\n\t\t\t\t_interface.on.slideMute();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _next = function () {\r\n\t\tif (_demoFrameLimit && _demoFrameLimit < _getFrameNumber(_current.frame.getAttribute('file'))) {\r\n\t\t\talert(_errorMessages.DemoExceeded);\r\n\t\t} else {\r\n\t\t\tvar nextFileName;\r\n\t\t\tvar found = false;\r\n\t\t\tvar frames = _isKickback ? _current.frame.getElementsByTagName('kickback') : _sco.frames;\r\n\t\t\tvar currentFileName = _isKickback ? _current.kickback.getAttribute('file') : _current.frame.getAttribute('file');\r\n\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tnextFileName = fileName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (currentFileName === fileName) {\r\n\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (found && nextFileName) {\r\n\t\t\t\tvar nextFrame = _getMatchedFrame(nextFileName);\r\n\t\t\t\tif (_update(nextFrame)) {\r\n\t\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t\t_current.kickback = nextFrame;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_current.frame = nextFrame;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_isKickback = false;\r\n\t\t\t\t\t_current.kickback = undefined;\r\n\t\t\t\t\t_update(_current.frame, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _parseFrames = function (currentLanguage) {\r\n\t\tvar topics = _sco.XML.getElementsByTagName('topics');\r\n\t\tvar selectedTopics;\r\n\r\n\t\tfor (var t = 0; t < topics.length; t++) {\r\n\t\t\tvar topic = topics[t];\r\n\t\t\tif (topic.getAttribute('lang') === currentLanguage) {\r\n\t\t\t\tselectedTopics = topic;\r\n\t\t\t\t_sco.title = selectedTopics.getAttribute('title');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_sco.frames = selectedTopics.getElementsByTagName('page');\r\n\r\n\t\t// Getting quiz count\r\n\t\t_sco.quizTotal = 0;\r\n\t\tfor (var f = 0; f < _sco.frames.length; f++) {\r\n\t\t\tvar frame = _sco.frames[f];\r\n\t\t\tif (frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\t_sco.quizTotal++;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _parseIni = function (string) {\r\n\t\tvar regex = {\r\n\t\t\tsection: /^\\s*\\[\\s*([^\\]]*)\\s*\\]\\s*$/,\r\n\t\t\tparam: /^\\s*([\\w\\.\\-\\_]+)\\s*=\\s*(.*?)\\s*$/,\r\n\t\t\tcomment: /^\\s*;.*$/\r\n\t\t};\r\n\t\tvar value = {};\r\n\t\t// Pulling just ini data\r\n\t\tvar lines = string.substring(string.indexOf('[')).split(/\\n|\\r\\n/g);\r\n\t\tvar section = null;\r\n\t\tlines.forEach(function (line) {\r\n\t\t\tif (regex.comment.test(line)) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if (regex.param.test(line)) {\r\n\t\t\t\tvar pMatch = line.match(regex.param);\r\n\t\t\t\tif (section) {\r\n\t\t\t\t\tvalue[section.toLowerCase()][pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue[pMatch[1].toLowerCase()] = pMatch[2];\r\n\t\t\t\t}\r\n\t\t\t} else if (regex.section.test(line)) {\r\n\t\t\t\tvar sMatch = line.match(regex.section);\r\n\t\t\t\tvalue[sMatch[1].toLowerCase()] = {};\r\n\t\t\t\tsection = sMatch[1].toLowerCase();\r\n\t\t\t} else if (line.length === 0 && section) {\r\n\t\t\t\tsection = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t};\r\n\tvar _playToggle = function () {\r\n\t\tif (_isPaused) {\r\n\t\t\tif (_interface.on.play) {\r\n\t\t\t\t_interface.on.play();\r\n\t\t\t}\r\n\t\t\t_isPaused = false;\r\n\t\t\tif (_interface.on.slidePlay) {\r\n\t\t\t\t_interface.on.slidePlay();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (_interface.on.pause) {\r\n\t\t\t\t_interface.on.pause();\r\n\t\t\t}\r\n\t\t\t_isPaused = true;\r\n\t\t\tif (_interface.on.slidePause) {\r\n\t\t\t\t_interface.on.slidePause();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _previous = function () {\r\n\t\tvar previousFileName;\r\n\t\tvar frames = _isKickback ? _current.frame.getElementsByTagName('kickback') : _sco.frames;\r\n\t\tvar currentFileName = _isKickback ? _current.kickback.getAttribute('file') : _current.frame.getAttribute('file');\r\n\r\n\t\tif (frames[0].getAttribute('file') !== currentFileName) {\r\n\t\t\tfor (var i = 0; i < frames.length; i++) {\r\n\t\t\t\tvar fileName = frames[i].getAttribute('file');\r\n\t\t\t\tif (previousFileName && currentFileName === fileName) { break; }\r\n\t\t\t\tpreviousFileName = fileName;\r\n\t\t\t}\r\n\r\n\t\t\tvar previousFrame = _getMatchedFrame(previousFileName);\r\n\t\t\tif (_update(previousFrame)) {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_current.kickback = previousFrame;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current.frame = previousFrame;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar _replay = function () {\r\n\t\tif (_isKickback) {\r\n\t\t\t_interface.kickback.empty();\r\n\t\t\t_interface.kickback.append(_createFrame(_current.kickback.getAttribute('file')));\r\n\t\t} else {\r\n\t\t\t_interface.presentor.empty();\r\n\t\t\t_interface.presentor.append(_createFrame(_current.frame.getAttribute('file')));\r\n\t\t}\r\n\t\tif (_interface.on.play) {\r\n\t\t\t_interface.on.play();\r\n\t\t\t_isPaused = false;\r\n\t\t}\r\n\t};\r\n\tvar _scorm = {\r\n\t\t_api: undefined,\r\n\t\tCommit: function () {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\tresult = api.Commit('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = api.LMSCommit('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tgetApi: function () {\r\n\t\t\tif (!this._api) {\r\n\t\t\t\tvar apiName = 'API';\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\tapiName = 'API_1484_11';\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif ((win.parent !== null) && (win.parent !== win)) {\r\n\t\t\t\t\t\tthis._api = this.scanParents(win.parent, apiName);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((this._api === undefined) && (win.top.opener !== null)) {\r\n\t\t\t\t\t\tthis._api = this.scanParents(win.top.opener, apiName);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this._api;\r\n\t\t},\r\n\t\tGetErrorString: function (errorCode) {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar result = '';\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\tresult = api.GetErrorString(errorCode);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = api.LMSGetErrorString(errorCode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tGetLastError: function () {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar errCode = 100;\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\terrCode = api.GetLastError();\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrCode = api.LMSGetLastError();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn errCode.toString();\r\n\t\t},\r\n\t\tGetValue: function (element) {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar result = '';\r\n\t\t\tvar errCode = '100';\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase 'cmi.core.lesson_status': //there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.entry':\r\n\t\t\t\t\t\t\telement = 'cmi.entry';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.session_time':\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.total_time':\r\n\t\t\t\t\t\t\telement = 'cmi.total_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.lesson_location':\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.student_name':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_name';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.student_id':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_id';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference._children':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.student_preference.language':\r\n\t\t\t\t\t\t\telement = 'cmi.learner_preference.language';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score._children':\r\n\t\t\t\t\t\t\telement = 'cmi.score._children';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.raw':\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.min':\r\n\t\t\t\t\t\t\telement = 'cmi.score.min';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.max':\r\n\t\t\t\t\t\t\telement = 'cmi.score.max';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = api.GetValue(element);\r\n\t\t\t\t\terrCode = api.GetLastError().toString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = api.LMSGetValue(element);\r\n\t\t\t\t\terrCode = api.LMSGetLastError().toString();\r\n\t\t\t\t}\r\n\t\t\t\tif (errCode !== '0') {\r\n\t\t\t\t\tresult = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tInitialize: function () {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\tresult = api.Initialize('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = api.LMSInitialize('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t},\r\n\t\tscanParents: function (win, apiName) {\r\n\t\t\tvar tries = 0;\r\n\t\t\twhile ((win[apiName] === null) && (win.parent !== null) && (win.parent !== win)) {\r\n\t\t\t\ttries++;\r\n\t\t\t\tif (tries > 50) {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\twin = win.parent;\r\n\t\t\t}\r\n\r\n\t\t\treturn win[apiName];\r\n\t\t},\r\n\t\tSetValue: function (element, value) {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\t//convert data model elements from SCORM 1.2 to 2004\r\n\t\t\t\t\tswitch (element) {\r\n\t\t\t\t\t\tcase 'cmi.core.lesson_status'://there is not lesson_status in SCORM 2004 it was replaced with completion_status and success_status\r\n\t\t\t\t\t\t\tif ((value === 'passed') || (value === 'failed')) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.success_status';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ((value === 'completed') || (value === 'incomplete')) {\r\n\t\t\t\t\t\t\t\telement = 'cmi.completion_status';\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'cmi.core.session_time':\r\n\t\t\t\t\t\t\telement = 'cmi.session_time';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.lesson_location':\r\n\t\t\t\t\t\t\telement = 'cmi.location';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.exit':\r\n\t\t\t\t\t\t\telement = 'cmi.exit';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'cmi.core.score.raw':\r\n\t\t\t\t\t\t\telement = 'cmi.score.raw';\r\n\t\t\t\t\t\t\tapi.SetValue('cmi.score.scaled', (value / 100));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tapi.SetValue(element, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (element === 'cmi.suspend_data') {\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tapi.LMSSetValue(element, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t},\r\n\t\tTerminate: function () {\r\n\t\t\tvar api = this.getApi();\r\n\t\t\tvar result = 'false';\r\n\t\t\tif (api) {\r\n\t\t\t\tif (_cmiCommunication === '2004') {\r\n\t\t\t\t\tresult = api.Terminate('');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = api.LMSFinish('');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result.toString();\r\n\t\t}\r\n\t};\r\n\tvar _update = function (scoFrame, quizReturn) {\r\n\t\tvar file = scoFrame.getAttribute('file'),\r\n\t\t\tframeNumber = _getFrameNumber(file),\r\n\t\t\tisEnd = scoFrame.getAttribute('end') === 'true',\r\n\t\t\tisSurvey = scoFrame.getAttribute('pType') === 'survey',\r\n\t\t\tisQuiz = scoFrame.getAttribute('pType') === 'quiz' || scoFrame.getAttribute('pType') === 'summary',\r\n\t\t\tnarration = scoFrame.getElementsByTagName('narration')[0],\r\n\t\t\tbullets = scoFrame.getElementsByTagName('bullets')[0];\r\n\r\n\t\t// Set values in LMS\r\n\t\tif (_cmi.learner_id !== '~') {\r\n\t\t\tvar timeNow = new Date(),\r\n\t\t\t\tn = timeNow.getTime() - _now.getTime(),\r\n\t\t\t\tv = _millisecondsToCMIDuration(n, _cmiCommunication);\r\n\r\n\t\t\tif (!_isKickback) {\r\n\t\t\t\t_cmi.location = file;\r\n\t\t\t}\r\n\t\t\t_cmi.session_time = v.toString();\r\n\t\t\tif (isEnd || isSurvey) {\r\n\t\t\t\t_cmi.exit = '';\r\n\t\t\t\tif (_sco.scaled_passing_score) {\r\n\t\t\t\t\t_cmi.completion_status = 'passed';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi.completion_status = 'completed';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\tcase 'AICC':\r\n\t\t\t\t\t_aicc.Put(_cmi);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'SCORM':\r\n\t\t\t\t\tif (!_isKickback) {\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.core.lesson_location', _cmi.location);\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_cmiError === '0') {\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.core.session_time', _cmi.session_time);\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.core.exit', _cmi.exit);\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.core.lesson_status', _cmi.completion_status);\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.core.score.raw', _cmi.score.raw);\r\n\t\t\t\t\t\t_scorm.SetValue('cmi.suspend_data', _cmi.suspend_data);\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (_cmiError === '0') {\r\n\t\t\t\t\t\t_scorm.Commit();\r\n\t\t\t\t\t\t_cmiError = _scorm.GetLastError();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'TinCan':\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t_log(true, _errorMessages.NotInitialized);\r\n\t\t}\r\n\r\n\t\tif (_cmiError === '0' || _debug) {\r\n\t\t\t// Update UI\r\n\t\t\tif (_interface.frameNumber) {\r\n\t\t\t\t_interface.frameNumber.html(frameNumber + ' / ' + _sco.frames.length);\r\n\t\t\t}\r\n\r\n\t\t\tif (_interface.on.progressBar) {\r\n\t\t\t\tvar percent = (frameNumber / _sco.frames.length);\r\n\t\t\t\tif (isNaN(percent)) {\r\n\t\t\t\t\tpercent = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (percent > 1) {\r\n\t\t\t\t\tpercent = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_interface.on.progressBar(percent * 100);\r\n\t\t\t}\r\n\t\t\tif (narration && narration !== null) {\r\n\t\t\t\tif (win.XDomainRequest) {\r\n\t\t\t\t\t_current.captions = narration.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current.captions = new XMLSerializer().serializeToString(narration);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_current.captions = '';\r\n\t\t\t}\r\n\t\t\tif (bullets && bullets !== null) {\r\n\t\t\t\tif (win.XDomainRequest) {\r\n\t\t\t\t\t_current.bullets = bullets.xml;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current.bullets = new XMLSerializer().serializeToString(bullets);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_current.bullets = '';\r\n\t\t\t}\r\n\t\t\tif (quizReturn) {\r\n\t\t\t\t_interface.kickback.empty();\r\n\t\t\t\t_interface.kickback.hide();\r\n\r\n\t\t\t\t_interface.presentor.show();\r\n\r\n\t\t\t\t_current.nextEnabled = false;\r\n\t\t\t\t_current.previousEnabled = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\tif (_interface.kickback) {\r\n\t\t\t\t\t\t_interface.kickback.show();\r\n\t\t\t\t\t\t_interface.presentor.hide();\r\n\r\n\t\t\t\t\t\t_interface.kickback.empty();\r\n\t\t\t\t\t\t_interface.kickback.append(_createFrame(file));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_interface.presentor) {\r\n\t\t\t\t\t\t_interface.kickback.hide();\r\n\t\t\t\t\t\t_interface.presentor.show();\r\n\r\n\t\t\t\t\t\t_interface.presentor.empty();\r\n\t\t\t\t\t\t_interface.presentor.append(_createFrame(file));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (_isKickback) {\r\n\t\t\t\t\t_current.previousEnabled = _current.frame.getElementsByTagName('kickback')[0].getAttribute('file') !== file;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current.previousEnabled = _sco.frames[0].getAttribute('file') !== file;\r\n\t\t\t\t}\r\n\t\t\t\tif (!_isKickback && (isQuiz || (_interface.disableNext && frameNumber > 1 && !isSurvey))) {\r\n\t\t\t\t\t_current.nextEnabled = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_current.nextEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (_current.previousEnabled) {\r\n\t\t\t\t_interface.on.previousEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_interface.on.previousDisable();\r\n\t\t\t}\r\n\t\t\tif (_current.nextEnabled) {\r\n\t\t\t\t_interface.on.nextEnable();\r\n\t\t\t} else {\r\n\t\t\t\t_interface.on.nextDisable();\r\n\t\t\t}\r\n\r\n\t\t\tif (isQuiz || isSurvey || isEnd) {\r\n\t\t\t\tSS.SlideStart({});\r\n\t\t\t}\r\n\t\t\tif (_interface.on.play) {\r\n\t\t\t\t_interface.on.play();\r\n\t\t\t\t_isPaused = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (isEnd) {\r\n\t\t\t\t_exit();\r\n\t\t\t\t_interface.on.scoFinish();\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\t_log(true, _scorm.GetErrorString(_cmiError) + _errorMessages.CommunicationIssue);\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t// Begin calls\r\n\tSS.InitSco = function (callback) { // Using callback to prevent slide sync issues\r\n\t\t// Setup end sound and Polyfills\r\n\t\tvar endAudio = doc.createElement('audio');\r\n\t\tendAudio.id = 'end';\r\n\t\tendAudio.src = 'end-sound.mp3';\r\n\t\tendAudio.preload = 'auto';\r\n\t\tdoc.body.appendChild(endAudio);\r\n\t\t// Test for autoplay to determine if this is a mobile device\r\n\t\ttry {\r\n\t\t\tvar audio = new Audio();\r\n\t\t\taudio.autoplay = true;\r\n\t\t\taudio.volume = 0;\r\n\t\t\t// this will only be triggered if autoplay works\r\n\t\t\taudio.addEventListener('play', function () {\r\n\t\t\t\twin.CanAutoplay = true;\r\n\t\t\t}, false);\r\n\r\n\t\t\taudio.src = 'blank.mp3';\r\n\t\t} catch (e) {\r\n\t\t}\r\n\t\tvar noSound = doc.createElement('audio');\r\n\t\tnoSound.id = 'blank';\r\n\t\tnoSound.src = 'blank.mp3';\r\n\t\tnoSound.preload = 'auto';\r\n\t\tdoc.body.appendChild(noSound);\r\n\r\n\t\tif (querystrings.debug) {\r\n\t\t\t_debug = true;\r\n\t\t\t_log(false, 'Debug Enabled');\r\n\t\t}\r\n\t\tif (querystrings.demo) {\r\n\t\t\t_demoFrameLimit = querystrings.demo;\r\n\t\t\t_log(false, 'Demo selected');\r\n\t\t} else {\r\n\t\t\t// Scan for LMS communication format\r\n\t\t\tif (querystrings.aicc_url && querystrings.subid) {\r\n\t\t\t\t_cmiCommunication = 'AICC';\r\n\t\t\t\t_aicc._relayUrl += querystrings.subid + '?relay-url=' + querystrings.aicc_url;\r\n\t\t\t\t_log(false, 'AICC selected');\r\n\t\t\t} else {\r\n\t\t\t\t_cmiCommunication = 'SCORM';\r\n\t\t\t\t_log(false, 'SCORM selected');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar author = doc.querySelector('meta[name=author]');\r\n\t\tvar julian = Math.floor((_now.getTime() / 86400000) - (_now.getTimezoneOffset() / 1440) + 2440587.5);\r\n\r\n\t\tif (author && author.getAttribute('content') < julian) {\r\n\t\t\t_log(true, _errorMessages.SubscriptionInactive);\r\n\t\t} else {\r\n\t\t\tif (querystrings.sco) {\r\n\t\t\t\t_sco.path = querystrings.sco;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax(_sco.path, 'GET', {\r\n\t\t\t\tcache: false,\r\n\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t_sco.XML = xhr.responseXML;\r\n\t\t\t\t\t_sco.languages = _sco.XML.getElementsByTagName('language');\r\n\t\t\t\t\t_current.language = _sco.XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t\t\t\tvar sco = _sco.XML.getElementsByTagName('sco')[0];\r\n\t\t\t\t\tif (sco.getAttribute('mastery-score')) {\r\n\t\t\t\t\t\t_sco.scaled_passing_score = sco.getAttribute('mastery-score');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Scorm Code\r\n\t\t\t\t\tswitch (_cmiCommunication) {\r\n\t\t\t\t\t\tcase 'AICC':\r\n\t\t\t\t\t\t\t_ajax(_aicc._relayUrl, 'POST', {\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tcommand: 'GetParam',\r\n\t\t\t\t\t\t\t\t\tversion: _aicc._version,\r\n\t\t\t\t\t\t\t\t\tsession_id: querystrings.aicc_sid\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tdone: function (xhr) {\r\n\t\t\t\t\t\t\t\t\t_log(false, xhr.responseText);\r\n\t\t\t\t\t\t\t\t\tvar scoData = _parseIni(xhr.responseText),\r\n\t\t\t\t\t\t\t\t\t\tstatus = scoData.core.lesson_status.toLowerCase();\r\n\r\n\t\t\t\t\t\t\t\t\tif ('n;i'.split(';').indexOf(status.slice(0, 1)) > -1) {\r\n\t\t\t\t\t\t\t\t\t\t_cmi.completion_status = 'incomplete';\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t_cmi.completion_status = status;\r\n\t\t\t\t\t\t\t\t\t\t_isCompleted = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (status.indexOf(',') > -1) {\r\n\t\t\t\t\t\t\t\t\t\tvar entry = status.split(',')[1];\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (entry.slice(0, 1) === 'r') {\r\n\t\t\t\t\t\t\t\t\t\t\t_cmi.entry = 'resume';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (entry.slice(0, 1) === 'a') {\r\n\t\t\t\t\t\t\t\t\t\t\t_cmi.entry = 'ab-initio';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t_cmi.learner_id = scoData.core.student_id;\r\n\t\t\t\t\t\t\t\t\t_cmi.learner_name = scoData.core.student_name;\r\n\t\t\t\t\t\t\t\t\t_cmi.location = scoData.core.lesson_location;\r\n\r\n\t\t\t\t\t\t\t\t\tvar score = scoData.core.score.split(',');\r\n\t\t\t\t\t\t\t\t\t_cmi.score.raw = score[0];\r\n\t\t\t\t\t\t\t\t\tif (scoData.core_lesson && scoData.core_lesson.suspend_data) {\r\n\t\t\t\t\t\t\t\t\t\t_cmi.suspend_data = JSON.parse(scoData.core_lesson.suspend_data);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\t\t\t_aicc.Put(_cmi);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function (xhr) {\r\n\t\t\t\t\t\t\t\t\tif (xhr.statusCode === 401) {\r\n\t\t\t\t\t\t\t\t\t\t_log(true, _errorMessages.SubscriptionInactive);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'SCORM':\r\n\t\t\t\t\t\t\tif (_scorm.Initialize() === 'true') {\r\n\t\t\t\t\t\t\t\tif (_scorm.GetValue('cmi.core.lesson_status') === 'not attempted') {\r\n\t\t\t\t\t\t\t\t\t_scorm.SetValue('cmi.core.lesson_status', 'incomplete');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_cmi.learner_id = _scorm.GetValue('cmi.core.student_id');\r\n\t\t\t\t\t\t\t\t_cmi.learner_name = _scorm.GetValue('cmi.core.student_name');\r\n\t\t\t\t\t\t\t\t_cmi.entry = _scorm.GetValue('cmi.core.entry');\r\n\t\t\t\t\t\t\t\t_cmi.location = _scorm.GetValue('cmi.core.lesson_location');\r\n\t\t\t\t\t\t\t\t_cmi.score.raw = _scorm.GetValue('cmi.core.score.raw');\r\n\t\t\t\t\t\t\t\tif (_scorm.GetValue('cmi.suspend_data') !== '') {\r\n\t\t\t\t\t\t\t\t\t_cmi.suspend_data = JSON.parse(_scorm.GetValue('cmi.suspend_data'));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'TinCan':\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t_initFinish(callback);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Second step calls (GetLanguage -> SelectLanguage) Or (Resume)\r\n\tSS.GetLanguages = function () {\r\n\t\tvar languagesJSON = [];\r\n\r\n\t\tfor (var i = 0; i < _sco.languages.length; i++) {\r\n\t\t\tvar lang = _sco.languages[i];\r\n\t\t\tlanguagesJSON[i] = { 'id': lang.getAttribute('id'), 'label': lang.getAttribute('label') };\r\n\t\t}\r\n\r\n\t\treturn languagesJSON;\r\n\t};\r\n\r\n\tSS.SelectLanguage = function (language) {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('blank').play();\r\n\r\n\t\tif (language) {\r\n\t\t\t_current.language = language;\r\n\t\t} else {\r\n\t\t\t_current.language = _sco.XML.getElementsByTagName('languages')[0].getAttribute('default');\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current.language);\r\n\r\n\t\t_current.frame = _sco.frames[0];\r\n\t};\r\n\r\n\tSS.Resume = function () {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('blank').play();\r\n\r\n\t\tif (_cmi.location && _cmi.location !== '') {\r\n\t\t\tvar folder = _cmi.location.split('/')[0],\r\n\t\t\t\toptions = SS.GetLanguages();\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tif (options[i].id === folder) {\r\n\t\t\t\t\t_current.language = folder;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_parseFrames(_current.language);\r\n\r\n\t\tvar matchedPage = _getMatchedFrame(_cmi.location);\r\n\r\n\t\tif (matchedPage) {\r\n\t\t\t_current.frame = matchedPage;\r\n\t\t}\r\n\t};\r\n\r\n\t// Last step calls\r\n\tSS.GetLocalizedValues = function () {\r\n\t\tvar data = {};\r\n\t\tfor (var i = 0; i < _sco.languages.length; i++) {\r\n\t\t\tvar lang = _sco.languages[i];\r\n\t\t\tif (lang.getAttribute('id') === _current.language) {\r\n\t\t\t\tvar langElements = lang.childNodes;\r\n\t\t\t\tfor (var e = 0; e < langElements.length; e++) {\r\n\t\t\t\t\tif (langElements[e].textContent) {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].textContent;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata[langElements[e].tagName] = langElements[e].firstChild.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn data;\r\n\t};\r\n\r\n\tSS.InitInterface = function (options) {\r\n\t\t// iOS audio fallback\r\n\t\tdoc.getElementById('blank').play();\r\n\r\n\t\t_interface.on.animate = options.onAnimate;\r\n\t\t_interface.on.progressBar = options.setProgressBar;\r\n\t\t_interface.on.scoFinish = options.onScoFinish;\r\n\r\n\t\t_interface.title = options.titleField;\r\n\t\t_interface.frameNumber = options.frameField;\r\n\r\n\t\t_interface.presentor = options.presentorFrame;\r\n\t\t_interface.kickback = options.kickbackFrame;\r\n\r\n\t\t_interface.presentor.show();\r\n\t\t_interface.kickback.hide();\r\n\r\n\t\tif (_interface.title) {\r\n\t\t\t_interface.title.html(_sco.title);\r\n\t\t\tdoc.title = _sco.title;\r\n\t\t}\r\n\r\n\t\t_update(_current.frame);\r\n\t};\r\n\r\n\tSS.Mute = function (options) {\r\n\t\t_interface.on.mute = options.mute;\r\n\t\t_interface.on.unMute = options.unMute;\r\n\r\n\t\t_interface.on.unMute(); // Default the button to un-muted\r\n\r\n\t\treturn _muteToggle;\r\n\t};\r\n\r\n\tSS.Next = function (options) {\r\n\t\t_interface.on.nextDisable = options.onDisable;\r\n\t\t_interface.on.nextEnable = options.onEnable;\r\n\r\n\t\tif (options.disableOnNext) {\r\n\t\t\t_interface.disableNext = options.disableOnNext;\r\n\t\t}\r\n\r\n\t\treturn _next;\r\n\t};\r\n\r\n\tSS.Play = function (options) {\r\n\t\t_interface.on.play = options.play;\r\n\t\t_interface.on.pause = options.pause;\r\n\r\n\t\treturn _playToggle;\r\n\t};\r\n\r\n\tSS.Previous = function (options) {\r\n\t\t_interface.on.previousDisable = options.onDisable;\r\n\t\t_interface.on.previousEnable = options.onEnable;\r\n\r\n\t\treturn _previous;\r\n\t};\r\n\r\n\tSS.Replay = function () {\r\n\t\treturn _replay;\r\n\t};\r\n\r\n\tSS.EndSco = function () {\r\n\t\treturn function () {\r\n\t\t\t_exit();\r\n\t\t\tif (win.top.opener) {\r\n\t\t\t\twin.top.close();\r\n\t\t\t} else {\r\n\t\t\t\t_log(true, 'Data saved, but window was not able to be closed');\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// Slide functions\r\n\tSS.GetStudentName = function () {\r\n\t\treturn _cmi.learner_name;\r\n\t};\r\n\r\n\tSS.SubmitSurvey = function (survey) {\r\n\t\tif (survey) {\r\n\t\t\tvar data = {\r\n\t\t\t\tComments: survey.Comments,\r\n\t\t\t\tCourseName: doc.title,\r\n\t\t\t\tEmphasis: survey.Emphasis,\r\n\t\t\t\tIntro: survey.Intro,\r\n\t\t\t\tOverall: survey.Overall,\r\n\t\t\t\tScreenHeight: screen.height,\r\n\t\t\t\tScreenWidth: screen.width,\r\n\t\t\t\tStudent: '',\r\n\t\t\t\tSummaries: survey.Summaries,\r\n\t\t\t\tThoroughness: survey.Thoroughness,\r\n\t\t\t\tUrl: location.href,\r\n\t\t\t\tUserAgent: navigator.userAgent\r\n\t\t\t};\r\n\r\n\t\t\tif (survey.IsAnonymous) {\r\n\t\t\t\tdata.Student = 'anonymous';\r\n\t\t\t} else {\r\n\t\t\t\tdata.Student = _cmi.learner_name;\r\n\t\t\t}\r\n\r\n\t\t\t_ajax('https://admin.safetyskills.com/api/survey', 'POST', {\r\n\t\t\t\tdata: data,\r\n\t\t\t\tdone: function () {\r\n\t\t\t\t\t_log(false, 'Survey Data: ' + data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t};\r\n\r\n\tSS.SlideStart = function (options) {\r\n\t\t_interface.on.slidePause = options.slidePause;\r\n\t\t_interface.on.slidePlay = options.slidePlay;\r\n\t\t_interface.on.slideMute = options.slideMute;\r\n\t\t_interface.on.slideUnMute = options.slideUnMute;\r\n\r\n\t\tif (_interface.on.animate) {\r\n\t\t\t_interface.on.animate(_current.bullets, _current.captions);\r\n\t\t}\r\n\t\tif (_isMuted && _interface.on.slideMute) {\r\n\t\t\t_interface.on.slideMute();\r\n\t\t}\r\n\t};\r\n\r\n\tSS.SlideEnd = function () {\r\n\t\tsetTimeout(function () {\r\n\t\t\tdoc.getElementById('end').play();\r\n\t\t\tif (!win.CanAutoplay) {\r\n\t\t\t\t_next();\r\n\t\t\t} else {\r\n\t\t\t\t_interface.on.nextEnable();\r\n\t\t\t\t_current.nextEnabled = true;\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\tSS.ScoreResults = function () {\r\n\t\tvar answers = 0;\r\n\t\tif (_cmi.suspend_data.answered) {\r\n\t\t\tanswers = _cmi.suspend_data.answered.length;\r\n\t\t}\r\n\t\tvar ratio = answers / _sco.quizTotal;\r\n\r\n\t\treturn {\r\n\t\t\tanswered: answers,\r\n\t\t\tpassed: ratio >= _sco.scaled_passing_score,\r\n\t\t\tpercent: (ratio * 100).toFixed(2),\r\n\t\t\ttotal: _sco.quizTotal\r\n\t\t};\r\n\t};\r\n\r\n\tSS.QuizCorrect = function () {\r\n\t\tif (_sco.scaled_passing_score) {\r\n\t\t\tif (_current.frame.getAttribute('pType') === 'quiz') {\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\tif (_cmi.suspend_data.answered) {\r\n\t\t\t\t\tindex = _cmi.suspend_data.answered.indexOf(_current.frame.getAttribute('file'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_cmi.suspend_data.answered = [];\r\n\t\t\t\t}\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t_cmi.suspend_data.answered.push(_current.frame.getAttribute('file'));\r\n\r\n\t\t\t\t\tvar answers = 0;\r\n\t\t\t\t\tif (_cmi.suspend_data.answered) {\r\n\t\t\t\t\t\tanswers = _cmi.suspend_data.answered.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ratio = answers / _sco.quizTotal;\r\n\r\n\t\t\t\t\t_cmi.score.raw = (ratio * 100).toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_next();\r\n\t};\r\n\r\n\tSS.QuizIncorrect = function () {\r\n\t\tvar firstKickback = _current.frame.getElementsByTagName('kickback')[0];\r\n\r\n\t\tif (_sco.scaled_passing_score) {\r\n\t\t\tvar index = -1;\r\n\t\t\tif (_cmi.suspend_data.answered) {\r\n\t\t\t\tindex = _cmi.suspend_data.answered.indexOf(_current.frame.getAttribute('file'));\r\n\t\t\t}\r\n\t\t\tif (index > -1) {\r\n\t\t\t\t_cmi.suspend_data.answered.splice(index, 1);\r\n\r\n\t\t\t\tvar answers = 0;\r\n\t\t\t\tif (_cmi.suspend_data.answered) {\r\n\t\t\t\t\tanswers = _cmi.suspend_data.answered.length;\r\n\t\t\t\t}\r\n\t\t\t\tvar ratio = answers / _sco.quizTotal;\r\n\r\n\t\t\t\t_cmi.score.raw = (ratio * 100).toFixed(2);\r\n\t\t\t}\r\n\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\tvar matchedFrame = _getMatchedFrame(firstKickback.getAttribute('file'));\r\n\t\t\t\t_isKickback = false;\r\n\r\n\t\t\t\tif (_update(matchedFrame)) {\r\n\t\t\t\t\t_current.frame = matchedFrame;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_next();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (firstKickback) {\r\n\t\t\t\tvar matchedKickback = _getMatchedFrame(firstKickback.getAttribute('file'));\r\n\t\t\t\t_isKickback = true;\r\n\r\n\t\t\t\tif (_update(matchedKickback)) {\r\n\t\t\t\t\t_current.kickback = matchedKickback;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t_log(false, 'SS v2.8: Loaded');\r\n\r\n\treturn SS;\r\n})(this, this.document, this.querystrings || {});"],"sourceRoot":"/source/"}