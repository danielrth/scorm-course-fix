this.CanAutoplay=!1,function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("SS requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(t,i){var n=!0,a="",r=!e.requestAnimationFrame,s={done:function(){},fail:function(){}},o="POST",c=new XMLHttpRequest;if(i){if(i.async===!1&&(n=!1),i.cache===!1&&(o="GET",t=t+"?_="+(new Date).getTime()),i.data){var l=[];for(var u in i.data)i.data.hasOwnProperty(u)&&l.push(encodeURIComponent(u)+"="+encodeURIComponent(i.data[u]));a=l.join("&")}i.done&&(s.done=i.done),i.fail&&(s.fail=i.fail)}"POST"===o&&r&&(c=new e.XDomainRequest,c.onload=function(){s.done.call(s,c)},c.onerror=function(){s.fail.call(s,c)},c.onprogress=function(){},c.ontimeout=function(){}),c.open(o,t,n),c.setRequestHeader&&(c.setRequestHeader("content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){4===this.readyState&&(200===this.status?s.done.call(s,this):s.fail.call(s,this))}),setTimeout(function(){c.send(a)},0)}function n(){try{var t=new Audio;t.addEventListener("play",function(){e.CanAutoplay=!0},!1),t.volume=0,t.autoplay=!0,t.src="end-sound.mp3"}catch(e){}}function a(e){var t=Be?"slide-kick":"slide-frame";return e.indexOf(".swf")>-1?'<embed fullscreen="yes" height="100%" src="'+e+'" width="100%" id="'+t+'" name="'+t+'" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" quality="high" wmode="opaque"></embed>':'<iframe height="100%" id="'+t+'" scrolling="no" src="'+e+'" style="border: none overflow: hidden" width="100%"></iframe>'}function r(t){return t&&(e.location.hash="debug"),"#debug"===e.location.hash}function s(){if("~"!==xe)switch(xe="~",Pe){case $:case Y:He.Exit();break;case Z:je.Terminate();break;case te:}}function o(e){for(var t=0;t<Fe.length;t++)if(Fe[t].getAttribute("file")===e)return t+1}function c(e){for(var t=0;t<Fe.length;t++)if(Fe[t].getAttribute("file")===e)return Fe[t];return Fe[0]}function l(t){if("~"===xe&&u(ye,!r()),e.addEventListener("beforeunload",s),X.onkeydown=function(e){var t=!1;33===e.which&&(ze||r())&&(f(),t=!0),34===e.which&&De&&(b(),t=!0),106===e.which&&(h(),t=!0),36===e.which&&(v(),t=!0),r()||119===e.which&&(r(!0),t=!0,u("Debug enabled")),t&&e.preventDefault()},(!Le||!Le.scoId)&&Te&&""!==Te)for(var i=Te.split("/")[0],n=Xe.GetLanguages(),a=0;a<n.length;a++)n[a].id===i&&(Le.scoId=i);p(),t("resume"===Se)}function u(t,i){i?alert(t):e.console&&e.console.log&&e.console.log(t)}function d(e,t){var i=new Date;i.setTime(e);var n="",a="000"+Math.floor(e/36e5),r="0"+i.getMinutes(),s="0"+i.getSeconds(),o="0"+Math.round(i.getMilliseconds()/10);if(n=a.substr(a.length-4)+":"+r.substr(r.length-2)+":",n+=s.substr(s.length-2)+"."+o.substr(o.length-2),t===ee){var c=n.split(":"),l=c[0],u=c[1],d=c[2];n="PT"+l+"H"+u+"M"+d+"S"}return n}function m(){Oe?(Ce.on.unMute&&Ce.on.unMute(),Oe=!1,Ce.on.slideUnMute&&Ce.on.slideUnMute()):(Ce.on.mute&&Ce.on.mute(),Oe=!0,Ce.on.slideMute&&Ce.on.slideMute())}function f(){if(Pe===Q&&Ue<o(D.getAttribute("file")))alert(ve);else{for(var e,t=!1,i=Be?D.getElementsByTagName("kickback"):Fe,n=Be?F.getAttribute("file"):D.getAttribute("file"),a=0;a<i.length;a++){var r=i[a].getAttribute("file");if(t){e=r;break}n===r&&(t=!0)}t&&e?k(c(e)):Be&&(Be=!1,F=void 0,k(D,!0))}}function p(){var e,t=j.getElementsByTagName("topics");Le.scoId||(Le.scoId=j.getElementsByTagName("languages")[0].getAttribute("default"));for(var i=0;i<t.length;i++){var n=t[i];n.getAttribute("lang")===Le.scoId&&(e=n,X.title=e.getAttribute("title"))}Fe=[];var a=e.getElementsByTagName("page"),r=["survey"];Pe===W&&r.push("quiz"),Re=0;for(var s=0;s<a.length;s++){var o=a[s].getAttribute("pType");r.indexOf(o)===-1&&(Fe.push(a[s]),"quiz"===o&&Re++)}}function g(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},i={},n=e.substring(e.indexOf("[")).split(/\n|\r\n/g),a=null;return n.forEach(function(e){if(!t.comment.test(e))if(t.param.test(e)){var n=e.match(t.param);a?i[a.toLowerCase()][n[1].toLowerCase()]=n[2]:i[n[1].toLowerCase()]=n[2]}else if(t.section.test(e)){var r=e.match(t.section);i[r[1].toLowerCase()]={},a=r[1].toLowerCase()}else 0===e.length&&a&&(a=null)}),i}function h(){qe?(Ce.on.play&&Ce.on.play(),qe=!1,Ce.on.slidePlay&&Ce.on.slidePlay()):(Ce.on.pause&&Ce.on.pause(),qe=!0,Ce.on.slidePause&&Ce.on.slidePause())}function b(){var e,t=Be?D.getElementsByTagName("kickback"):Fe,i=Be?F.getAttribute("file"):D.getAttribute("file");if(t[0].getAttribute("file")!==i){for(var n=0;n<t.length;n++){var a=t[n].getAttribute("file");if(e&&i===a)break;e=a}k(c(e))}}function v(){Be?Ce.kickback.html(a(F.getAttribute("file"))):Ce.presentor.html(a(D.getAttribute("file"))),Ce.on.play&&(Ce.on.play(),qe=!1)}function y(t){e.CanAutoplay?(Ce.presentor.css("visibility",t?"visible":"hidden"),Ce.kickback.css("visibility",t?"hidden":"visible")):(Ce.presentor.css("display",t?"block":"none"),Ce.kickback.css("display",t?"none":"block"))}function _(e){try{return JSON.parse(e)}catch(e){return{}}}function k(t,i){var n=t.getAttribute("file"),c=o(n),l="true"===t.getAttribute("end"),m="quiz"===t.getAttribute("pType")||"summary"===t.getAttribute("pType"),f=t.getElementsByTagName("narration")[0],p=t.getElementsByTagName("bullets")[0];if("~"!==xe){var g=new Date,h=g.getTime()-ke.getTime(),b=d(h,Pe);switch(Be||(Te=n),Ne=b.toString(),l&&(Ae="",H?we=re:(we=ie,R&&(we=re,Me="100.00"))),Pe){case $:case Y:He.Put();break;case Z:Be||(je.SetValue(ue,Te),Ie=je.GetLastError()),Ie===oe&&(je.SetValue(de,Ne),je.SetValue(le,Ae),je.SetValue(fe,we),je.SetValue(me,Me),je.SetValue(he,JSON.stringify(Le)),Ie=je.GetLastError()),Ie===oe?(je.Commit(),Ie=je.GetLastError()):u(be,!r());break;case te:}}else u(ye,!r());if(Ie===oe||r()){if(Ce.frameNumber&&Ce.frameNumber.html(c+" / "+Fe.length),Ce.on.progressBar){var v=c/Fe.length;isNaN(v)&&(v=0),v>1&&(v=1),Ce.on.progressBar(100*v)}return q=f&&null!==f?e.requestAnimationFrame?(new XMLSerializer).serializeToString(f):f.xml:"",Ge=p&&null!==p?e.requestAnimationFrame?(new XMLSerializer).serializeToString(p):p.xml:"",i?(y(!0),Ce.kickback.empty(),ze=!1,De=!0):(Be?(y(!1),Ce.kickback.html(a(n)),De=D.getElementsByTagName("kickback")[0].getAttribute("file")!==n):(y(!0),Ce.presentor.html(a(n)),De=Fe[0].getAttribute("file")!==n),ze=!(!Be&&(m||Ce.disableNext&&c>1))),De?Ce.on.previousEnable():Ce.on.previousDisable(),ze?Ce.on.nextEnable():Ce.on.nextDisable(),(m||l)&&Xe.SlideStart({}),Ce.on.play&&(Ce.on.play(),qe=!1),l&&(e.setTimeout(s,1e3),Ce.on.scoFinish()),Be?F=t:D=t,!0}return!1}function w(e){var t=X.createElement("audio");t.id="end",t.src="end-sound.mp3",t.preload="auto",t.volume=0,X.body.appendChild(t),n(),J.mode&&(r(!0),J.mode===W&&(Pe=W),J.mode===Q&&(Pe=Q,J.limit&&(Ue=J.limit))),Pe===K&&"true"===je.Initialize(ee)&&(Pe=ee),Pe===K&&"true"===je.Initialize(Z)&&(Pe=Z),Pe===K&&J.aicc_url&&J["sub-relay"]&&(Pe=$,He._relayUrl=J["sub-relay"]+"?relay-url="+J.aicc_url),Pe===K&&J.aicc_url&&(Pe=Y,He._relayUrl=J.aicc_url);var a=X.querySelector("meta[name=author]"),s=Math.floor(ke.getTime()/864e5-ke.getTimezoneOffset()/1440+2440587.5);if(a&&a.getAttribute("content")<s)u(_e,!r());else{var o="sco.xml";J.sco&&(o=J.sco),i(o,{cache:!1,done:function(t){j=t.responseXML;var i=j.getElementsByTagName("sco")[0];switch(i.getAttribute("mastery-score")&&(H=i.getAttribute("mastery-score")),u("SS v"+Xe.version+" Initialized, Tracking type: "+Pe),Pe){case $:case Y:He.Init(e);break;case Z:if("not attempted"===je.GetValue(fe)&&je.SetValue(fe,ae),xe=je.GetValue(pe),Ee=je.GetValue(ge),Se=je.GetValue(ce),Te=je.GetValue(ue),Me=je.GetValue(me),""!==je.GetValue(he)){var n=je.GetValue(he);0===n.lastIndexOf("suspend_data=",0)&&(n=n.slice(13)),Le=_(n)}l(e);break;case te:default:l(e)}}})}}function S(){for(var e=j.getElementsByTagName("language"),t=[],i=0;i<e.length;i++){var n=e[i];t[i]={id:n.getAttribute("id"),label:n.getAttribute("label")}}return t}function A(e){X.getElementById("end").play(),e&&(Le.scoId=e),Te="",p()}function x(){X.getElementById("end").play()}function E(){for(var e=j.getElementsByTagName("language"),t={},i=0;i<e.length;i++){var n=e[i];if(n.getAttribute("id")===Le.scoId)for(var a=n.childNodes,r=0;r<a.length;r++)a[r].textContent?t[a[r].tagName]=a[r].textContent:t[a[r].tagName]=a[r].firstChild.nodeValue}return t}function T(e){Ce.on.animate=e.onAnimate,Ce.on.progressBar=e.setProgressBar,Ce.on.scoFinish=e.onScoFinish,Ce.frameNumber=e.frameField,Ce.presentor=e.presentorFrame,Ce.kickback=e.kickbackFrame,e.titleField&&e.titleField.html(X.title),e.commaHack&&(U=!0),e.scoreHack&&(R=!0),k(c(Te))}function M(e){return Ce.on.mute=e.mute,Ce.on.unMute=e.unMute,Ce.on.unMute(),m}function N(e){return Ce.on.nextDisable=e.onDisable,Ce.on.nextEnable=e.onEnable,e.disableOnNext&&Pe!==W&&(Ce.disableNext=e.disableOnNext),f}function L(e){return Ce.on.play=e.play,Ce.on.pause=e.pause,h}function P(e){return Ce.on.previousDisable=e.onDisable,Ce.on.previousEnable=e.onEnable,b}function I(){return v}function G(){return Ee}function C(){e.CanAutoplay||n(),setTimeout(function(){var t=X.getElementById("end");t.volume=1,t.play(),e.CanAutoplay?(Ce.on.nextEnable(),ze=!0):f()},1e3)}function V(e){Ce.on.slidePause=e.slidePause,Ce.on.slidePlay=e.slidePlay,Ce.on.slideMute=e.slideMute,Ce.on.slideUnMute=e.slideUnMute,Ce.on.animate&&Ce.on.animate(Ge,q),Oe&&Ce.on.slideMute&&Ce.on.slideMute()}function B(){var e=0;Le.answered&&(e=Le.answered.length);var t=e/Re;return{answered:e,passed:t>=H,percent:(100*t).toFixed(2),total:Re}}function O(){if(H&&"quiz"===D.getAttribute("pType")){var e=-1;if(Le.answered?e=Le.answered.indexOf(D.getAttribute("file")):Le.answered=[],e===-1){Le.answered.push(D.getAttribute("file"));var t=0;Le.answered&&(t=Le.answered.length);var i=t/Re;Me=(100*i).toFixed(2)}}f()}function z(){var e=D.getElementsByTagName("kickback")[0];if(H){var t=-1;if(Le.answered&&(t=Le.answered.indexOf(D.getAttribute("file"))),t>-1){Le.answered.splice(t,1);var i=0;Le.answered&&(i=Le.answered.length);var n=i/Re;Me=(100*n).toFixed(2)}e?(Be=!1,k(c(e.getAttribute("file")))):f()}else e&&(Be=!0,k(c(e.getAttribute("file"))))}var q,D,F,U,R,H,j,X=e.document,J=e.querystrings||{},$="aicc",Q="demo",Y="aicc-local",K="none",W="playthrough",Z="1.2",ee="2004",te="xapi",ie="completed",ne="failed",ae="incomplete",re="passed",se="100",oe="0",ce="cmi.core.entry",le="cmi.core.exit",ue="cmi.core.lesson_location",de="cmi.core.session_time",me="cmi.core.score.raw",fe="cmi.core.lesson_status",pe="cmi.core.student_id",ge="cmi.core.student_name",he="cmi.suspend_data",be="An error occurred with the action you performed, if you continue to get this message please close and restart the course. \n\n Se ha producido un error en la accion realizada, si usted continua recibir este mensaje, por favor, cierre y reinicie el curso.",ve="Thank you for watching this course demo!",ye="This course encountered an error. Your progress will NOT be recorded. Please close and restart the course. \n\n Este curso ha detectado un error. NO se grabara su progreso. Por favor, cierre y reincie el curso.",_e="Sorry this subscription is no longer active. Please contact your supervisor or SafetySkills support at support@safetyskills.com",ke=new Date,we=ae,Se="",Ae="suspend",xe="~",Ee="Example, Anne E.",Te="",Me="",Ne="00:00:00",Le={},Pe=K,Ie=se,Ge="",Ce={disableNext:!1,frameNumber:void 0,kickback:void 0,on:{animate:void 0,mute:void 0,nextEnable:void 0,nextDisable:void 0,pause:void 0,play:void 0,previousEnable:void 0,previousDisable:void 0,progressBar:void 0,slidePlay:void 0,slidePause:void 0,slideMute:void 0,slideUnMute:void 0,scoFinish:void 0,unMute:void 0},presentor:void 0},Ve=!1,Be=!1,Oe=!1,ze=!1,qe=!1,De=!1,Fe=[],Ue=4,Re=0,He={_relayUrl:"",_version:"4.0",Exit:function(){i(this._relayUrl,{async:!1,data:{command:"ExitAU",version:this._version,session_id:J.aicc_sid}})},Init:function(e){i(this._relayUrl,{data:{command:"GetParam",version:this._version,session_id:J.aicc_sid},done:function(t){Ie=oe,u(t.responseText);var i=g(t.responseText),n=i.core.lesson_status.toLowerCase(),a=n.trim().slice(0,1);if(xe=i.core.student_id,Ee=i.core.student_name,Te=i.core.lesson_location,"n;i".split(";").indexOf(a)>-1?we=ae:(we="f"===a?ne:"p"===a?re:ie,Ve=!0),n.indexOf(",")>-1){var r=n.split(",")[1].trim().slice(0,1);"a"===r&&(Se="ab-initio"),("r"===r||Te&&""!==Te)&&(Se="resume")}var s=i.core.score.split(",");Me=s[0],i.core_lesson&&i.core_lesson.suspend_data&&(Le=_(i.core_lesson.suspend_data)),l(e)},fail:function(t){402===t.status&&u(_e,!r()),l(e)}})},Put:function(){var e=we,t="";Ve||e!==ie&&e!==re||(Ve=!0,t=this._relayUrl.indexOf("?")>-1?"&completed=true":"?completed=true"),(""!==Ae||U)&&(e=e+","+Ae);var n=["[core]","lesson_location="+Te,"score="+Me,"lesson_status="+e,"time="+Ne,"[core_lesson]","suspend_data="+JSON.stringify(Le)].join("\r\n");i(this._relayUrl+t,{async:!1,data:{command:"PutParam",version:this._version,session_id:J.aicc_sid,aicc_data:n},done:function(e){Ie=oe,u(e.responseText)},fail:function(e){402===e.status?u(_e,!r()):u(be,!r()),Ie=se}})}},je={_api:void 0,_getApi:function(t){this._api=this._scanParents(e),this._api||e.parent===e||(this._api=this._scanParents(e.parent,t)),!this._api&&e.opener&&(this._api=this._scanParents(e.opener,t))},_scanParents:function(e,t){try{for(var i=0;!e[t]&&e.parent!==e;){if(i++,i>10)return;e=e.parent}return e[t]}catch(e){return}},Commit:function(){var e="false";return this._api&&(e=Pe===ee?this._api.Commit(""):this._api.LMSCommit("")),e.toString()},GetLastError:function(){var e=100;return this._api&&(e=Pe===ee?this._api.GetLastError():this._api.LMSGetLastError()),e.toString()},GetValue:function(e){var t="",i=se;if(this._api){if(Pe===ee){switch(e){case fe:e="cmi.completion_status";break;case ce:e="cmi.entry";break;case de:e="cmi.session_time";break;case"cmi.core.total_time":e="cmi.total_time";break;case ue:e="cmi.location";break;case ge:e="cmi.learner_name";break;case pe:e="cmi.learner_id";break;case"cmi.student_preference._children":e="cmi.learner_preference._children";break;case"cmi.student_preference.language":e="cmi.learner_preference.language";break;case"cmi.core.score._children":e="cmi.score._children";break;case me:e="cmi.score.raw";break;case"cmi.core.score.min":e="cmi.score.min";break;case"cmi.core.score.max":e="cmi.score.max"}t=this._api.GetValue(e),i=this._api.GetLastError().toString()}else t=this._api.LMSGetValue(e),i=this._api.LMSGetLastError().toString();i!==oe&&(t="")}return t.toString()},Initialize:function(e){var t="false";return e===ee?(this._getApi("API_1484_11"),this._api&&(t=this._api.Initialize(""))):(this._getApi("API"),this._api&&(t=this._api.LMSInitialize(""))),t.toString()},SetValue:function(e,t){if(this._api)if(Pe===ee){switch(e){case fe:t!==re&&t!==ne||(e="cmi.success_status"),t!==ie&&t!==ae||(e="cmi.completion_status");break;case de:e="cmi.session_time";break;case ue:e="cmi.location";break;case le:e="cmi.exit";break;case me:e="cmi.score.raw",this._api.SetValue("cmi.score.scaled",t/100)}this._api.SetValue(e,t)}else this._api.LMSSetValue(e,t)},Terminate:function(){var e="false";return this._api&&(e=Pe===ee?this._api.Terminate(""):this._api.LMSFinish("")),e.toString()}},Xe={InitSco:w,GetLanguages:S,SelectLanguage:A,Resume:x,GetLocalizedValues:E,InitInterface:T,CC:function(){},Mute:M,Next:N,Play:L,Previous:P,Replay:I,GetStudentName:G,SlideEnd:C,SlideStart:V,ScoreResults:B,QuizCorrect:O,QuizIncorrect:z,version:"2.9.11"};return"function"==typeof define&&define.amd&&define("ss",[],function(){return Xe}),t||(e.SS=e.NS=Xe),Xe});
//# sourceMappingURL=ss.2.9.min.js.map
